import{r as t,A as $,j as s,a0 as b}from"./index-b9OYvAdP.js";import{l as z}from"./RevSpire-logo-BbDjnAdX.js";import{b as P,M as B}from"./Bg-DpaFJybN.js";import{F as v,X as y,Y as N}from"./index-9bYYq6UN.js";const d=({isActive:r})=>s.jsx("span",{className:`h-2 w-2 rounded-full ${r?"btn-secondary":"bg-gray-400"}`});function q(){const{successMessage:r,errorMessage:u,setErrorMessage:o,setSuccessMessage:U,password:n,setPassword:k,confirmPassword:g,setConfirmPassword:S,setResetPasswordToken:x,handlePasswordReset:C}=t.useContext($),[l,L]=t.useState({minLength:!1,hasDigit:!1,hasSpecialChar:!1,hasAlphabet:!1}),[f,A]=t.useState(!1),[m,R]=t.useState(!1),[h,E]=t.useState(!1),w=e=>{const c=/[0-9]/.test(e),p=/[!@#$%^&*(),.?":{}|<>]/.test(e),j=/[a-zA-Z]/.test(e);return L({minLength:e.length>=8,hasDigit:c,hasSpecialChar:p,hasAlphabet:j}),e.length<8?"Password must be at least 8 characters long.":c?p?j?null:"Password must contain at least one letter.":"Password must contain at least one special character.":"Password must contain at least one digit."},I=()=>{const e=new URLSearchParams(window.location.search),a=e.get("token"),c=e.get("userId");return{resetPasswordTokenParam:a,userId:c}},{resetPasswordTokenParam:i,userId:M}=I();t.useEffect(()=>{i&&x(i)},[i,x]);const D=async e=>{if(e.preventDefault(),n!==g){o("Passwords do not match");return}const a=w(n);if(a){o(a);return}await C({resetPasswordToken:i,password:n,userId:M})},F=e=>{k(e),o(""),w(e)},T=e=>{S(e),o("")};return s.jsxs("div",{className:"flex flex-row h-screen",style:{backgroundColor:"#f4f6f9"},children:[s.jsx("div",{className:"flex items-center justify-center w-[80%] lg:w-1/2 p-8  bg-grey-600",children:s.jsx("div",{className:"w-[70%] sm:max-w-md md:max-w-lg lg:max-w-xl bg-white rounded-lg shadow-md mx-12",children:s.jsxs("div",{className:"pb-6 pt-3 px-5 space-y-4",children:[s.jsx("img",{src:z,alt:"RevSpire Logo",className:"mx-auto h-10"}),s.jsx("h1",{className:"text-lg font-bold leading-tight text-gray-900",children:"Reset Password"}),u&&s.jsx("p",{className:"text-red-500",children:u}),r&&s.jsx("p",{className:"text-green-500",children:r}),s.jsxs("form",{onSubmit:D,className:"space-y-1",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:m?"text":"password",id:"password",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring focus:ring-sky-800 focus:outline-none",placeholder:"••••••••",value:n,onChange:e=>F(e.target.value)}),s.jsx("span",{onClick:()=>R(!m),className:"absolute inset-y-0 right-3 flex items-center cursor-pointer",children:s.jsx(v,{icon:m?y:N})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block mb-2 text-sm font-medium text-gray-900",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:h?"text":"password",id:"confirm-password",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring focus:ring-sky-800 focus:outline-none",placeholder:"••••••••",value:g,onChange:e=>T(e.target.value)}),s.jsx("span",{onClick:()=>E(!h),className:"absolute inset-y-0 right-3 flex items-center cursor-pointer",children:s.jsx(v,{icon:h?y:N})})]})]}),s.jsxs("div",{className:"flex space-x-1 ml-2 mx-4",children:[s.jsx(d,{isActive:l.minLength}),s.jsx(d,{isActive:l.hasDigit}),s.jsx(d,{isActive:l.hasSpecialChar}),s.jsx(d,{isActive:l.hasAlphabet})]}),s.jsx("button",{type:"submit",className:"w-full px-4 py-2 mt-6 text-white btn-secondary rounded-lg",children:"Submit"}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsx(b,{to:"/login",className:"text-sm font-medium text-slate-600 hover:underline hover:text-teal-950",children:"Back to Login?"}),s.jsx(b,{to:"/forgot-password",className:"text-sm font-medium text-slate-600 hover:underline hover:text-teal-950",children:"Resend Forgot-Password Link"})]})]})]})})}),s.jsxs("div",{className:"hidden lg:flex items-center justify-center w-full lg:w-1/2",style:{backgroundImage:`url(${P})`,backgroundSize:"cover",backgroundPosition:"center"},children:[f?null:s.jsx("img",{src:B,alt:"Loading",className:"h-20 w-20"}),s.jsx("img",{src:P,alt:"Background",className:"h-full w-full object-cover",onLoad:()=>A(!0),style:{display:f?"block":"none"}})]})]})}export{q as default};
