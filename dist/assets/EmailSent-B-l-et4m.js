import{t as U,r as a,A as R,b as A,j as e,a0 as C}from"./index-b9OYvAdP.js";import{l as E}from"./RevSpire-logo-BbDjnAdX.js";import{Q as P,B as l}from"./ReactToastify-D-1G0H5q.js";import{M,b as y}from"./Bg-DpaFJybN.js";import{L as B}from"./index-DHI5Vo0j.js";function O(){var h,p;const[j]=U(["userData"]),{baseURL:b,frontendBaseURL:c}=a.useContext(R),[d,n]=a.useState(""),[m,w]=a.useState(""),[u,x]=a.useState(!1),[g,N]=a.useState(!0),[o,L]=a.useState(""),v=A();let i;if(c)i=new URL(c).host;else{const s=j.userData;if(s){const t=((h=s.organisation)==null?void 0:h.domain)||"",k=`https://${((p=s.organisation)==null?void 0:p.tenant_name)||""}.${t}`;i=new URL(k).host}}const S=async s=>{if(s.preventDefault(),!o){n("User Name is required");return}x(!0);try{const t=await fetch(`${b}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:o,frontendURL:i})}),r=await t.json();t.ok?(l.success(r.message),w(r.message),setTimeout(()=>{v("/login")},7e3)):(l.error(r.message||"An error occurred. Please try again."),n(r.message||"An error occurred. Please try again."))}catch(t){l.error("An error occurred. Please try again."),console.error("Error:",t),n("An error occurred. Please try again.")}finally{x(!1)}},f=()=>{setTimeout(()=>{N(!1)},300)};return e.jsxs("div",{children:[e.jsx(P,{}),g&&e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(M,{})}),e.jsxs("div",{className:`flex flex-row h-screen transition-opacity duration-500 ${g?"opacity-0":"opacity-100"}`,style:{backgroundColor:"#f4f6f9"},children:[e.jsx("div",{className:"flex items-center justify-center w-full lg:w-1/2 p-6 sm:p-12 bg-grey-600",children:e.jsx("div",{className:"w-full sm:max-w-md md:max-w-lg lg:max-w-xl bg-white rounded-lg shadow-md mx-14",children:e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsx("img",{src:E,alt:"RevSpire Logo",className:"mx-auto mb-6 h-12",onLoad:f}),e.jsx("h1",{className:"text-2xl font-bold leading-tight text-gray-900",children:"Forgot Password"}),d&&e.jsx("p",{className:"text-red-500",children:d}),m&&e.jsx("p",{className:"text-green-500",children:m}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-sky-900",children:"An email will be sent to your registered email address with instructions to reset your password."}),e.jsx("label",{className:"block mb-2 mt-2 text-sm font-medium text-gray-900",children:"Username"}),e.jsx("input",{type:"email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring focus:ring-sky-800 focus:outline-none",placeholder:"Enter your username",value:o,onChange:s=>L(s.target.value)})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full px-4 py-2 mt-6 text-white btn-secondary rounded-lg flex justify-center items-center",children:u?e.jsx(B,{className:"animate-spin text-white size-[24px]"}):"Submit"}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx(C,{to:"/login",className:"text-sm font-medium text-slate-600 italic hover:underline hover:text-teal-950",children:"Back to Login"})})]})]})})}),e.jsx("div",{className:"hidden lg:flex items-center justify-center w-full lg:w-1/2",style:{backgroundImage:`url(${y})`,backgroundSize:"cover",backgroundPosition:"center"},children:e.jsx("div",{className:"p-6 sm:p-12 text-right",children:e.jsx("h1",{className:"text-4xl font-bold text-white"})})}),e.jsx("img",{src:y,alt:"Background",className:"hidden",onLoad:f})]})]})}export{O as default};
