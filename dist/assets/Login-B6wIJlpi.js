import{r as u,j as e,a0 as C,A as F,t as P}from"./index-b9OYvAdP.js";import{l as U}from"./RevSpire-logo-BbDjnAdX.js";import{M as I,b as L}from"./Bg-DpaFJybN.js";import{L as E}from"./index-DHI5Vo0j.js";import{F as R,X as D,Y as M}from"./index-9bYYq6UN.js";const A=({heading:a,fields:o,handleSubmit:w,successMessage:t,errorMessage:l,links:g,onResetForm:j})=>{const[c,x]=u.useState(!1),[i,d]=u.useState(!1),[m,v]=u.useState(!0),[p,k]=u.useState(!1),h=async s=>{s.preventDefault(),d(!0);const r=await w(s);d(!1),r?o.length>=1&&o.find(b=>b.id==="username")&&x(!0):x(!1)},f=()=>{setTimeout(()=>{v(!1)},300)},y=()=>{k(!p)};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(I,{})}),e.jsxs("div",{className:`flex flex-row h-screen transition-opacity duration-500 ${m?"opacity-0":"opacity-100"}`,style:{backgroundColor:"#f4f6f9"},children:[e.jsx("div",{className:"flex items-center justify-center lg:w-1/2 p-6 sm:p-12 bg-grey-600 w-[80%]",children:e.jsx("div",{className:"w-[70%] sm:max-w-md md:max-w-lg lg:max-w-xl rounded-lg shadow-md mx-10",children:e.jsxs("div",{className:"px-6 py-2 space-y-3",children:[e.jsx("img",{src:U,alt:"RevSpire Logo",className:"mx-auto mb-1 h-11 pt-3",onLoad:f}),e.jsx("h1",{className:"text-xl font-bold leading-tight text-gray-900",children:a}),l&&e.jsx("p",{className:"text-red-500",children:l}),t&&e.jsx("p",{children:t}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.map((s,r)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:s.id,className:"block mb-1 text-sm font-medium text-gray-900",children:s.label}),s.type==="password"?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",id:s.id,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring focus:ring-sky-800 focus:outline-none",placeholder:s.placeholder,value:s.value,onChange:n=>s.onChange(n.target.value)}),e.jsx("span",{onClick:y,className:"absolute inset-y-0 right-3 flex items-center cursor-pointer",children:e.jsx(R,{icon:p?D:M})})]}):e.jsx("input",{type:s.type,id:s.id,className:`w-full p-2 border border-gray-300 rounded-lg focus:ring focus:ring-sky-800 focus:outline-none ${s.id==="username"&&c?"bg-gray-200 cursor-not-allowed":""}`,placeholder:s.placeholder,value:s.value,onChange:n=>s.onChange(n.target.value),readOnly:s.id==="username"&&c,disabled:s.id==="username"&&c})]},r)),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 mt-6 text-white btn-secondary rounded-lg flex justify-center items-center",disabled:i,children:i?e.jsx(E,{className:"animate-spin text-white size-[24px]"}):"Submit"}),!(a==="Sign In"&&o.length===1)&&e.jsx("div",{className:"flex items-center justify-between mt-4",children:g.map((s,r)=>e.jsx(C,{to:s.LinkPath,onClick:s.onClick,className:"text-sm font-medium text-slate-600 hover:underline hover:text-teal-950",children:s.LinkName},r))})]})]})})}),e.jsx("div",{className:"hidden lg:flex items-center justify-center w-full lg:w-1/2",style:{backgroundImage:`url(${L})`,backgroundSize:"cover",backgroundPosition:"center"},children:e.jsx("div",{className:"p-6 sm:p-12 text-right"})}),e.jsx("img",{src:L,alt:"Background",className:"hidden",onLoad:f})]})]})},q=()=>{var n,b;const{userData:a,handleLogin:o,handleUserName:w,userName:t,setUserName:l,password:g,setPassword:j,successMessage:c,errorMessage:x,isUsernameValid:i,setIsUsernameValid:d,setErrorMessage:m,setSuccessMessage:v}=u.useContext(F),[p,k,h]=P(["userData","revspireToken"]),f=async N=>{if(N.preventDefault(),!t){m("User Name is required");return}if(i)await o({userName:t,password:g});else try{await w({userName:t}),d(!0)}catch(S){console.error("Username validation failed:",S.message)}},y=()=>{l(""),j(""),d(!1),m(""),v(""),h("userData"),h("revspireToken")},s=[{id:"username",label:"Username",type:"text",placeholder:"support@revspire.net",value:t,onChange:l}];i&&((n=a==null?void 0:a.user)==null?void 0:n.active)===1&&((b=a==null?void 0:a.organisation)==null?void 0:b.sso_only)===0&&s.push({id:"password",label:"Password",type:"password",placeholder:"••••••••",value:g,onChange:j});const r=[{LinkPath:"/forgot-password",LinkName:"Forgot Password?"},i&&{LinkPath:"#",LinkName:"Sign in as a different user",onClick:N=>{N.preventDefault(),y()}}].filter(Boolean);return e.jsx(A,{heading:"Sign-In",fields:s,handleSubmit:f,successMessage:c,errorMessage:x,links:r,onResetForm:y})};export{q as default};
