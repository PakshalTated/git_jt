import{r as n,a as x,b as f,t as p,l as k,j as e,ao as i}from"./index-b9OYvAdP.js";import"./module-C6tlsdyI.js";function R(){const[l,u]=n.useState(!0),{viewer_id:o,setIntegrationsConnection:d,integrationsConnection:g,baseURL:S}=n.useContext(x),m=f(),[w,s]=p(["canvaAccessToken"]),v=k();return n.useEffect(()=>{(async()=>{try{const a=new URLSearchParams(window.location.search),c=a.get("code"),r=a.get("canvaCodeVerifier");console.log({canvaCodeVerifier:r,viewer_id:o,code:c});const h=await v.post("/get-canva-access-token",{viewer_id:o,code:c,canvaCodeVerifier:r}),{data:t}=h;s("canvaAccessToken",t.tokenData.access_token,{path:"/",maxAge:t.tokenData.expires_in,secure:!0,SameSite:"Strict"}),s("canvaRefreshToken",t.tokenData.refresh_token,{path:"/",maxAge:2592e3,secure:!0,SameSite:"Strict"}),s("canvaUserID",t.userDetails.team_user.user_id,{path:"/",maxAge:2592e3,secure:!0,SameSite:"Strict"}),d({...g,canva:!0}),i.success("Canva authentication successful!")}catch(a){i.error("Something went wrong!!"),console.error(a)}finally{u(!1),m("/")}})()},[]),e.jsx("div",{className:"flex justify-center items-center h-screen",children:l?e.jsx("div",{className:`mini-logo ${active?"logoActive":""}`,children:e.jsx("div",{className:"app-container h-[500px] w-[900px]",children:e.jsx("div",{className:"loader-container h-full bg-cover w-full",children:e.jsx("img",{className:"logos h-full w-full bg-cover  bg-white p-2",src:logo,alt:"Logo"})})})}):e.jsx("div",{id:"pickedFiles"})})}export{R as default};
