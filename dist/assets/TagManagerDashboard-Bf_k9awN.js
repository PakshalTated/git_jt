import{u as ge,l as ye,r as o,a as se,j as e,H as _e,i as ce,e as G,U as ue,D as Nt,aB as Tt,V as nt,aC as tt,aD as wt,aE as Ct,aF as Me,b as St,c as Et,aG as Ft,aH as At,aI as Rt,I as Vt,K as Ut,J as It}from"./index-b9OYvAdP.js";import"./react-tooltip.min-_gtmIzAn.js";import{m as Ot,F as he,af as Pt,ag as qt,a4 as Lt,Y as Ht,ah as Dt}from"./index-9bYYq6UN.js";import{i as Bt,s as $t,k as Mt,o as zt,E as Gt,f as Wt,L as Xt,t as ze}from"./Dashboard-DSqmdOgz.js";import{Q as Jt,B as Ge}from"./ReactToastify-D-1G0H5q.js";import{T as st,J as it,M as Kt}from"./AnnotationLayer-CsQ9Me8w.js";import{c as Ae,L as Q}from"./index-DHI5Vo0j.js";import{$ as Qt}from"./module-C6tlsdyI.js";import{B as Yt}from"./Breadcrumbs-3Xb_fyMn.js";import"./index-DSB5HKeL.js";import"./RevSpire-logo-BbDjnAdX.js";function me(d,N){function F(w){return w.match(/\S+/g)}function S(w){let A=[],P=null,j=new Set,h=null;function O(){return w[0]==="("&&w[w.length-1]===")"}let x=[];for(let g=0;g<w.length;g++){const V=w[g];if(V.match(/^\d+$/)){const f=parseInt(V);if(f<1||f>N)return{status:"failure",message:`Number "${V}" is out of range (1 to ${N}) at token ${g}`};j.add(f),P="number"}else if(V==="(")A.push(V),x.push(null),P="parenthesis";else if(V===")"){if(A.length===0||A[A.length-1]!=="(")return{status:"failure",message:`Unmatched closing parenthesis at token ${g}`};A.pop(),x.pop(),P="parenthesis"}else if(V==="AND"||V==="OR"){if(h=V,P==="operator")return{status:"failure",message:`Consecutive operators at token ${g}`};const f=x[x.length-1];if(f&&f!==h)return{status:"failure",message:`Heterogeneous operations (AND/OR) must be enclosed in parentheses at token ${g}`};x[x.length-1]=h,P="operator"}else return{status:"failure",message:`Invalid token "${V}" at token ${g}`}}if(A.length!==0)return{status:"failure",message:"Unmatched opening parenthesis"};for(let g=1;g<=N;g++)if(!j.has(g))return{status:"failure",message:`Number "${g}" is missing from the expression`};return O()?{status:"success",message:"Valid expression"}:{status:"failure",message:"Expression must be enclosed in parentheses"}}const E=F(d);return!E||E.length===0?{status:"failure",message:"Invalid or empty expression"}:S(E)}const Zt=({addNewTag:d,setAddNewTag:N,cancelButtonHandlerPopup1:F})=>{const S=ge(),E=ye(),w=o.useRef(),[A,P]=o.useState(!1);o.useState(!1),o.useState("");const[j,h]=o.useState(!1),[O,x]=o.useState(""),[g,V]=o.useState(null),[f,y]=o.useState(!1),[b,T]=o.useState(!1),[q,I]=o.useState(!1),[B,Y]=o.useState(!1),[R,n]=o.useState(["string","textarea","url","picklist","reference","phone","email","id","address"]),[L,_]=o.useState(["Not Equals","Does Not Contain","Contains","Equals"]),[H,v]=o.useState(["int","double","percent","currency"]),[U,J]=o.useState(["Greater Than","Not Equals","Lesser Than Or Equals","Greter Than Or Equals","Lesser Than","Equals"]),[$,te]=o.useState(["datetime","date"]),[le,pe]=o.useState(["Greater Than","Not Equals","Lesser Than Or Equals","Greter Than Or Equals","Lesser Than","Equals"]),[re,Re]=o.useState(["boolean"]),[je,Ve]=o.useState(["Equals","Not Equals"]),[xe,We]=o.useState(["True","False"]),[p,W]=o.useState({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),[u,M]=o.useState({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),[D,ie]=o.useState({id:0,show:!1}),{baseURL:Ue,viewer_id:Z}=o.useContext(se),fe=()=>{N(t=>({...t,addTagPopUp3:!0}))},de=t=>{console.log("infield");const i=d.userFields.find(r=>r.processed_name===t);R.includes(i.type)||H.includes(i.type)||re.includes(i.type)?W(r=>({...r,fieldValue:i.id,fieldName:i.processed_name,fieldType:i.type,condition_type:"",condition_type_name:"",condition_value_type:d.valueTypes.find(C=>C.name==="Absolute").id,condition_value_type_name:"Absolute",relative_value:null,text_value:null,date_value:null,int_value:null})):W(r=>{var C;return{...r,fieldValue:i.id,fieldName:i.processed_name,fieldType:i.type,condition_type:"",condition_type_name:"",condition_value_type:(C=d.valueTypes.find(ae=>valueType.name==="Relative"))==null?void 0:C.id,condition_value_type_name:"Relative",relative_value:null,text_value:null,date_value:null,int_value:null}})},ke=t=>{console.log("infieleditd");const i=d.userFields.find(r=>r.processed_name===t);R.includes(i.type)||H.includes(i.type)||re.includes(i.type)?M(r=>({...r,fieldValue:i.id,fieldName:i.processed_name,fieldType:i.type,condition_type:"",condition_type_name:"",condition_value_type:d.valueTypes.find(C=>C.name=="Absolute").id,condition_value_type_name:"Absolute",text_value:null,date_value:null,int_value:null,relative_value:null})):M(r=>({...r,fieldValue:i.id,fieldName:i.processed_name,fieldType:i.type,condition_type:"",condition_type_name:"",condition_value_type:d.valueTypes.find(C=>C.name=="Relative").id,condition_value_type_name:"Relative",relative_value:null,text_value:null,date_value:null,int_value:null}))},Ie=t=>{const i=d.conditionTypes.find(r=>r.name.toLowerCase()==t.toLowerCase());W(r=>({...r,condition_type:i.id,condition_type_name:i.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},Oe=t=>{console.log("inedtcdn");const i=d.conditionTypes.find(r=>r.name===t);M(r=>({...r,condition_type:i.id,condition_type_name:i.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},m=t=>{console.log("valty");const i=d.valueTypes.find(r=>r.name===t);W(r=>({...r,condition_value_type:i.id,condition_value_type_name:i.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},X=t=>{console.log("inedtval");const i=d.valueTypes.find(r=>r.name===t);M(r=>({...r,condition_value_type:i.id,condition_value_type_name:i.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},z=t=>{if(console.log("invalhnl"),p.condition_value_type_name==="Relative"){const i=d.relativeTypes.find(r=>r.name===t);W(r=>({...r,relative_value:i==null?void 0:i.id,order:d.tagConditions.length+1}))}else R.includes(p.fieldType)?W(i=>({...i,relative_value:null,order:d.tagConditions.length+1,text_value:t})):H.includes(p.fieldType)?W(i=>({...i,relative_value:null,order:d.tagConditions.length+1,int_value:t})):W(i=>({...i,relative_value:null,order:d.tagConditions.length+1,date_value:t}))},Ne=t=>{if(console.log("edtvalhndlr"),u.condition_value_type_name==="Relative"){const i=d.relativeTypes.find(r=>r.name===t);M(r=>({...r,relative_value:i.id}))}else R.includes(u.fieldType)?M(i=>({...i,relative_value:null,text_value:t})):H.includes(u.fieldType)?M(i=>({...i,relative_value:null,int_value:t})):M(i=>({...i,relative_value:null,date_value:t}))},Te=()=>{console.log("edtcndhndlr");const t=[],i=d.tagConditions;for(let r=0;r<i.length;r++)i[r].order===u.order?t.push(u):t.push(i[r]);N(r=>({...r,tagConditions:t})),M({fieldId:"",fieldName:"",conditionId:"",conditionName:"",valueTypeName:"",valueTypeId:"",valueName:"",valueId:"",order:0,relative_value:"",text_value:"",date_value:"",int_value:""}),ie({order:0,show:!1})},Xe=t=>{console.log("fldnmhndlr");for(let i=0;i<d.userFields.length;i++)if(t===d.userFields[i].id)return d.userFields[i].processed_name},ee=t=>{console.log("conditionNameHandler");for(let i=0;i<d.conditionTypes.length;i++)if(t===d.conditionTypes[i].id)return d.conditionTypes[i].name},we=t=>(console.log("valueNameHandler "),t==null?"Empty":d.relativeTypes.find(r=>r.id===t).name),Ce=t=>{const r=d.tagConditions.filter(C=>C.order!==t).map((C,ae)=>({...C,order:ae+1}));N(C=>({...C,addTagPopUp3:!1,tagConditions:r}))},Je=t=>{console.log("editTagConditionHandler");const i=d.tagConditions.find(r=>r.order===t);M(i),ie({id:t,show:!0})},K=()=>{F(),N(t=>({...t,addTagPopUp2:!1,addTagPopUp3:!1,tagConditions:[]})),W({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),M({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),ie({id:0,show:!1})},Ke=async()=>{const t=d.tagConditions;let i;j?i={created_by:Z,name:d.name,description:d.description,salesforce_primary_object:d.primaryObjectId,dynamics_primary_table:null,advanced_tag_logic:O,tagConditions:t}:i={created_by:Z,name:d.name,description:d.description,salesforce_primary_object:d.primaryObjectId,dynamics_primary_table:null,advanced_tag_logic:O||d.advanceTagLogic,tagConditions:t};try{P(!0);const r=await E.post("/create-tag-and-conditions",i,{withCredentials:!0});Ge.success("Tag created successfully"),K(),F(),S(_e({viewer_id:Z,baseURL:Ue})),console.log(r.data)}catch(r){Ge.error("Failed to create tag"),console.log("error:",r)}finally{K(),F(),P(!1)}},Se=()=>{N(t=>({...t,addTagPopUp3:!1,tagConditions:[...d.tagConditions,p]})),W({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type:d.valueTypes.find(t=>t.name==="Relative").id,condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null})},Qe=()=>{N(t=>({...t,addTagPopUp3:!1})),W({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null})},ne=()=>{M({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),ie({order:0,show:!1}),console.log(p),console.log(u)};o.useEffect(()=>{const t=i=>{w.current&&!w.current.contains(i.target)&&(K(),F())};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),o.useEffect(()=>{console.log("tag condition here ",p),p.fieldType==="picklist"&&(p.condition_type_name==="Equals"||p.condition_type_name==="Not Equals")&&Ye(),p.fieldType==="reference"&&(p.condition_type_name==="Equals"||p.condition_type_name==="Not Equals")&&p.fieldValue&&!b&&Ee()},[p]),o.useEffect(()=>{T(!1)},[p.fieldValue,p.condition_type_name]);const Ye=async()=>{console.log("Before setIsLoading: ",f),y(!0),console.log("After setIsLoading (should be true): ",f);try{const t=await E.post("/getSalesforcePicklistValues",{viewerId:Z,salesforce_field_id:p.fieldValue},{withCredentials:!0});N(i=>({...i,picklistfield:t.data.picklistValues}))}catch{console.log("error for fetch picklist ")}finally{y(!1)}},Ee=async()=>{y(!0);try{const t=await E.post("/getSalesforceReferenceValues",{viewerId:Z,salesforce_field_id:p.fieldValue},{withCredentials:!0});N(i=>({...i,referencefield:t.data.ReferenceValue})),T(!0)}catch(t){console.error("Error fetching reference values",t)}finally{y(!1)}};o.useEffect(()=>{console.log("...")},[g]);const Pe=()=>{const t=d.tagConditions.length;let i="( ";for(let r=1;r<=t;r++)i+=`${r}`,r<t&&(i+=" AND ");return i+=" )",i},Fe=()=>me(O,d.tagConditions.length),Ze=async()=>{I(!0),Y(!0),console.log("Initial 1 ",O),x(Pe);const t=Fe();V(t),(t==null?void 0:t.status)==="success"?(console.log("Validation successful"),await Ke()):console.error("Validation failed",t),Y(!1),I(!1)};return o.useEffect(()=>{d.tagConditions.length>0?(h(!0),x(Pe())):x("")},[d.tagConditions]),o.useEffect(()=>{console.log("rerender"),console.log("tagConditionhere ,",p),console.log("edittagcondition value here",u),console.log("Add new tag here,",d)},[p,p.fieldName,u,u.fieldName,u.fieldType]),e.jsxs(e.Fragment,{children:[console.log("Add new tag here :",d),e.jsx(Jt,{}),e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-50"}),e.jsxs("div",{ref:w,className:"bg-white px-6 py-2 rounded-xl shadow-2xl max-w-2xl w-full min-h-[457px] max-h-[calc(100vh-2%)] relative overflow-scroll",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Create New Tag"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[55%] space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 border border-neutral-200 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("div",{className:"font-medium bg-white border text-sm border-gray-200 px-3 py-2 rounded-md text-gray-700",children:d.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Primary Object"}),e.jsx("div",{className:"font-medium bg-white border text-sm border-gray-200 px-3 py-2 rounded-md text-gray-700",children:d.primaryObjectName})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-4 items-center",children:[e.jsx("button",{onClick:()=>{h(!j),j&&V(null)},className:`px-2  h-[30px] shrink-0 flex justify-center items-center text-sm btn-secondary transition-colors border ${j?"w-[25%] text-red-600 py-3 bg-red-100 rounded-lg hover:bg-red-200 border-red-200":"w-full text-white py-2"}`,children:j?"Remove":"Add Tag Logic"}),j&&e.jsx("div",{className:"flex w-[75%] items-center gap-2",children:e.jsx("input",{type:"text",value:O,placeholder:"Enter the tag logic",className:"p-2 h-[30px] outline-none text-sm bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full",onChange:t=>{x(t.target.value)}})})]}),g?e.jsx("div",{className:`text-sm ml-2  ${g.status==="success"?"text-green-500":"text-red-500 tracking-tighter "}`,children:g.message}):e.jsx("div",{className:"text-sm ml-2 text-neutral-500 tracking-tight",children:"Example: ( ( 1 AND 2 ) OR ( 3 OR 4 ) )"})]}),e.jsx("button",{type:"button",onClick:fe,className:"px-2 py-2  h-[30px] shrink-0 flex justify-center items-center text-sm btn-secondary w-full text-white",children:"Add Criteria"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:d.tagConditions.map((t,i)=>e.jsx("div",{className:"w-full",children:D.show===!0&&D.id===t.order?null:e.jsxs("div",{className:"flex border bg-neutral-100 border-neutral-300 items-center rounded-md gap-3 pr-2 my-2 justify-between w-full",children:[e.jsxs("div",{className:"flex gap-3 relative overflow-hidden items-center",children:[e.jsx("div",{className:"text-neutral-700 absolute bg-neutral-200 border-r border-r-neutral-300 font-medium w-[25px] h-full text-sm flex justify-center items-center",children:t.order}),e.jsx("div",{className:"flex-1 ml-7 ",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[11ch] max-w-[11ch] py-1  tracking-tight",title:t.fieldName,children:t.fieldName})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[7ch] max-w-[7ch] py-1  tracking-tight",title:t.condition_type_name,children:t.condition_type_name})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[10ch] max-w-[10ch] py-1 pr-2 tracking-tight",title:t.condition_value_type_name==="Relative"?we(t.relative_value):t.text_value!==""?t.text_value:t.int_value!==""?t.int_value:t.date_value,children:t.condition_value_type_name==="Relative"?we(t.relative_value):t.text_value!==""?t.text_value:t.int_value!==""?t.int_value:t.date_value})})]}),e.jsxs("div",{className:"flex justify-center shrink-0 text-lg items-center",children:[e.jsx("button",{onClick:()=>{Je(t.order)},className:"text-neutral-700 mx-2 active:scale-95 transition-all",children:e.jsx(st,{})}),e.jsx("button",{onClick:()=>{Ce(t.order)},className:"text-red-600 active:scale-95 transition-all",children:e.jsx(it,{})})]})]},i)},i))})]}),e.jsx("div",{className:"w-full md:w-[50%]",children:d.addTagPopUp3||D.show?e.jsx("div",{className:`  ${d.addTagPopUp3||D.show?"":" rounded-lg p-2  border bg-neutral-50 border-neutral-200"}`,children:(d.addTagPopUp3||D.show)&&e.jsxs("div",{className:"w-full ",children:[d.addTagPopUp3&&e.jsx("div",{className:" mb-4",children:e.jsx("div",{className:"px-4 md:px-5 py-3 bg-neutral-50 relative border overflow-hidden rounded-lg",children:e.jsxs("form",{className:"space-y-2",onSubmit:t=>{t.preventDefault(),Se()},children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:" absolute left-2 top-2 border  rounded  flex justify-center  items-center gap-1 text-xs bg-cyan-50  text-cyan-700 font-semibold px-1 py-[2px]",children:[e.jsx(Ae,{className:" text-base"}),"   Add tag condition #",d.tagConditions.length+1]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 justify-between",children:[e.jsxs("div",{className:"mt-2 mb-1",children:[e.jsx("label",{className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Field"}),e.jsxs("select",{id:"field",required:!0,className:"inline-block  bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.fieldName||"N/A",onChange:t=>{de(t.target.value)},children:[e.jsx("option",{value:"",children:"Select Field "}),Array.isArray(d.userFields)&&d.userFields.map(t=>e.jsx("option",{value:t.processed_name,children:t.processed_name},t.id))]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{id:"condition",className:" w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Condition"}),e.jsxs("select",{required:!0,id:"condition",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full py-1 px-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.condition_type_name||"",onChange:t=>{Ie(t.target.value)},children:[e.jsx("option",{value:"",children:"Select Condition"}),!R.includes(p.fieldType)&&!H.includes(p.fieldType)&&!re.includes(p.fieldType)&&!$.includes(p.fieldType)&&d.conditionTypes.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id)),re.includes(p.fieldType)&&je.map(t=>e.jsx("option",{value:t,children:t},t)),R.includes(p.fieldType)&&L.map(t=>e.jsx("option",{value:t,children:t},t)),H.includes(p.fieldType)&&U.map(t=>e.jsx("option",{value:t,children:t},t)),$.includes(p.fieldType)&&le.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-1 w-full",children:[e.jsx("label",{id:"valueType",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value Type"}),e.jsx("select",{required:!0,id:"valueType",disabled:["Null","Not Null"].includes(p.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.condition_value_type_name||"",onChange:t=>{m(t.target.value)},children:$.includes(p.fieldType)?d.valueTypes.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id)):d.valueTypes.filter(t=>t.name!="Relative").map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))})]}),e.jsx("div",{className:"mb-1 w-full",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("label",{id:"value",className:" mr-4 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value"}),e.jsx("div",{})]}),p.condition_value_type_name==="Absolute"&&p.fieldType!=="boolean"&&p.fieldType!=="picklist"&&p.fieldType!=="reference"&&e.jsx("div",{className:"inline-block w-full",children:$.includes(p.fieldType)?e.jsx("input",{required:!0,id:"value",step:"any",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:p.fieldType==="datetime"?"datetime-local":"date",placeholder:"Enter a value",value:p.date_value,onChange:t=>{(p.fieldType==="date"||p.fieldType==="datetime")&&W(i=>({...i,date_value:t.target.value,order:d.tagConditions.length+1}))}}):R.includes(p.fieldType)?e.jsx("input",{id:"value",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",disabled:["Null","Not Null"].includes(p.condition_type_name),placeholder:"Enter a text value",value:p.text_value,onChange:t=>{z(t.target.value)}}):e.jsx("input",{id:"value",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"number",placeholder:"Enter a text  value",disabled:["Null","Not Null"].includes(p.condition_type_name),value:p.int_value,onChange:t=>{z(t.target.value)}})}),p.condition_value_type_name==="Absolute"&&p.fieldType=="boolean"&&e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.text_value,onChange:t=>{W(i=>({...i,text_value:t.target.value,order:d.tagConditions.length+1}))},children:[e.jsx("option",{value:"",children:"Select Value"}),xe.map((t,i)=>e.jsx("option",{value:t,children:t},i))]}),p.condition_value_type_name==="Relative"&&e.jsxs("select",{required:!0,disabled:["Null","Not Null"].includes(p.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.valueName,onChange:t=>{z(t.target.value)},children:[e.jsx("option",{value:"",children:"Select Value"}),d.relativeTypes.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),p.fieldType==="picklist"&&(p.condition_type_name==="Equals"||p.condition_type_name==="Not Equals")?f?e.jsx("div",{className:"loading-container",children:e.jsx("div",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg w-full  px-1 py-1 h-[30px] flex items-center justify-end",children:e.jsx(Q,{className:"animate-spin text-lg flex items-center justify-center"})})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.text_value,onChange:t=>{W(i=>({...i,text_value:t.target.value,order:d.tagConditions.length+1}))},children:[e.jsx("option",{value:"",children:"Select Value"}),Array.isArray(d.picklistfield)&&d.picklistfield.map(t=>e.jsx("option",{value:t.value,children:t.value},t.value))]}):p.fieldType==="picklist"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(p.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:p.text_value,onChange:t=>{z(t.target.value)}}),p.fieldType==="reference"&&(p.condition_type_name==="Equals"||p.condition_type_name==="Not Equals")?f?e.jsx("div",{className:"loading-container",children:e.jsx("div",{className:"bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg w-full  px-1 py-1 h-[30px] flex items-center justify-end",children:e.jsx(Q,{className:"animate-spin text-lg flex items-center justify-center"})})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:p.text_value,onChange:t=>{W(i=>({...i,text_value:t.target.value,order:d.tagConditions.length+1}))},disabled:f||d.referencefield.length===0,children:[e.jsx("option",{value:"",children:"Select Value "}),d.referencefield.map(t=>{const i=t.match(/\(([^)]+)\)/),r=i?i[1]:"";return e.jsx("option",{value:r,children:t},r)})]}):p.fieldType==="reference"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(p.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:p.text_value,onChange:t=>{z(t.target.value)}})]})})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-2 justify-center ",children:[e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors bg-red-100 text-red-600 hover:bg-red-200 hover:border-red-300 border-red-200",onClick:Qe,children:"Discard"}),e.jsx("button",{type:"submit",className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors ",onClick:()=>{},children:"Confirm"})]})]})})}),e.jsx("div",{className:`${d.tagConditions.length>3&&d.tagConditions.length<=7&&d.addTagPopUp3===!0?"h-[135px]  overflow-y-auto":"h-auto"}   w-full justify-center `,children:d.tagConditions.map((t,i)=>e.jsx("div",{className:"w-full",children:D.show===!0&&D.id===t.order?e.jsx("div",{className:"inline-block w-full",children:e.jsx("div",{className:"px-4 md:px-5 py-3 bg-neutral-50 relative border overflow-hidden rounded-lg",children:e.jsx("form",{className:"space-y-2",onSubmit:r=>{r.preventDefault()},children:e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"border-cyan-200 absolute left-1 top-1 border  rounded  flex justify-center items-center gap-1 text-xs bg-cyan-50  text-cyan-700 font-semibold px-1 py-[2px]",children:[e.jsx(Ae,{className:" text-base"}),"  Edit tag condition #",t.order]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 justify-between",children:[e.jsxs("div",{className:"mt-2 mb-1",children:[e.jsx("label",{className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Field"}),e.jsxs("select",{id:"field",className:"inline-block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full  px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.hasOwnProperty("id")?Xe(u.salesforce_field):u.fieldName||"",onChange:r=>{ke(r.target.value)},children:[e.jsx("option",{value:"select",children:"Select Field"}),d.userFields.map(r=>e.jsx("option",{value:r.processed_name,children:r.processed_name},r.id))]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{id:"condition",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Condition"}),e.jsxs("select",{id:"condition",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full py-1 px-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.hasOwnProperty("id")?ee(u.condition_type):u.condition_type_name||"",onChange:r=>{Oe(r.target.value)},children:[e.jsx("option",{value:"select",children:"Select Condition"}),!R.includes(u.fieldType)&&!H.includes(u.fieldType)&&!re.includes(u.fieldType)&&!$.includes(u.fieldType)&&d.conditionTypes.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id)),R.includes(u.fieldType)&&L.map(r=>e.jsx("option",{value:r,children:r},r)),re.includes(u.fieldType)&&je.map(r=>e.jsx("option",{value:r,children:r},r)),H.includes(u.fieldType)&&U.map(r=>e.jsx("option",{value:r,children:r},r)),$.includes(u.fieldType)&&le.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"w-full mb-1",children:[e.jsx("label",{id:"valueType",className:"w-full inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value Type"}),e.jsx("select",{id:"valueType",disabled:["Null","Not Null"].includes(u.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.condition_value_type_name||"",onChange:r=>{X(r.target.value)},children:$.includes(u.fieldType)?d.valueTypes.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id)):d.valueTypes.filter(r=>r.name!="Relative").map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{children:[e.jsx("label",{id:"value",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value"}),u.condition_value_type_name==="Absolute"&&u.fieldType!=="boolean"&&u.fieldType!=="picklist"&&u.fieldType!=="reference"&&e.jsx("div",{className:"inline-block w-full",children:$.includes(u.fieldType)?e.jsx("input",{required:!0,id:"value",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:u.fieldType==="datetime"?"datetime-local":"date",placeholder:"Enter a value",value:u.date_value,onChange:r=>{(u.fieldType==="date"||u.fieldType==="datetime")&&M(C=>({...C,date_value:r.target.value}))}}):R.includes(u.fieldType)?e.jsx("input",{id:"value",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",disabled:["Null","Not Null"].includes(u.condition_type_name),placeholder:"Enter a text value",value:u.text_value,onChange:r=>{Ne(r.target.value)}}):e.jsx("input",{id:"value",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"number",placeholder:"Enter a text value",value:u.int_value,onChange:r=>{Ne(r.target.value)}})}),u.condition_value_type_name==="Absolute"&&u.fieldType=="boolean"&&e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-6 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.text_value,onChange:r=>{M(C=>({...C,text_value:r.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),xe.map((r,C)=>e.jsx("option",{value:r,children:r},C))]}),u.condition_value_type_name=="Relative"&&e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",disabled:["Null","Not Null"].includes(u.condition_type_name),value:we(u.relative_value),onChange:r=>{Ne(r.target.value)},children:[e.jsx("option",{value:"value",children:"Select Value"}),d.relativeTypes.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]}),u.fieldType==="picklist"&&(u.condition_type_name==="Equals"||u.condition_type_name==="Not Equals")?e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-5 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.text_value,onChange:r=>{M(C=>({...C,text_value:r.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),Array.isArray(d.picklistfield)&&d.picklistfield.map(r=>e.jsx("option",{value:r.value,children:r.value},r.value))]}):u.fieldType==="picklist"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(u.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:u.text_value,onChange:r=>z(r.target.value)}),u.fieldType==="reference"&&(u.condition_type_name==="Equals"||u.condition_type_name==="Not Equals")?e.jsx(e.Fragment,{children:e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-5 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:u.text_value,onChange:r=>{M(C=>({...C,text_value:r.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),d.referencefield.map(r=>{const C=r.match(/\(([^)]+)\)/),ae=C?C[1]:"";return e.jsx("option",{value:ae,children:r},ae)})]})}):u.fieldType==="reference"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(u.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:u.text_value,onChange:r=>z(r.target.value)})]}),e.jsxs("div",{className:"flex space-x-2 mt-2 justify-center ",children:[e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors bg-red-100 text-red-600 hover:bg-red-200 hover:border-red-300 border-red-200",onClick:()=>{ne()},children:"Discard"}),e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors ",onClick:Te,children:"Confirm"})]})]})]})]})})})}):null},i))})]})}):e.jsx("div",{className:"bg-gray-100 border-2 mb-4 border-dashed border-gray-300 rounded-lg p-8 flex items-center justify-center md:h-[342px]",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Select Add Criteria or Edit an existing criteria to see options here."})})})]}),e.jsxs("div",{className:"flex justify-between  pt-2 border-t border-gray-200",children:[e.jsx("button",{className:"px-6 py-2 text-sm font-medium text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors",onClick:K,children:"Cancel"}),e.jsx("button",{type:"submit",className:`px-6 py-2 w-[101px] h-[38px] flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors ${q||B?"opacity-70 cursor-not-allowed":""}`,onClick:t=>{t.preventDefault(),Ze()},children:B?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Q,{className:"animate-spin text-lg"})}):"Submit"})]})]})]})]})},ea=()=>{const[d,N]=o.useState({crmConnections:!1,salesforceObjects:!1,proceedButton:!1}),F=ye(),S=o.useRef(),{baseURL:E,viewer_id:w,rawCookie:A,setRawCookie:P}=o.useContext(se),[j,h]=o.useState({name:"",description:"",addTagPopUp1:!1,addTagPopUp2:!1,addTagPopUp3:!1,addTagPopUp4:!1,crmConnections:[],crmConnection:"",crmConnectionId:"",connectionName:"",salesForceObjects:[],primaryObjectId:"",primaryObjectName:"",fieldDate:"",conditionTypes:[],conditionType:"",conditionTypeId:"",valueTypes:[],valueType:"Relative",relativeTypes:[],relativeType:"",absoluteType:"",advanceTagLogic:"",users:[],userFields:[],userField:"",tagConditions:[],order:"",fieldType:"",fieldId:"",value:"",conditionValueTypeId:"",selectedTag:{},editTagCondition:!1,editTagConditionId:"",picklistfield:[],picklistValue:"",referencefield:[],referenceValue:""}),O=()=>{x(),q(),I(),h(v=>({...v,addTagPopUp1:!0}))},x=async()=>{N({...d,crmConnections:!0});try{const v=await F.post("/view-crm-connections",{viewer_id:w});h(U=>({...U,crmConnections:v.data.connections}))}catch{ce.error("Failed to fetch CRM connections")}finally{N({...d,crmConnections:!1})}},[g,V]=o.useState(null),[f,y]=o.useState(""),[b,T]=o.useState("");o.useEffect(()=>{A&&A.organisation.id&&y(A.organisation.id)},[A]),o.useEffect(()=>{f&&q()},[f]),o.useEffect(()=>{b&&I()},[b]),o.useEffect(()=>{g&&g.length>0&&T(g[0].id)},[g]);const q=async()=>{N(!0);try{const v=await F.post("/get-service-user",{organisation:f,viewer_id:w});V(v.data),v.data==="CRM connection not found"||v.data}catch(v){console.error("Error fetching service user:",v)}finally{N(!1)}},I=async v=>{N({...d,salesforceObjects:!0});try{const U=await F.post("/view-salesforce-objects",{viewer_id:w,crm_connection:b});h(J=>({...J,salesForceObjects:U.data.salesforceObjects}))}catch{}finally{N({...d,salesforceObjects:!1})}},B=v=>{const U=v.target.value,J=j.salesForceObjects.find($=>$.id===U);h($=>({...$,primaryObjectId:U,primaryObjectName:J.name}))},Y=async()=>{if(!j.primaryObjectId){ce.error("Primary Object ID is not valid.");return}try{N({...d,proceedButton:!0});const v=await F.post("/view-fieldsplusreffields",{viewer_id:w,salesforce_object:j.primaryObjectId}),U=await F.post("/retrieve-condition-types",{viewer_id:w}),J=await F.post("/retrieve-condition-value-types",{viewer_id:w}),$=await F.post("/retrieve-relative-values",{viewer_id:w});h(te=>({...te,conditionTypes:U.data.data,valueTypes:J.data.data,relativeTypes:$.data.data,userFields:v.data.data,addTagPopUp1:!1,addTagPopUp2:!0}))}catch{ce.error("Please try again!")}finally{N({...d,proceedButton:!1})}},R=v=>{h(U=>({...U,addTagPopUp1:!1,addTagPopUp2:!1,name:"",description:"",crmConnectionId:"",salesForceObjects:[],primaryObjectId:"",primaryObjectName:""})),N({...d,proceedButton:!1})},[n,L]=o.useState(!1),_=()=>j.name!==""&&j.description!==""&&j.primaryObjectId!=="",H=()=>{_()?Y():L(!0)};return o.useEffect(()=>{const v=U=>{S.current&&!S.current.contains(U.target)&&R()};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),e.jsxs("div",{className:"absolute",children:[e.jsxs(Bt,{className:"btn-secondary  flex items-center gap-1  mt-2  text-white  mr-6 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 ",onClick:O,children:[e.jsx(Kt,{className:"text-lg"}),"Add"]}),j.addTagPopUp1&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-50"}),e.jsx("div",{ref:S,className:"bg-white p-8 rounded-lg shadow-xl max-w-lg  w-full relative",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-semibold text-center text-neutral-800",children:"Create New Tag"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs gap-2 mb-3 flex items-center border border-cyan-100 px-2 py-1 rounded-md bg-cyan-50 text-cyan-800  w-fit",children:[e.jsx("span",{children:"Service User ID :"}),g?e.jsx("div",{className:" font-semibold",children:g[0].name}):e.jsx("div",{children:e.jsx(Q,{className:"text-base animate-spin"})})]}),e.jsxs("form",{onSubmit:v=>{v.preventDefault(),H()},children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-neutral-800 dark:text-white",children:"Tag Name"}),e.jsx("input",{value:j.name,onChange:v=>{h(U=>({...U,name:v.target.value}))},type:"text",className:"p-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full"}),n&&j.name===""&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ",children:"Please enter tag name"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-neutral-800 dark:text-white",children:"Description"}),e.jsx("input",{value:j.description,onChange:v=>{h(U=>({...U,description:v.target.value}))},type:"text",className:"p-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full"}),n&&j.description===""&&e.jsx("p",{className:"text-red-500  text-xs mt-1",children:"Please enter Description."})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1 mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Primary Object"}),d.salesforceObjects?e.jsx("div",{className:"border border-neutral-200 rounded-lg p-2 bg-neutral-100 text-sm h-[42px] flex items-center  font-medium text-neutral-700 justify-center gap-2",children:e.jsx(Q,{className:"text-base animate-spin"})}):e.jsxs("select",{className:"p-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full h-[42px]",value:j.primaryObjectId,onChange:v=>{B(v)},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Object"}),j.salesForceObjects&&j.salesForceObjects.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),n&&j.primaryObjectId===""&&e.jsx("p",{className:"text-red-600  text-xs ",children:"Please select primary Object."})]}),e.jsxs("div",{className:"flex justify-between mt-10",children:[e.jsx("button",{type:"button",className:"px-6 py-2 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:R,children:"Cancel"}),e.jsx("button",{type:"submit",className:`px-6 py-2 w-[101px] h-[38px] flex justify-center items-center text-sm btn-secondary text-white ${_()?"":"opacity-70 cursor-not-allowed"} rounded-lg transition-colors`,disabled:!_(),children:d.proceedButton?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Q,{className:"animate-spin text-lg"})}):"Proceed"})]})]})]})]})})]}),j.addTagPopUp2&&e.jsx(Zt,{cancelButtonHandlerPopup1:R,addNewTag:j,setAddNewTag:h})]})},at=({tagToEdit:d,setTagToEdit:N})=>{const[F,S]=o.useState({crmConnections:!1,salesforceObjects:!1,proceedButton:!1}),E=window.location.href,{rawCookie:w,setRawCookie:A}=o.useContext(se),[P,j]=o.useState(!1),[h,O]=o.useState({name:"",description:""}),[x,g]=o.useState(""),[V,f]=o.useState(null),[y,b]=o.useState(!1),[T,q]=o.useState(!1),[I,B]=o.useState(!1);o.useState(!1);const[Y,R]=o.useState(!1),[n,L]=o.useState({name:"",description:"",addTagPopUp1:!1,addTagPopUp2:!1,addTagPopUp3:!1,addTagPopUp4:!1,crmConnections:[],crmConnection:"",crmConnectionId:"",connectionName:"",salesForceObjects:[],primaryObjectId:"",primaryObjectName:"",fieldDate:"",conditionTypes:[],conditionType:"",conditionTypeId:"",valueTypes:[],valueType:"Relative",relativeTypes:[],relativeType:"",absoluteType:"",advanceTagLogic:"",users:[],userFields:[],userField:"",tagConditions:[],order:"",fieldType:"",fieldId:"",value:"",conditionValueTypeId:"",selectedTag:{},editTagCondition:!1,editTagConditionId:"",picklistfield:[],referencefield:[]});console.log("Add logic "+n.advanceTagLogic+" ",typeof n.advanceTagLogic),console.log("taglogic1 "+x+" ",typeof n.advanceTagLogic);const[_,H]=o.useState(0);o.useEffect(()=>{O({...n})},[n]),o.useEffect(()=>{H(_+1),n.tagConditions.length?(ke(!0),_>1&&g(et())):g("")},[n.tagConditions]);const v=async()=>{try{b(!0),await U(),await Re(),L(c=>({...c,addTagPopUp1:!0})),Z(!0);const a=d||fe[0].id,l=await D.get(`/retrieve-tag-and-conditions/${a}?viewer_id=${u}`,{withCredentials:!0});if(l){const[c,s,k,oe]=await Promise.all([D.post("/view-fieldsplusreffields",{viewer_id:u,salesforce_object:l.data.tag.salesforce_primary_object},{withCredentials:!0})]),Be=l.data.tagConditions.map($e=>$e.salesforce_field);L($e=>({...$e,addTagPopUp1:!0,addTagPopUp2:!1,addTagPopUp4:!0,primaryObjectId:l.data.tag.salesforce_primary_object,primaryObjectName:l.data.tag.salesforce_primary_object_api_name,name:l.data.tag.name,description:l.data.tag.description,advanceTagLogic:l.data.tag.advanced_tag_logic,picklistValues:Be})),console.log(l),console.log(l.data.tag.advanced_tag_logic)}}catch(a){ce.error("Please try again!"),console.error(a.message)}finally{Z(!1),b(!1)}},U=async()=>{S({...F,crmConnections:!0});try{const a=await D.post("/view-crm-connections",{viewer_id:u},{withCredentials:!0});L(l=>({...l,crmConnections:a.data.connections}))}catch{ce.error("Failed to fetch CRM connections")}finally{S({...F,crmConnections:!1})}},[J,$]=o.useState(null),[te,le]=o.useState(""),[pe,re]=o.useState("");o.useEffect(()=>{w&&w.organisation.id&&le(w.organisation.id)},[w]),o.useEffect(()=>{te&&Re()},[te]),o.useEffect(()=>{pe&&(console.log("hi i am in useeffect"),je())},[pe]),o.useEffect(()=>{J&&J.length>0&&re(J[0].id)},[J]);const Re=async()=>{S(!0);try{const a=await D.post("/get-service-user",{organisation:te,viewer_id:u},{withCredentials:!0});$(a.data),a.data==="CRM connection not found"||a.data}catch(a){console.error("Error fetching service user:",a)}finally{S(!1)}},je=async a=>{S({...F,salesforceObjects:!0});try{const l=await D.post("/view-salesforce-objects",{viewer_id:u,crm_connection:pe},{withCredentials:!0});L(c=>({...c,salesForceObjects:l.data.salesforceObjects}))}catch{}finally{S({...F,salesforceObjects:!1})}},Ve=a=>{L(l=>({...l,addTagPopUp1:!1,addTagPopUp2:!1,addTagPopUp3:!1,name:"",description:"",crmConnectionId:"",salesForceObjects:[],primaryObjectId:"",primaryObjectName:""})),N(null)},[xe,We]=o.useState(!1),p=()=>!(n.name===""||n.description===""||n.crmConnectionId===""||n.primaryObjectId===""),W=()=>{p()&&S({...F,proceedButton:!0})},{viewer_id:u,baseURL:M}=o.useContext(se),D=ye(),ie=ge(),[Ue,Z]=o.useState(!1),fe=G(a=>a.tags.selectedTags),[de,ke]=o.useState(!1);o.useEffect(()=>{d&&v()},[d,N]),o.useEffect(()=>{!x&&n.advanceTagLogic&&(console.log("tagLogic1 doesn't exist"),g(n.advanceTagLogic))},[x,n.advanceTagLogic]);const Ie=a=>{console.log(a),(a==null?void 0:a.trim().charAt(0))!=="("&&(a="( "+(a==null?void 0:a.trim())),a.trim().charAt(a.trim().length-1)!==")"&&(a=a.trim()+" )"),console.log(a);const l=a.trim().replace(/\s+/g," ");return console.log(l),l},Oe=async()=>{B(!0);const a=n.tagConditions,l=n.advanceTagLogic||et();Ie(l);const c=[];for(let k=0;k<a.length;k++)console.log(m.length),a[k].hasOwnProperty("id")?c.push({...a[k],fieldValue:a[k].salesforce_field}):c.push(a[k]);console.log(l);const s={tagId:fe[0].id,updated_by:u,name:n.name,description:n.description,advanced_tag_logic:x||n.advanceTagLogic,conditions:c};console.log(s);try{const k=await D.post("/edit-tag-and-conditions",s,{withCredentials:!0});console.log(k.data),k.data.success&&(ie(_e({viewer_id:u,baseURL:M})),ie(ue()),_t(),ce.success("Tag Updated Successfully !!")),console.log(s)}catch(k){console.error(k),console.log(k.message)}finally{B(!1),f(null)}},[m,X]=o.useState({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),[z,Ne]=o.useState(["string","textarea","url","picklist","reference","phone","email","id","address"]),[Te,Xe]=o.useState(["Not Equals","Does Not Contain","Contains","Equals"]),[ee,we]=o.useState(["int","double","percent","currency"]),[Ce,Je]=o.useState(["Greater Than","Not Equals","Lesser Than Or Equals","Greter Than Or Equals","Lesser Than","Equals"]),[K,Ke]=o.useState(["datetime","date"]),[Se,Qe]=o.useState(["Greater Than","Not Equals","Lesser Than Or Equals","Greter Than Or Equals","Lesser Than","Equals"]),[ne,Ye]=o.useState(["boolean"]),[Ee,Pe]=o.useState(["Equals","Not Equals"]),[Fe,Ze]=o.useState(["True","False"]),[t,i]=o.useState({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),[r,C]=o.useState({id:0,show:!1});if(Ue)return e.jsx("div",{children:e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsx("div",{className:"bg-transparent p-6 rounded-md z-50 w-auto",children:e.jsx(Qt,{visible:!0,height:"40",width:"40",color:"#075985",ariaLabel:"grid-loading",radius:"12.5",wrapperStyle:{},wrapperClass:"grid-wrapper"})})]})});const ae=a=>{if(n&&n.userFields&&Array.isArray(n.userFields)){const l=n.userFields.find(c=>c.id===a);if(l)return l.processed_name}return"Field not found"},qe=a=>{for(let l=0;l<n.conditionTypes.length;l++)if(a===n.conditionTypes[l].id)return n.conditionTypes[l].name},Le=a=>a==null?"Empty":n.relativeTypes.find(c=>c.id===a).name,dt=()=>{L(a=>({...a,addTagPopUp3:!0}))},ot=a=>{const l=n.userFields.find(c=>c.processed_name===a);z.includes(l.type)||ee.includes(l.type)||ne.includes(l.type)?X(c=>({...c,fieldValue:l.id,fieldName:l.processed_name,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name==="Absolute").id,condition_value_type_name:"Absolute",relative_value:null,text_value:null,date_value:null,int_value:null})):X(c=>({...c,fieldValue:l.id,fieldName:l.processed_name,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name==="Relative").id,condition_value_type_name:"Relative",relative_value:null,text_value:null,date_value:null,int_value:null}))},ct=a=>{console.log(a);const l=n.userFields.find(c=>c.processed_name===a);console.log("field",l),z.includes(l==null?void 0:l.type)||ee.includes(l==null?void 0:l.type)||ne.includes(l.type)?t.hasOwnProperty("id")?i(c=>({...c,salesforce_field:l.id,fieldValue:l.id,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name=="Absolute").id,condition_value_type_name:"Absolute",relative_value:null,text_value:null,int_value:null,date_value:null})):i(c=>({...c,fieldValue:l.id,fieldName:l.processed_name,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name=="Absolute").id,condition_value_type_name:"Absolute",text_value:null,date_value:null,int_value:null,relative_value:null})):t.hasOwnProperty("id")?i(c=>({...c,salesforce_field:l.id,fieldValue:l.id,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name=="Relative").id,condition_value_type_name:"Relative",relative_value:null,text_value:null,date_value:null,int_value:null})):i(c=>({...c,fieldValue:l.id,fieldName:l.processed_name,fieldType:l.type,condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(s=>s.name=="Relative").id,condition_value_type_name:"Relative",relative_value:null,text_value:null,date_value:null,int_value:null}))},ut=a=>{const l=n.conditionTypes.find(c=>c.name===a);X(c=>({...c,condition_type:l.id,condition_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},pt=a=>{const l=n.conditionTypes.find(c=>c.name===a);t.hasOwnProperty("id")?i(c=>({...c,condition_type:l.id,condition_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null})):i(c=>({...c,condition_type:l.id,condition_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},mt=a=>{const l=n.valueTypes.find(c=>c.name===a);X(c=>({...c,condition_value_type:l.id,condition_value_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},gt=a=>{const l=n.valueTypes.find(c=>c.name===a);t.hasOwnProperty("id")?i(c=>({...c,condition_value_type:l.id,condition_value_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null})):i(c=>({...c,condition_value_type:l.id,condition_value_type_name:l.name,relative_value:null,text_value:null,date_value:null,int_value:null}))},be=a=>{if(m.condition_value_type_name==="Relative"){const l=n.relativeTypes.find(c=>c.name===a);X(c=>({...c,relative_value:l==null?void 0:l.id,order:n.tagConditions.length+1}))}else z.includes(m.fieldType)?X(l=>({...l,relative_value:null,order:n.tagConditions.length+1,text_value:a})):ee.includes(m.fieldType)?X(l=>({...l,relative_value:null,order:n.tagConditions.length+1,int_value:a})):X(l=>({...l,relative_value:null,order:n.tagConditions.length+1,date_value:a}))},ve=a=>{if(t.condition_value_type_name==="Relative"){const l=n.relativeTypes.find(c=>c.name===a);i(c=>({...c,relative_value:l.id}))}else z.includes(t.fieldType)?i(l=>({...l,relative_value:null,text_value:a})):ee.includes(t.fieldType)?i(l=>({...l,relative_value:null,int_value:a})):i(l=>({...l,relative_value:null,date_value:a}))},yt=a=>{const c=n.tagConditions.filter(s=>s.order!==a).map((s,k)=>({...s,order:k+1}));L(s=>({...s,tagConditions:c}))},xt=()=>{L(a=>({...a,addTagPopUp3:!1})),X({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null})},ft=()=>{i({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),C({order:0,show:!1})},bt=()=>{L(a=>({...a,addTagPopUp3:!1,tagConditions:[...n.tagConditions,m]})),X({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type:n.valueTypes.find(a=>a.name==="Relative").id,condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null})},vt=async a=>{console.log(t.salesforce_field),console.log("Edit button clicked",a);const l=n.tagConditions.find(c=>c.order===a);if(l.hasOwnProperty("id")){i({...l,fieldType:n.userFields.find(k=>k.id===l.salesforce_field).type,condition_value_type_name:n.valueTypes.find(k=>k.id===l.condition_value_type).name,condition_type_name:n.conditionTypes.find(k=>k.id===l.condition_type).name});const c=n.userFields.find(k=>k.id===l.salesforce_field).id,s=n.userFields.find(k=>k.id===l.salesforce_field).type;s==="picklist"&&await He(c),s==="reference"&&await De(c)}else i({...l,condition_value_type_name:n.valueTypes.find(c=>c.id===l.condition_value_type).name});C({id:a,show:!0})},ht=()=>{const a=[],l=n.tagConditions;for(let c=0;c<l.length;c++)l[c].order===t.order?a.push(t):a.push(l[c]);L(c=>({...c,tagConditions:a})),console.log("edit tag condtiopn",m),i({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),C({order:0,show:!1})},_t=()=>{L(a=>({...a,addTagPopUp2:!1,addTagPopUp3:!1})),X({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),i({fieldValue:"",fieldName:"",fieldType:"",condition_type:"",condition_type_name:"",condition_value_type_name:"Relative",order:0,relative_value:null,text_value:null,date_value:null,int_value:null}),C({id:0,show:!1})},He=async a=>{j(!0);try{const l=await D.post("/getSalesforcePicklistValues",{viewerId:u,salesforce_field_id:a,originURL:E},{withCredentials:!0});L(c=>({...c,picklistfield:l.data.picklistValues})),j(!1)}catch{console.log("error for fetch picklist "),S(!1)}},De=async a=>{j(!0);try{const l=await D.post("/getSalesforceReferenceValues",{viewerId:u,salesforce_field_id:a,originURL:E},{withCredentials:!0});L(c=>({...c,referencefield:l.data.ReferenceValue})),j(!1)}catch{console.log("error for fetch picklist "),S(!1)}},jt=async()=>{Z(!0);const a=d||fe[0].id;try{const l=await D.get(`/retrieve-tag-and-conditions/${a}?viewer_id=${u}`,{withCredentials:!0});if(l)try{const c=await D.post("/view-fieldsplusreffields",{viewer_id:u,salesforce_object:l.data.tag.salesforce_primary_object},{withCredentials:!0}),s=await D.post("/retrieve-condition-types",{viewer_id:u},{withCredentials:!0}),k=await D.post("/retrieve-condition-value-types",{viewer_id:u},{withCredentials:!0}),oe=await D.post("/retrieve-relative-values",{viewer_id:u},{withCredentials:!0});L(Be=>({...Be,addTagPopUp1:!1,addTagPopUp2:!0,addTagPopUp4:!0,primaryObjectId:l.data.tag.salesforce_primary_object,primaryObjectName:l.data.tag.salesforce_primary_object_api_name,name:h.name,description:h.description,crmConnection:l.data.crmConnectionDetails,tagConditions:l.data.tagConditions,conditionTypes:s.data.data,valueTypes:k.data.data,relativeTypes:oe.data.data,userFields:c.data.data}))}catch(c){ce.error("Please try again!"),console.log(c.message)}}catch(l){console.log(l.message)}finally{Z(!1)}},et=()=>{const a=n.tagConditions.length;let l="( ";for(let c=1;c<=a;c++)l+=`${c}`,c<a&&(l+=" AND ");return l+=" )",l};console.log("Length :",n.tagConditions.length);const kt=async()=>{if(q(!0),B(!0),R(!0),!x&&n.advanceTagLogic){console.log("Setting tagLogic1 to:",n.advanceTagLogic),g(n.advanceTagLogic);const a=me(n.advanceTagLogic,n.tagConditions.length);if(console.log("Validation result with addNewTag:",a),f(a),(a==null?void 0:a.status)==="error"){console.log("Validation failed",a),B(!1),q(!1);return}}else{const a=me(x,n.tagConditions.length);if(console.log("Validation with tagLogic1:",a),f(a),(a==null?void 0:a.status)==="failure"){console.error("Validation failed",a),B(!1),q(!1);return}}try{const a=me(x||n.advanceTagLogic,n.tagConditions.length);f(a),a.status==="success"&&(f(a),await Oe())}catch(a){console.error("Form submission failed",a)}B(!1),q(!1),R(!1)};return e.jsxs("div",{className:"",children:[console.log("tagConditionhere ,",m),console.log("edittagcondition value here",t),console.log("Add new tag here,",n),e.jsxs("div",{children:[n.addTagPopUp2&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-50"}),e.jsxs("div",{className:"bg-white px-6 py-2 rounded-xl shadow-2xl max-w-2xl w-full min-h-[457px] max-h-[calc(100vh-2%)] relative overflow-scroll",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Edit Tag"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[50%] space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 border border-neutral-200 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("div",{className:"font-medium bg-white border text-sm border-gray-200 px-3 py-2 rounded-md text-gray-700",children:h.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Primary Object"}),e.jsx("div",{className:"font-medium bg-white border text-sm border-gray-200 px-3 py-2 rounded-md text-gray-700",children:n.primaryObjectName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Connection"}),e.jsx("div",{className:"font-medium bg-white border text-sm border-gray-200 px-3 py-2 rounded-md text-gray-700",children:n.connectionName.split(" ")[0]+" "+n.crmConnection[0].crm+" Connection"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-4 items-center",children:[e.jsx("button",{onClick:()=>{if(ke(!de),de){const a=me(L.advanceTagLogic,n.tagConditions.length);console.log("heloooo...................from here"),f(a)}else{g(x||n.advanceTagLogic);const a=me(x,n.tagConditions.length);f(a)}},className:`px-2 h-[30px] shrink-0 flex justify-center items-center text-sm btn-secondary transition-colors border ${de?"w-[20%] text-red-600 py-2 bg-red-100 rounded-lg hover:bg-red-200 border-red-200":"w-[20%] text-white py-1"}`,children:de?"Remove":"Edit"}),de?e.jsx("div",{className:"flex w-[75%] items-center gap-2",children:e.jsx("input",{type:"text",value:x,className:"p-2 h-[30px] outline-none text-sm bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full",onChange:a=>g(a.target.value)})}):e.jsx("input",{type:"text",value:x||(n==null?void 0:n.advanceTagLogic)||"Enter logic here",disabled:!0,className:"p-2 h-[30px] w-full outline-none text-sm bg-neutral-200 border border-neutral-300 rounded-lg text-neutral-800"})]}),Y&&V?e.jsx("div",{className:`text-sm ml-2 ${V.status==="success"?"text-green-500":"text-red-500 tracking-tighter"}`,children:V.message}):e.jsx("div",{className:"text-sm ml-2 text-neutral-500 tracking-tight",children:"Example: ( ( 1 AND 2 ) OR ( 3 OR 4 ) )"})]}),e.jsx("button",{type:"button",onClick:dt,className:"px-2 py-2  h-[30px] shrink-0 flex justify-center items-center text-sm btn-secondary w-full text-white",children:"Add Criteria"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:n.tagConditions.map((a,l)=>e.jsx("div",{className:"w-full",children:r.show===!0&&r.id==a.order?null:e.jsxs("div",{className:"flex border bg-neutral-100  border-neutral-300 items-center rounded-md gap-3 pr-2 my-2  justify-between w-full",children:[e.jsxs("div",{className:"flex gap-1 relative overflow-hidden items-center",children:[e.jsx("div",{className:"text-neutral-700 absolute bg-neutral-200 border-r border-r-neutral-300  font-medium w-[25px] h-full text-sm  flex justify-center items-center",children:a.order}),e.jsx("div",{className:"flex-1 ml-7",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[11ch] max-w-[11ch] py-1  tracking-tight",title:a.hasOwnProperty("id")?ae(a.salesforce_field):a.fieldName,children:a.hasOwnProperty("id")?ae(a.salesforce_field):a.fieldName})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[7ch] max-w-[7ch] py-1  tracking-tight",title:a.hasOwnProperty("id")?qe(a.condition_type):a.condition_type_name,children:a.hasOwnProperty("id")?qe(a.condition_type):a.condition_type_name})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-neutral-700 truncate min-w-[10ch] max-w-[10ch] py-1 pr-2 tracking-tight",title:a.condition_value_type_name==="Relative"?Le(a.relative_value):a.text_value!=null?a.text_value:a.int_value!=null?a.int_value:a.date_value,children:a.condition_value_type_name==="Relative"?Le(a.relative_value):a.text_value!=null?a.text_value:a.int_value!=null?a.int_value:a.date_value})})]}),e.jsxs("div",{className:"flex justify-center shrink-0  text-lg items-center",children:[e.jsx("button",{onClick:()=>{vt(a.order)},className:"text-neutral-700 mx-1 active:scale-95 transition-all",children:e.jsx(st,{})}),e.jsx("button",{onClick:()=>{yt(a.order)},className:"text-red-600 active:scale-95 transition-all",children:e.jsx(it,{})})]})]},l)},l))})]}),e.jsx("div",{className:"w-full md:w-[50%]",children:n.addTagPopUp3||r.show?e.jsx("div",{className:`  ${n.addTagPopUp3||r.show?"":" rounded-lg p-2  border bg-neutral-50 border-neutral-200"}`,children:(n.addTagPopUp3||r.show)&&e.jsxs("div",{className:"w-full ",children:[n.addTagPopUp3&&e.jsx("div",{className:" mb-4",children:e.jsx("div",{className:"px-4 md:px-5 py-3 bg-neutral-50 relative border overflow-hidden rounded-lg",children:e.jsxs("form",{className:"space-y-2",onSubmit:a=>{a.preventDefault(),bt()},children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:" absolute left-2 top-2 border  rounded  flex justify-center  items-center gap-1 text-xs bg-cyan-50  text-cyan-700 font-semibold px-1 py-[2px]",children:[e.jsx(Ae,{className:" text-base"})," Add tag condition #",n.tagConditions.length+1]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 justify-between",children:[e.jsxs("div",{className:"mt-2 mb-1",children:[e.jsx("label",{className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Field"}),e.jsxs("select",{id:"field",required:!0,className:"inline-block  bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.fieldName||"",onChange:a=>{ot(a.target.value)},onClick:()=>{m.fieldType=="picklist"&&He(m.fieldValue),m.fieldType=="reference"&&De(m.fieldValue)},children:[e.jsx("option",{value:"",children:"Select Field"}),Array.isArray(n.userFields)&&n.userFields.map(a=>e.jsx("option",{value:a.processed_name,children:a.processed_name},a.id))]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{id:"condition",className:" w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Condition"}),e.jsxs("select",{required:!0,id:"condition",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full py-1 px-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.condition_type_name,onChange:a=>{ut(a.target.value)},children:[e.jsx("option",{value:"",children:"Select Condition"}),!z.includes(m.fieldType)&&!ee.includes(m.fieldType)&&!ne.includes(m.fieldType)&&!K.includes(m.fieldType)&&n.conditionTypes.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id)),ne.includes(m.fieldType)&&Ee.map(a=>e.jsx("option",{value:a,children:a},a)),z.includes(m.fieldType)&&Te.map(a=>e.jsx("option",{value:a,children:a},a)),ee.includes(m.fieldType)&&Ce.map(a=>e.jsx("option",{value:a,children:a},a)),K.includes(m.fieldType)&&Se.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"mb-1 w-full",children:[e.jsx("label",{id:"valueType",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value Type"}),e.jsx("select",{required:!0,id:"valueType",disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.condition_value_type_name,onChange:a=>{mt(a.target.value)},children:K.includes(m.fieldType)?n.valueTypes.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id)):n.valueTypes.filter(a=>a.name!="Relative").map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))})]}),e.jsx("div",{className:"mb-1 w-full",children:e.jsxs("div",{children:[e.jsx("label",{id:"value",className:" w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value"}),m.condition_value_type_name==="Absolute"&&m.fieldType!="boolean"&&m.fieldType!=="picklist"&&m.fieldType!=="reference"&&e.jsx("div",{className:"inline-block w-full",children:K.includes(m.fieldType)?e.jsx("input",{required:!0,id:"value",step:"any",disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:m.fieldType=="datetime"?"datetime-local":"date",placeholder:"Enter a value",value:m.date_value||"",onChange:a=>{(m.fieldType=="date"||m.fieldType=="datetime")&&X(l=>({...l,date_value:a.target.value,order:n.tagConditions.length+1}))}}):z.includes(m.fieldType)?e.jsx("input",{id:"value",required:!0,disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:m.text_value||"",onChange:a=>{be(a.target.value)}}):e.jsx("input",{id:"value",required:!0,disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"number",placeholder:"Enter a text value",value:m.int_value||"",onChange:a=>{be(a.target.value)}})}),m.condition_value_type_name==="Absolute"&&m.fieldType=="boolean"&&e.jsxs("select",{required:!0,disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.text_value,onChange:a=>{X(l=>({...l,text_value:a.target.value,order:n.tagConditions.length+1}))},children:[e.jsx("option",{value:"",children:"Select Value"}),Fe.map((a,l)=>e.jsx("option",{value:a,children:a},l))]}),m.condition_value_type_name==="Relative"&&e.jsxs("select",{required:!0,disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.valueName,onChange:a=>{be(a.target.value)},children:[e.jsx("option",{value:"",children:"Select Value"}),n.relativeTypes.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))]}),m.fieldType==="picklist"&&(m.condition_type_name==="Equals"||m.condition_type_name==="Not Equals"?P?e.jsx("div",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg  justify-end items-center focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-14 py-1.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",children:e.jsx(Q,{className:"text-base ml-14 animate-spin flex justify-end items-center"})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.text_value,onChange:a=>{X(l=>({...l,text_value:a.target.value,order:n.tagConditions.length+1}))},children:[e.jsx("option",{value:"",children:"Select Value"}),n.picklistfield.map(a=>e.jsx("option",{value:a.value,children:a.value},a.value))]}):e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(t.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:m.text_value||"",onChange:a=>be(a.target.value)})),m.fieldType==="reference"&&(m.condition_type_name==="Equals"||m.condition_type_name==="Not Equals"?P?e.jsx("div",{className:"bg-gray-50 border border-gray-300 flex  text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full  px-14 py-1.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",children:e.jsx(Q,{className:"text-base ml-14 animate-spin flex justify-end items-center"})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:m.text_value,onChange:a=>{X(l=>({...l,text_value:a.target.value,order:n.tagConditions.length+1}))},children:[e.jsx("option",{value:"",children:"Select Value"}),console.log(n.referencefield),n.referencefield.map(a=>{const l=a.match(/\(([^)]+)\)/),c=l?l[1]:"";return e.jsx("option",{value:c,children:a},c)})]}):e.jsx("input",{id:"value",required:!0,disabled:["Null","Not Null"].includes(m.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:m.text_value||"",onChange:a=>be(a.target.value)}))]})})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-2 justify-center ",children:[e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors bg-red-100 text-red-600 hover:bg-red-200 hover:border-red-300 border-red-200",onClick:xt,children:"Discard"}),e.jsx("button",{type:"submit",className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors ",onClick:()=>{},children:"Confirm"})]})]})})}),e.jsx("div",{className:`${n.tagConditions.length>3&&n.tagConditions.length<=7&&n.addTagPopUp3===!0?"h-[135px]  overflow-y-auto":"h-auto"}   w-full justify-center `,children:n.tagConditions.map((a,l)=>{var c;return e.jsx("div",{className:"w-full",children:r.show===!0&&r.id===a.order?e.jsx("div",{className:"inline-block w-full",children:e.jsx("div",{className:"px-4 md:px-5 py-3 bg-neutral-50 relative border overflow-hidden rounded-lg",children:e.jsx("form",{className:"space-y-2",onSubmit:s=>{s.preventDefault()},children:e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"border-cyan-200 absolute left-1 top-1 border  rounded  flex justify-center items-center gap-1 text-xs bg-cyan-50  text-cyan-700 font-semibold px-1 py-[2px]",children:[e.jsx(Ae,{className:" text-base"})," ","Edit tag condition #",a.order]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 justify-between",children:[e.jsxs("div",{className:"mt-2 mb-1",children:[e.jsx("label",{className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Field"}),e.jsxs("select",{id:"field",className:"inline-block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full  px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.hasOwnProperty("id")?ae(t.salesforce_field):t.fieldName,onChange:s=>{ct(s.target.value)},onClick:()=>{t.fieldType=="picklist"&&He(t.fieldValue),t.fieldType=="reference"&&De(t.fieldValue)},children:[e.jsx("option",{value:"select",children:"Select Field"}),n.userFields.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{id:"condition",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Condition"}),e.jsxs("select",{id:"condition",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full py-1 px-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.hasOwnProperty("id")?qe(t.condition_type):t.condition_type_name||"",onChange:s=>{pt(s.target.value)},children:[e.jsx("option",{value:"select",children:"Select Condition"}),!z.includes(t.fieldType)&&!ee.includes(t.fieldType)&&!ne.includes(t.fieldType)&&!K.includes(t.fieldType)&&n.conditionTypes.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id)),z.includes(t.fieldType)&&Te.map(s=>e.jsx("option",{value:s,children:s},s)),ne.includes(t.fieldType)&&Ee.map(s=>e.jsx("option",{value:s,children:s},s)),ee.includes(t.fieldType)&&Ce.map(s=>e.jsx("option",{value:s,children:s},s)),K.includes(t.fieldType)&&Se.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"w-full mb-1",children:[e.jsx("label",{id:"valueType",className:"w-full inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value Type"}),e.jsx("select",{id:"valueType",disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block w-full px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.condition_value_type_name||"",onChange:s=>{gt(s.target.value)},children:K.includes(t.fieldType)?n.valueTypes.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id)):n.valueTypes.filter(s=>s.name!="Relative").map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{children:[e.jsx("label",{id:"value",className:"w-28 inline-block mb-2 text-sm  text-neutral-700 font-semibold dark:text-white",children:"Value"}),t.condition_value_type_name==="Absolute"&&t.fieldType!="boolean"&&t.fieldType!=="picklist"&&t.fieldType!=="reference"&&e.jsx("div",{className:"inline-block w-full",children:K.includes(t.fieldType)?e.jsx("input",{required:!0,id:"value",disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),step:"any",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:t.fieldType==="datetime"?"datetime-local":"date",placeholder:"Enter a value",value:t.fieldType==="datetime"?t.date_value||"":((c=t.date_value)==null?void 0:c.split("T")[0])||"",onChange:s=>{if(t.fieldType==="date"||t.fieldType==="datetime"){const k=t.fieldType==="datetime"?s.target.value:s.target.value+"T00:00";i(oe=>({...oe,date_value:k}))}}}):z.includes(t.fieldType)?e.jsx("input",{id:"value",required:!0,disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:t.text_value||"",onChange:s=>{ve(s.target.value)}}):e.jsx("input",{id:"value",required:!0,disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"number",placeholder:"Enter a text value",value:t.int_value,onChange:s=>{ve(s.target.value)}})}),t.condition_value_type_name==="Absolute"&&t.fieldType=="boolean"&&e.jsxs("select",{required:!0,disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-5 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.text_value,onChange:s=>{i(k=>({...k,text_value:s.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),Fe.map((s,k)=>e.jsx("option",{value:s,children:s},k))]}),t.condition_value_type_name=="Relative"&&e.jsxs("select",{disabled:n.conditionTypes.some(s=>s.id===t.condition_type&&(s.name==="Null"||s.name==="Not Null")),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-2 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:Le(t.relative_value),onChange:s=>{ve(s.target.value)},children:[e.jsx("option",{value:"value",children:"Select Value"}),n.relativeTypes.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),t.fieldType==="picklist"&&["Equals","Not Equals"].includes(t.condition_type_name)?P?e.jsx("div",{className:"bg-gray-50 border border-gray-300 flex text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full  px-14 py-1.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",children:e.jsx(Q,{className:"text-base ml-10 animate-spin flex justify-end items-center"})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-5 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.text_value,onChange:s=>{i(k=>({...k,text_value:s.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),Array.isArray(n.picklistfield)&&n.picklistfield.map(s=>e.jsx("option",{value:s.value,children:s.value},s.value))]}):t.fieldType==="picklist"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(t.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:t.text_value,onChange:s=>ve(s.target.value)}),t.fieldType==="reference"&&["Equals","Not Equals"].includes(t.condition_type_name)?P?e.jsx("div",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-14 py-1.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",children:e.jsx(Q,{className:"text-base ml-10 animate-spin"})}):e.jsxs("select",{required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 w-full inline-block px-5 py-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:t.text_value,onChange:s=>{i(k=>({...k,text_value:s.target.value}))},children:[e.jsx("option",{value:"",children:"Select Value"}),n.referencefield.map(s=>{const k=s.match(/\(([^)]+)\)/),oe=k?k[1]:"";return e.jsx("option",{value:oe,children:s},oe)})]}):t.fieldType==="reference"&&e.jsx("input",{id:"value",required:!0,disabled:["Not Null","Null"].includes(t.condition_type_name),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full inline-block px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",placeholder:"Enter a text value",value:t.text_value,onChange:s=>ve(s.target.value)})]}),e.jsxs("div",{className:"flex space-x-2 mt-2 justify-center ",children:[e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors bg-red-100 text-red-600 hover:bg-red-200 hover:border-red-300 border-red-200",onClick:()=>{ft()},children:"Discard"}),e.jsx("button",{className:"px-2 py-1  shrink-0 flex justify-center items-center text-sm btn-secondary rounded-lg transition-colors ",onClick:ht,children:"Confirm"})]})]})]})]})})})}):null},l)})})]})}):e.jsx("div",{className:"bg-gray-100 border-2 mb-4 border-dashed border-gray-300 rounded-lg p-8 flex items-center justify-center h-[342px]",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Select Add Criteria or Edit an existing criteria to see options here."})})})]}),e.jsxs("div",{className:"flex justify-between  pt-2 border-t border-gray-200",children:[e.jsx("button",{className:"px-6 py-2 text-sm font-medium text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors",onClick:Ve,children:"Cancel"}),e.jsx("button",{type:"submit",className:`px-6 py-2 w-[101px] h-[38px] flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors ${T||I?"opacity-70 cursor-not-allowed":""}`,onClick:a=>{a.preventDefault(),kt()},children:I?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Q,{className:"animate-spin text-lg"})}):"Submit"})]})]})]}),e.jsx("div",{className:"absolute",children:e.jsx("div",{children:n.addTagPopUp1&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-50"}),e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-lg w-full relative",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-2xl font-semibold text-neutral-800",children:"Edit Tag"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs gap-2 mb-3 flex items-center border border-cyan-100 px-2 py-1 rounded-md bg-cyan-50 text-cyan-800 w-fit",children:[e.jsx("span",{children:"Service User ID :"}),J?e.jsx("div",{className:"font-semibold",children:d||J[0].name}):e.jsx("div",{children:e.jsx(Q,{className:"text-base animate-spin"})})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),jt()},children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-neutral-800",children:"Tag Name"}),e.jsx("input",{value:h.name,onChange:a=>{O(l=>({...l,name:a.target.value}))},type:"text",className:"p-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full",placeholder:"'2024 Opportunities'",required:!0}),xe&&h.name===""&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Please enter tag name"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-neutral-800",children:"Description"}),e.jsx("input",{value:h.description,onChange:a=>{O(l=>({...l,description:a.target.value}))},type:"text",className:"p-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-lg placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500 w-full",placeholder:"'Tag Description...'",required:!0}),xe&&h.description===""&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Please enter Description."})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-neutral-800",children:"Primary Object"}),e.jsx("div",{className:"p-2 bg-neutral-100 border border-neutral-300 rounded-lg text-neutral-800",children:n.primaryObjectName})]}),e.jsxs("div",{className:"flex justify-between mt-10",children:[e.jsx("button",{type:"button",className:"px-6 py-2 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:Ve,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 w-[101px] h-[38px] flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",onClick:()=>{We(!0),W()},children:"Proceed"})]})]})]})]})})]})})})]}),e.jsx($t,{onClickHandle:v,label:"Edit",css:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-5 pr-5 mr-2 mb-2 ml-3 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",icon:Ot})]})},lt=({tagToEdit:d,setTagToEdit:N})=>{const{TableNameHandler:F,setAddContentToTag:S,viewer_id:E,folder_id:w,baseURL:A,setShowButtonLoading:P,authURL:j,isMatchingCRMFound:h,isServiceUserConnected:O}=o.useContext(se),x=Mt(),g=ge(),V=ye(),f=G(R=>R.tags.selectedTags),y=G(R=>R.tags.selectedTagsActiveCount),b=G(R=>R.tags.selectedTagsDeactiveCount),[T,q]=o.useState(!0),I=async()=>{const R=f.map(n=>n.id);try{const n=await V.post("/activate-tags",{tagIds:R,viewer_id:E},{withCredentials:!0});console.log(n.data),n&&(g(_e({viewer_id:E,baseURL:A})),g(ue()),toast.success("Tag Activated Successfully !!"))}catch(n){toast.error("Error Activating !!"),console.log(n)}},B=async()=>{const R=f.map(n=>n.id);try{const n=await V.post("/deactivate-tags",{tagIds:R,viewer_id:E},{withCredentials:!0});n&&(g(_e({viewer_id:E,baseURL:A})),g(ue()),toast.success("Tag Deactivated Successfully !!")),console.log(n.data)}catch(n){console.log(n),toast.error("Error Deactivating !!")}},Y=()=>{q(!!(!j&&h&&O))};return o.useEffect(()=>{Y()},[h,O,j]),e.jsxs("div",{className:"container flex justify-between mx-auto px-4 pt-4 pb-0",children:[e.jsx("div",{className:"overflow-x-auto scroll-none",children:e.jsxs("div",{className:"flex justify-between space-x-2",children:[x("Create Tag")=="1"&&f.length===0&&T&&e.jsx("div",{className:"transition-all",children:e.jsx(ea,{})}),e.jsxs("div",{className:`flex flex-row mb-1  ${f.length>0?"bg-white dark:bg-gray-600 rounded-md p-0.5 shadow-md w-[70vw]":""}`,children:[x("Edit Tag")=="1"&&f.length==1&&T&&e.jsx("div",{className:"transition-all",children:e.jsx(at,{tagToEdit:d,setTagToEdit:N})}),d&&e.jsx("div",{className:"transition-all",children:e.jsx(at,{tagToEdit:d,setTagToEdit:N})}),x("Activate/Deactivate Tag")=="1"&&f.length>=1&&f.length==b&&T&&e.jsx("div",{className:" transition-all mb-0",children:e.jsxs("button",{onClick:I,className:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-4 pr-4 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",children:[e.jsx(he,{icon:Pt,className:"mr-2"}),"Activate Tag"]})}),x("Activate/Deactivate Tag")=="1"&&f.length==y&&f.length>=1&&T&&e.jsx("div",{className:"",children:e.jsxs("button",{onClick:B,className:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-2 pr-2 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",children:[e.jsx(he,{icon:qt,className:"mr-2"}),"Deactivate Tag"]})}),f.length>=1&&f.length===y&&e.jsxs("div",{className:"flex ",children:[x("View Pitch; View all pitch")=="1"&&e.jsx("div",{className:" transition-all",children:e.jsxs("button",{className:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-3 pr-3 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",onClick:async()=>{P(!0),await F("pitch","filter","tag"),g(ue()),P(!1)},children:[e.jsx(he,{icon:Lt,className:"mr-2"}),"Show Pitch"]})}),x("View Content; View All Content")=="1"&&e.jsx("div",{className:"transition-all",children:e.jsxs("button",{className:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-3 pr-3 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",onClick:async()=>{P(!0),g(ue()),await F("content","filter","tag"),P(!1)},children:[e.jsx(he,{icon:Ht,className:"mr-2"}),"Show Content"]})})]}),x("Add Content to Tag")=="1"&&f.length>0&&T&&e.jsx("div",{children:e.jsxs("button",{type:"button",className:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-3 pr-3 mr-3 mb-2 rounded-md hover:bg-gray-200 dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500 transition duration-300 ease-in-out",onClick:()=>{g(Nt({viewer_id:E,folder_id:w,sortOption:"type",order:"ASC",baseURL:A})),S(!0)},children:[e.jsx(he,{icon:Dt,className:"mr-2"}),"Add Content"]})})]})]})}),e.jsx("div",{className:"flex flex-row flex-nowrap space-x-2",children:e.jsx(zt,{queryTable:"tag"})})]})},ta=()=>{const{viewer_id:d,baseURL:N}=o.useContext(se),F=ye(),S=ge(),[E,w]=o.useState([{id:"",name:"Home"}]),[A,P]=o.useState(""),j=G(y=>y.contents.modalLoading),h=G(y=>y.contents.modalContents),O=G(y=>y.contents.modalSelectedContents),x=G(y=>y.tags.selectedTags),g=x.map(y=>y.id);console.log(g);const V=async()=>{const y=x.length>0?x[0].id:null;try{const b=await F.post("/view-tag-content",{tag_id:y,viewer_id:d},{withCredentials:!0});return b&&console.log(b),b.data.tagContent.map(q=>q.content)}catch(b){return console.error("Failed to fetch existing associations:",b),[]}};o.useEffect(()=>{(async()=>{if(x.length>0){x[0].id;const b=await V();h.filter(q=>b.includes(q.id)).forEach(q=>{O.some(I=>I.id===q.id)||S(tt(q))})}})()},[x,h,S,d]);const f=o.useCallback(async(y,b)=>{if(S(Tt()),y!==A||b&&!E.find(T=>T.id===y))try{b&&w(T=>[...T,{id:y,name:b}]),P(y),S(nt({viewer_id:d,folder_id:y,baseURL:N}))}catch(T){console.error(T)}},[A,E]);return e.jsx("div",{className:"overflow-hidden border-2 mx-4 border-groove shadow-sm mb-10 z-50 rounded-xl bg-white",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-white rounded-xl",children:e.jsx(Yt,{onBreadcrumbClick:f,breadcrumbs:E,setBreadcrumbs:w})}),e.jsx("div",{className:"overflow-y-auto mt-1 border-2 rounded-lg h-96",children:e.jsxs("table",{className:"w-full text-left   shadow-lg overflow-y-auto divide-y divide-gray-200 z-10 inline-block",children:[e.jsx("thead",{className:"text-xs 2xl:text-base uppercase bg-gray-50 w-full shadow-lg inline-block ",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4",scope:"col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{disabled:!0,id:"checkbox-all-search",type:"checkbox",className:"h-4 bg-gray-100 border-gray-300 rounded ",checked:O.length===h.length,onChange:()=>{O.length,h.length}}),e.jsx("label",{htmlFor:"checkbox-all-search",className:"sr-only",children:"checkbox"})]})}),e.jsx("td",{scope:"col",className:"px-6 py-3 w-60 inline-block text-left  text-xs font-medium text-sky-800 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:"Name"})})}),e.jsx("td",{scope:"col",className:"px-6 py-3 inline-block w-28 text-left  text-xs font-medium text-sky-800 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:"Source"})})}),e.jsx("td",{scope:"col",className:"px-6 py-3 inline-block  w-40 text-left  text-xs font-medium text-sky-800 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:"Created By"})})}),e.jsx("td",{scope:"col",className:"px-6 py-3 text-left  text-xs font-medium text-sky-800 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:"Created At"})})})]})}),e.jsx("tbody",{className:"overflow-y-auto  2xl:text-base text-xs    bg-white divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{role:"status",className:"w-full p-4 space-y-4 border border-gray-200 divide-y divide-gray-200 rounded shadow animate-pulse dark:divide-gray-700 md:p-6 dark:border-gray-700",children:Array.from({length:5}).map((y,b)=>e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-600 w-40 "}),e.jsx("div",{className:" h-2 bg-gray-200 rounded-full dark:bg-gray-700"})]}),e.jsx("div",{className:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-700 w-12"})]},b))})})}):h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"100% ",children:e.jsx(Gt,{})})}):h.map(y=>e.jsxs("tr",{className:"",children:[e.jsx("td",{className:"px-4",scope:"col",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{disabled:y.id[0]=="W",id:"checkbox-all-search",type:"checkbox",className:"h-4 bg-gray-100 border-gray-300 rounded ",checked:O.some(b=>b.id===y.id),onChange:()=>{const b=O.findIndex(T=>T.id===y.id);S(b===-1?tt(y):wt(y))}})})}),e.jsx("td",{scope:"col",className:"px-6 py-3 inline-block w-60",onClick:()=>{y.id[0]==="W"&&f(y.id,y.name)},children:y.name}),e.jsx("td",{className:"px-5 py-4 inline-block w-28 ",children:y.source}),e.jsx("td",{className:"px-6 py-4 inline-block w-40",children:`${y.created_by}`}),e.jsx("td",{className:"px-6 py-4 inline-block",children:Wt(y.created_at)})]},y.id))})]})})]})})},rt=()=>{const{viewer_id:d,setAddContentToTag:N,baseURL:F,addContentToTag:S}=o.useContext(se),E=ge(),w=ye(),A=G(b=>b.contents.modalContents),P=G(b=>b.contents.modalSelectedContents),j=G(b=>b.tags.selectedTags),[h,O]=o.useState(""),[x,g]=o.useState([]),V=async()=>{const b=j.length>0?j[0].id:null;try{const T=await w.post("/view-tag-content",{tag_id:b,viewer_id:d},{withCredentials:!0});if(T){const q=T.data.tagContent.map(I=>I.content);g(q),console.log(x)}}catch(T){console.error("Failed to fetch existing associations:",T),g([])}},f=async()=>{const b=j.map(I=>I.id),T={},q=P.filter(I=>!b.some(B=>T[B]&&T[B].includes(I.id))).map(I=>I.id);try{const I=await w.post("/insert-tag-content",{viewer_id:d,content_ids:q,tag_ids:b},{withCredentials:!0});I&&(N(!1),E(Me()),E(ue()),console.log(I.data))}catch(I){console.log(I.message),Ge.error("please select selected"),N(!1),E(Me()),E(ue())}},y=()=>{E(Me()),N(!1)};return o.useEffect(()=>{if(V(),h.length>0){const b=A.filter(T=>T.name.toLowerCase().includes(h.toLowerCase()));E(Ct(b))}else h.length===0&&S&&E(nt({viewer_id:d,folder_id:"",baseURL:F}))},[h,S]),e.jsxs("div",{className:"fixed top-36 left-1/4 w-[800px] h-[580px] z-50 bg-stone-50 shadow-2xl",children:[e.jsx("h1",{className:"pl-8 mt-2 font-bold sticky top-3",children:"Select Content"}),e.jsx("div",{className:"flex items-center justify-center bg-white",children:e.jsx("input",{value:h,className:"w-1/2 px-2 py-1 mb-2 border-2 rounded-xl border-slate-300",type:"text",placeholder:"Enter the name of content",onChange:b=>{O(b.target.value)}})}),e.jsx(ta,{}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex gap-20 absolute bottom-3",children:[e.jsx("button",{onClick:y,className:"bg-[#f1bdbd] focus:ring-4 focus:outline-none focus:ring-red-300 font-medium text-sm border-2 rounded-full px-24 py-2 mt-2 ml-4",children:"Cancel"}),e.jsx("button",{onClick:f,className:"focus:ring-4 focus:outline-none font-medium rounded-full text-sm w-full sm:w-auto border-2 border-slate-400 hover:bg-slate-100 px-24 py-2 mt-2",children:"Add"})]})})]})},ma=()=>{const d=["name","Created By","Created At","Updated By","Updated At","active"],N=["name","created_by_name","created_at","updated_by_name","updated_at","active"],{addContentToTag:F,viewer_id:S,showButtonLoading:E,baseURL:w}=o.useContext(se),A=ge(),P=G(_=>_.tags.loading),j=G(_=>_.tags.tags),h=G(_=>_.tags.filterTags),O=G(_=>_.filter),x=G(_=>_.filter.filterData),g=G(_=>_.tags.selectedTags),V=St(),f=Et(),y=G(_=>_.filter.loading),[b,T]=o.useState(null),q=j.map(_=>({..._,"Created At":_.created_at||"N/A","Created By":_.created_by_name||"N/A","Updated By":_.updated_by_name||"N/A","Updated At":_.updated_at||"N/A"}));o.useEffect(()=>{A(_e({viewer_id:S,baseURL:w})),A(Ft())},[]),o.useEffect(()=>{let _=0,H=0;for(let v=0;v<g.length;v++)g[v].active?_++:H++;A(At(_)),A(Rt(H))},[g]);const I=o.useRef(null),[B,Y]=o.useState(0),[R,n]=o.useState(0);if(o.useEffect(()=>{const _=I.current;if(!_)return;_.querySelectorAll("th").forEach(v=>{const U=document.createElement("div");U.className="resizer",U.style.height=`${_.offsetHeight}px`,v.appendChild(U);const J=le=>{Y(le.clientX),n(v.offsetWidth),document.addEventListener("mousemove",$),document.addEventListener("mouseup",te)},$=le=>{const pe=le.clientX-B;v.style.width=`${R+pe}px`},te=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",te)};return U.addEventListener("mousedown",J),()=>{U.removeEventListener("mousedown",J)}})},[R,B]),E)return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsx(Xt,{})]});const L=_=>{if(Array.isArray(_)){A(Vt(_));return}const H=g.findIndex(v=>v.id===_.id);A(H===-1?Ut(_):It(_))};return console.log("FilterTags",h),console.log("filterdata",x),o.useEffect(()=>{const _=new URLSearchParams(f.search),H=_.get("tag");H&&T(H),_.has("tag")&&(_.delete("tag"),V(`${f.pathname}`,{replace:!0}))},[f]),O.filterAppliedOn==="tag"?e.jsxs(e.Fragment,{children:[e.jsx(lt,{tagToEdit:b,setTagToEdit:T}),e.jsxs("div",{children:[F&&e.jsx(rt,{}),e.jsx("div",{className:"container mx-auto p-4 ml-auto",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto rounded-lg",children:e.jsx(ze,{data:x,columnsHeading:d,rowKeys:N,OnChangeHandler:L,selectedItems:g,loading:y})})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{tagToEdit:b,setTagToEdit:T}),e.jsxs("div",{children:[F&&e.jsx(rt,{}),e.jsx("div",{className:"container mx-auto p-4 ml-auto",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto rounded-lg",children:h.filterApplied?e.jsx(ze,{data:h.data,columnsHeading:d,rowKeys:N,OnChangeHandler:L,selectedItems:g,loading:y}):e.jsx(ze,{data:q,columnsHeading:d,rowKeys:N,OnChangeHandler:L,selectedItems:g,loading:P})})})})]})]})};export{ma as TagManagerDashBoard,ma as default};
