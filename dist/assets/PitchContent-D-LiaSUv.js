import{r as s,a as ra,l as wa,j as e,T as Rs,i as ge,v as Ms,a6 as Fs,u as va,e as Fe,at as sa,f as aa,b as Ds,c as Bs,t as Hs,au as $s,av as zs,aw as Vs,ax as fa,ay as Ws,az as qs,aA as Zs}from"./index-b9OYvAdP.js";import{T as Xa,E as Ka,f as Ja,j as Js,B as Xs,q as Ks,h as Gs,i as Qs,L as St,C as hs,r as xs,k as Ys,s as ls,o as en,t as Za}from"./Dashboard-DSqmdOgz.js";import{F as O,a5 as tn,a6 as an,a7 as sn,a8 as nn,a9 as rn,r as na,s as ye,aa as ba,ab as _t,ac as It,p as ln,m as on,a3 as cn,Y as dn,ad as un,ae as mn}from"./index-9bYYq6UN.js";import{p as os,s as is,r as hn,q as xn,M as gn,H as gs,J as ya,T as ps,L as fs,K as cs,N as ds}from"./AnnotationLayer-CsQ9Me8w.js";import{m as pn,d as fn,c as bn}from"./index-DSB5HKeL.js";import{a as yn,L as jn}from"./index-DHI5Vo0j.js";import{$ as ja}from"./module-C6tlsdyI.js";import{D as wn}from"./DriveSelection-Bnr6ndBg.js";import{Q as vn}from"./ReactToastify-D-1G0H5q.js";import"./RevSpire-logo-BbDjnAdX.js";const bs="/assets/empty-folder-DJVwb-FK.jpg";function Nn({title:G,titleId:q,...j},N){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":q},j),G?s.createElement("title",{id:q},G):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Cn=s.forwardRef(Nn),Lt=({onClickHandler:G,contentPlaceHolder:q,setContentPlaceHolder:j,contentPlaceHolderModal:N,setContentPlaceHolderModal:u,contentPlaceHolderValues:k,setContentPlaceHolderValues:y})=>{const{viewer_id:E}=s.useContext(ra),[g,$]=s.useState([{id:"",name:"Home"}]),[F,P]=s.useState(""),[S,f]=s.useState([]),[c,m]=s.useState(!0),[I,v]=s.useState(!0),B=wa(),R=s.useCallback(async(w="")=>{m(!0);try{const X=await B.post("/view-content-and-folders-sorted",{viewer_id:E,folder_id:w},{withCredentials:!0});X.data&&(f(X.data.items),m(!1))}catch(X){console.error(X.message),m(!1)}},[]);s.useEffect(()=>{R()},[]);const M=s.useCallback(async(w,X)=>{if(w!==F||X&&!g.find(ue=>ue.id===w))try{if(X)if(w==="")$([{id:"",name:"Home"}]);else{let ue=!1;const pe=[];for(let oe=0;oe<g.length;oe++)if(pe.push(g[oe]),g[oe].id===w){ue=!0;break}$(ue?pe:oe=>[...oe,{id:w,name:X}])}P(w),R(w)}catch(ue){console.error(ue)}else m(!1)},[F,g]),V=()=>{G({id:"-1"}),v(!1)},T=async w=>{try{return(await B.post("/retrieve-document-placeholders",{contentId:w,viewer_id:E},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data}catch(X){console.error("Error in handleFileUpload:",X)}},b=async w=>{if(w.table_identifier==="folder")M(w.id,w.name);else if(w.name.endsWith(".pptx")||w.name.endsWith(".docx")){const X=await T(w.id);console.log("Response is here :",X),X.placeholders.length>0&&(j(X.placeholders),u(!0),y({...k,originalContentId:w.id,folderId:w.folder,sasUrl:X.sasUrl}))}else G(w)},K=w=>({folder:e.jsx(Js,{className:"w-5 h-5"}),"application/pdf":e.jsx(pn,{className:"w-5 h-5 text-gray-500"}),"image/jpeg":e.jsx(is,{className:"w-5 h-5 text-gray-500"}),"image/png":e.jsx(is,{className:"w-5 h-5 text-gray-500"}),"application/vnd.ms-excel":e.jsx(fn,{className:"w-5 h-5 text-gray-500"}),"application/msword":e.jsx(bn,{className:"w-5 h-5 text-gray-500"}),"application/vnd.openxmlformats-officedocument.presentationml.presentation":e.jsx(Xs,{className:"w-5 h-5 text-gray-500"}),"application/vnd.ms-powerpoint":e.jsx(hn,{className:"w-5 h-5 text-gray-500"}),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":e.jsx(yn,{className:"w-5 h-5 text-gray-500"}),"application/vnd.openxmlformats-officedocument.wordprocessingml.document":e.jsx(xn,{className:"w-5 h-5 text-gray-500"}),"application/url":e.jsx(Rs,{className:"w-5 h-5 text-gray-500"}),"application/octet-stream":e.jsx(Ks,{className:"w-5 h-5 text-gray-500"}),"video/mp4":e.jsx(os,{className:"w-5 h-5 text-gray-500"})})[w.table_identifier==="folder"?"folder":w.mimetype]||e.jsx(os,{className:"w-5 h-5 text-gray-500"}),p=s.useRef(null),A=async w=>{var X,ue,pe,oe,Le,De,me,Xe,D,W,H;try{const se=new FormData;se.append("files",w),se.append("created_by",E),se.append("description","Content"),se.append("direct_pitch_content",1);const ee=await ge.promise(B.post("/local-upload",se,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),{loading:`Uploading ${w.name} ...`,success:`Successfully uploaded: ${w.name}`,error:"An error occurred during file upload."});if(ee.data&&(console.log("Response is here :",(X=ee==null?void 0:ee.data)==null?void 0:X.uploadedFiles[0]),console.log("Content Id is here :",(pe=(ue=ee==null?void 0:ee.data)==null?void 0:ue.uploadedFiles[0])==null?void 0:pe.contentId),j((Le=(oe=ee==null?void 0:ee.data)==null?void 0:oe.uploadedFiles[0])==null?void 0:Le.placeholders),((me=(De=ee==null?void 0:ee.data)==null?void 0:De.uploadedFiles[0])==null?void 0:me.placeholders.length)>0)){const je=await T((D=(Xe=ee==null?void 0:ee.data)==null?void 0:Xe.uploadedFiles[0])==null?void 0:D.contentId);console.log("Response is here :",je),je.placeholders.length>0&&(u(!0),y({...k,originalContentId:(H=(W=ee==null?void 0:ee.data)==null?void 0:W.uploadedFiles[0])==null?void 0:H.contentId,folderId:je.folder,sasUrl:je.sasUrl}))}}catch(se){console.error("Error in handleFileUpload:",se)}},ce=w=>{const X=w.target.files[0];X&&A(X)},ne=()=>{p.current.click()};return I?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-500 bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-4xl p-6 bg-white rounded-2xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Select Content"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:p,onChange:ce,style:{display:"none"}}),e.jsx("div",{className:"space-x-4",children:e.jsx("button",{isLoading:c,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:ne,children:"Add Content"})})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:V,children:e.jsx(Cn,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-2 border border-gray-200 mb-4",children:e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsx("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:g.map((w,X)=>e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[X>0&&e.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),e.jsx("button",{onClick:()=>M(w.id,w.name),className:"text-sm font-medium text-gray-700 hover:text-blue-600",children:w.name})]})},w.id))})})}),e.jsx("div",{className:"overflow-y-auto border-2 rounded-lg h-96",children:c?e.jsx(Xa,{columns:3,rows:7}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:e.jsx(Ka,{})})}):S.map(w=>e.jsxs("tr",{onClick:()=>b(w),className:"hover:bg-gray-50 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[K(w),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:w.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.created_by}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ja(w.created_at)})]},w.id))})]})})]})}):null};var ys={exports:{}};(function(G,q){(function(N,u){G.exports=u(s)})(Ms,function(j){return function(N){var u={};function k(y){if(u[y])return u[y].exports;var E=u[y]={i:y,l:!1,exports:{}};return N[y].call(E.exports,E,E.exports,k),E.l=!0,E.exports}return k.m=N,k.c=u,k.d=function(y,E,g){k.o(y,E)||Object.defineProperty(y,E,{enumerable:!0,get:g})},k.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},k.t=function(y,E){if(E&1&&(y=k(y)),E&8||E&4&&typeof y=="object"&&y&&y.__esModule)return y;var g=Object.create(null);if(k.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:y}),E&2&&typeof y!="string")for(var $ in y)k.d(g,$,(function(F){return y[F]}).bind(null,$));return g},k.n=function(y){var E=y&&y.__esModule?function(){return y.default}:function(){return y};return k.d(E,"a",E),E},k.o=function(y,E){return Object.prototype.hasOwnProperty.call(y,E)},k.p="",k(k.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(N,u,k){k.r(u);var y=k("react"),E=function(){var S=function(f,c){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var v in I)I.hasOwnProperty(v)&&(m[v]=I[v])},S(f,c)};return function(f,c){S(f,c);function m(){this.constructor=f}f.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),g=function(){return g=Object.assign||function(S){for(var f,c=1,m=arguments.length;c<m;c++){f=arguments[c];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(S[I]=f[I])}return S},g.apply(this,arguments)},$=function(S,f){var c={};for(var m in S)Object.prototype.hasOwnProperty.call(S,m)&&f.indexOf(m)<0&&(c[m]=S[m]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,m=Object.getOwnPropertySymbols(S);I<m.length;I++)f.indexOf(m[I])<0&&Object.prototype.propertyIsEnumerable.call(S,m[I])&&(c[m[I]]=S[m[I]]);return c};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(f){var c=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return c?new Promise(function(m,I){c.call(navigator,f,m,I)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function F(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var P=function(S){E(f,S);function f(c){var m=S.call(this,c)||this;return m.canvas=null,m.ctx=null,m.requestUserMediaId=0,m.unmounted=!1,m.state={hasUserMedia:!1},m}return f.prototype.componentDidMount=function(){var c=this,m=c.state,I=c.props;if(this.unmounted=!1,!F()){I.onUserMediaError("getUserMedia not supported");return}m.hasUserMedia||this.requestUserMedia(),I.children&&typeof I.children!="function"&&console.warn("children must be a function")},f.prototype.componentDidUpdate=function(c){var m=this.props;if(!F()){m.onUserMediaError("getUserMedia not supported");return}var I=JSON.stringify(c.audioConstraints)!==JSON.stringify(m.audioConstraints),v=JSON.stringify(c.videoConstraints)!==JSON.stringify(m.videoConstraints),B=c.minScreenshotWidth!==m.minScreenshotWidth,R=c.minScreenshotHeight!==m.minScreenshotHeight;(v||B||R)&&(this.canvas=null,this.ctx=null),(I||v)&&(this.stopAndCleanup(),this.requestUserMedia())},f.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},f.stopMediaStream=function(c){c&&(c.getVideoTracks&&c.getAudioTracks?(c.getVideoTracks().map(function(m){c.removeTrack(m),m.stop()}),c.getAudioTracks().map(function(m){c.removeTrack(m),m.stop()})):c.stop())},f.prototype.stopAndCleanup=function(){var c=this.state;c.hasUserMedia&&(f.stopMediaStream(this.stream),c.src&&window.URL.revokeObjectURL(c.src))},f.prototype.getScreenshot=function(c){var m=this,I=m.state,v=m.props;if(!I.hasUserMedia)return null;var B=this.getCanvas(c);return B&&B.toDataURL(v.screenshotFormat,v.screenshotQuality)},f.prototype.getCanvas=function(c){var m=this,I=m.state,v=m.props;if(!this.video||!I.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var B=this.video.videoWidth,R=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var M=B/R;B=v.minScreenshotWidth||this.video.clientWidth,R=B/M,v.minScreenshotHeight&&R<v.minScreenshotHeight&&(R=v.minScreenshotHeight,B=R*M)}this.canvas=document.createElement("canvas"),this.canvas.width=(c==null?void 0:c.width)||B,this.canvas.height=(c==null?void 0:c.height)||R,this.ctx=this.canvas.getContext("2d")}var V=this,T=V.ctx,b=V.canvas;return T&&b&&(b.width=(c==null?void 0:c.width)||b.width,b.height=(c==null?void 0:c.height)||b.height,v.mirrored&&(T.translate(b.width,0),T.scale(-1,1)),T.imageSmoothingEnabled=v.imageSmoothing,T.drawImage(this.video,0,0,(c==null?void 0:c.width)||b.width,(c==null?void 0:c.height)||b.height),v.mirrored&&(T.scale(-1,1),T.translate(-b.width,0))),b},f.prototype.requestUserMedia=function(){var c=this,m=this.props,I=function(R,M){var V={video:typeof M<"u"?M:!0};m.audio&&(V.audio=typeof R<"u"?R:!0),c.requestUserMediaId++;var T=c.requestUserMediaId;navigator.mediaDevices.getUserMedia(V).then(function(b){c.unmounted||T!==c.requestUserMediaId?f.stopMediaStream(b):c.handleUserMedia(null,b)}).catch(function(b){c.handleUserMedia(b)})};if("mediaDevices"in navigator)I(m.audioConstraints,m.videoConstraints);else{var v=function(R){return{optional:[{sourceId:R}]}},B=function(R){var M=R.deviceId;return typeof M=="string"?M:Array.isArray(M)&&M.length>0?M[0]:typeof M=="object"&&M.ideal?M.ideal:null};MediaStreamTrack.getSources(function(R){var M=null,V=null;R.forEach(function(K){K.kind==="audio"?M=K.id:K.kind==="video"&&(V=K.id)});var T=B(m.audioConstraints);T&&(M=T);var b=B(m.videoConstraints);b&&(V=b),I(v(M),v(V))})}},f.prototype.handleUserMedia=function(c,m){var I=this.props;if(c||!m){this.setState({hasUserMedia:!1}),I.onUserMediaError(c);return}this.stream=m;try{this.video&&(this.video.srcObject=m),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(m)})}I.onUserMedia(m)},f.prototype.render=function(){var c=this,m=this,I=m.state,v=m.props,B=v.audio;v.forceScreenshotSourceSize;var R=v.disablePictureInPicture;v.onUserMedia,v.onUserMediaError,v.screenshotFormat,v.screenshotQuality,v.minScreenshotWidth,v.minScreenshotHeight,v.audioConstraints,v.videoConstraints,v.imageSmoothing;var M=v.mirrored,V=v.style,T=V===void 0?{}:V,b=v.children,K=$(v,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),p=M?g(g({},T),{transform:(T.transform||"")+" scaleX(-1)"}):T,A={getScreenshot:this.getScreenshot.bind(this)};return y.createElement(y.Fragment,null,y.createElement("video",g({autoPlay:!0,disablePictureInPicture:R,src:I.src,muted:!B,playsInline:!0,ref:function(ce){c.video=ce},style:p},K)),b&&b(A))},f.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},f}(y.Component);u.default=P},react:function(N,u){N.exports=j}}).default})})(ys);var kn=ys.exports;const Sn=Fs(kn);function js({onCancel:G,highlightVideoFiles:q,videoTaglines:j}){const N=s.useRef(null),u=s.useRef(null),[k,y]=s.useState(!1),[E,g]=s.useState(!1),[$,F]=s.useState([]),[P,S]=s.useState(null),[f,c]=s.useState([]),[m,I]=s.useState([]),[v,B]=s.useState(""),[R,M]=s.useState(""),[V,T]=s.useState("");s.useState(!1);const[b,K]=s.useState("idle"),[p,A]=s.useState(0),[ce,ne]=s.useState(!1);s.useEffect(()=>{navigator.mediaDevices.enumerateDevices().then(D=>{var se,ee;const W=D.filter(je=>je.kind==="audioinput"),H=D.filter(je=>je.kind==="videoinput");c(W),I(H),B(((se=W[0])==null?void 0:se.deviceId)||""),M(((ee=H[0])==null?void 0:ee.deviceId)||"")})},[]);const w=s.useCallback(({data:D})=>{D.size>0&&F(W=>{const H=[...W,D],se=new Blob(H,{type:"video/webm"});return S(window.URL.createObjectURL(se)),ne(!0),H})},[]),X=s.useCallback(()=>{N.current&&N.current.srcObject&&(N.current.srcObject.getTracks().forEach(W=>{W.stop()}),N.current.srcObject=null),u.current&&u.current.stream&&u.current.stream.getTracks().forEach(W=>{W.stop()})},[]),ue=s.useCallback(async()=>{const D=v?{deviceId:{exact:v}}:!0,W=R?{deviceId:{exact:R}}:!0;try{const H=await navigator.mediaDevices.getUserMedia({video:W,audio:D});N.current&&(N.current.srcObject=H),u.current=new MediaRecorder(H,{mimeType:"video/webm"}),u.current.addEventListener("dataavailable",w),u.current.start(),y(!0),K("recording"),A(0);const se=setInterval(()=>{A(ee=>ee+1)},1e3);u.current.intervalId=se}catch(H){console.error("Error accessing media devices.",H)}},[w,v,R]),pe=s.useCallback(()=>{u.current&&(u.current.stop(),clearInterval(u.current.intervalId)),y(!1),K("idle"),g(!0)},[]),oe=s.useCallback(()=>{if(u.current&&b==="recording")u.current.pause(),clearInterval(u.current.intervalId),K("paused");else if(u.current&&b==="paused"){u.current.resume();const D=setInterval(()=>{A(W=>W+1)},1e3);u.current.intervalId=D,K("recording")}},[b]),Le=s.useCallback(()=>{j&&j(V)},[V,j]),De=s.useCallback(()=>{if(u.current&&k&&(u.current.stop(),y(!1)),$.length){const D=new Blob($,{type:"video/webm"}),W=new File([D],"video.webm",{type:"video/webm"});console.log("Generated file: ",W),q(W),j&&j(V),console.log("Video Tagline: ",V),F([])}X(),G(),console.log("onCancle and stopwebcam called")},[k,$,G,q,V]);s.useCallback(()=>{if($.length){const D=new Blob($,{type:"video/webm"});S(window.URL.createObjectURL(D)),g(!0),X()}},[$]);const me=s.useCallback(()=>{X(),G(),g(!1),S(null),F([])},[G]);s.useCallback(()=>{g(!1),S(null)},[]),s.useCallback(()=>{F([]),g(!1),S(null)},[]);const Xe=D=>{const W=D.target.value;W.length<=70&&T(W)};return console.log("VIdeo"),e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"overflow-y-auto overflow-x-hidden fixed inset-0 flex items-center justify-center z-20 bg-gray-500 bg-opacity-70",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-2xl w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Record Video"}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"audioInput",className:"w-1/4 text-gray-700",children:"Audio Input:"}),e.jsx("select",{id:"audioInput",value:v,onChange:D=>B(D.target.value),className:"w-3/4 border-gray-300 rounded-md p-2 bg-gray-50",children:f.map(D=>e.jsx("option",{value:D.deviceId,children:D.label},D.deviceId))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"videoInput",className:"w-1/4 text-gray-700",children:"Video Input:"}),e.jsx("select",{id:"videoInput",value:R,onChange:D=>M(D.target.value),className:"w-3/4 border-gray-300 rounded-md p-2 bg-gray-50",children:m.map(D=>e.jsx("option",{value:D.deviceId,children:D.label},D.deviceId))})]})]}),e.jsxs("div",{className:"border-2 border-gray-200 p-2 rounded-md relative",children:[e.jsxs("div",{className:"relative w-full aspect-video",children:[ce?e.jsx("video",{src:P,controls:!0,className:"w-full h-full object-cover rounded-md"}):e.jsx(Sn,{audio:!1,mirrored:!0,ref:N,videoConstraints:{deviceId:R,aspectRatio:16/9},className:"w-full h-full object-cover rounded-md"}),b!=="idle"&&e.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-md text-sm",children:[b==="recording"?"Recording":"Paused",":"," ",Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"mt-2 flex items-center bg-gray-50 rounded-md p-2",children:[e.jsx("label",{className:"w-1/4 text-sm font-medium text-gray-700",children:"Video Tagline:"}),e.jsx("input",{value:V,onChange:Xe,type:"text",className:"w-3/4 bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2",placeholder:"Enter video tagline (max 72 characters)...",maxLength:70,required:!0})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[V.length,"/70 characters"]})]}),e.jsxs("div",{className:"mt-6 flex justify-center space-x-4",children:[b==="idle"?e.jsx("button",{title:"Start Recording",className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center",onClick:ue,children:e.jsx(O,{icon:tn})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{title:"Stop Recording",className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center",onClick:pe,children:e.jsx(O,{icon:an})}),e.jsx("button",{title:b==="recording"?"Pause Recording":"Resume Recording",className:"bg-yellow-500 hover:bg-yellow-600 text-white rounded-full w-12 h-12 flex items-center justify-center",onClick:oe,children:e.jsx(O,{icon:b==="recording"?sn:nn})})]}),ce&&e.jsx("button",{title:"Record Again",className:"bg-gray-500 hover:bg-gray-600 text-white rounded-full w-12 h-12 flex items-center justify-center",onClick:()=>{ne(!1),F([]),S(null)},children:e.jsx(O,{icon:rn})})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("button",{title:"Cancel Recording",className:"px-6 py-2 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:me,children:"Cancel"}),e.jsx("button",{title:k?"Stop recording first":$.length===0?"Record video first":"Save Recording",className:`px-6 py-2 text-sm text-white rounded-lg transition-colors ${k||$.length===0?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,onClick:()=>{De(),Le()},disabled:$.length===0,children:"Save"})]})]})})})}const ws=()=>{const[G,q]=s.useState(!1);return s.useEffect(()=>{q(!0);const j=setInterval(()=>{q(N=>!N)},2e3);return()=>clearInterval(j)},[]),e.jsxs("svg",{className:`mini-logo ${G?"logoActive":""}`,width:"84",height:"28",viewBox:"0 0 194 194",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M73.1592 190.241C68.8492 188.951 64.8492 188.111 61.1092 186.621C30.7792 174.231 10.5492 152.341 2.98923 119.871C-4.01077 89.651 1.07923 61.451 20.4192 36.761C35.3392 17.761 54.7992 5.761 78.3492 1.761C115.719 -4.649 147.489 6.381 172.169 35.821C187.809 54.491 194.579 76.741 193.569 101.171C192.852 123.075 184.528 144.046 170.029 160.481C159.304 173.124 145.338 182.607 129.629 187.911C125.779 189.211 125.629 189.101 125.629 184.911C125.629 161.851 125.629 138.781 125.489 115.721C125.532 114.08 124.982 112.479 123.939 111.211C123.319 110.674 122.599 110.265 121.819 110.009C121.04 109.754 120.217 109.656 119.399 109.721C117.159 109.981 116.299 112.131 116.159 114.231C115.979 116.881 116.099 119.491 116.159 122.131C116.159 144.251 116.196 166.354 116.269 188.441C116.269 190.761 115.749 191.851 113.269 192.171C103.834 193.311 94.3003 193.381 84.8492 192.381C82.6592 192.181 82.7692 190.861 82.7592 189.301C82.7192 169.301 82.6659 149.301 82.5992 129.301C82.5992 123.601 82.2192 117.861 82.8392 112.231C84.0292 101.491 91.5592 94.971 102.379 94.731C109.549 94.581 116.719 94.731 123.889 94.671C127.549 94.671 129.559 92.901 129.579 89.741C129.599 86.581 127.459 84.431 124.089 84.371C116.089 84.311 107.959 83.821 99.9992 84.591C90.9992 85.471 83.6292 90.231 78.3192 97.861C74.8153 102.829 72.9835 108.783 73.0892 114.861C73.2092 138.621 73.1792 162.391 73.2092 186.171L73.1592 190.241ZM102.999 33.581H103.059C103.059 29.201 103.139 24.811 103.059 20.441C103.032 19.2462 102.649 18.0867 101.959 17.111C101.395 16.2633 100.559 15.6323 99.5892 15.321C98.6276 15.0153 97.5904 15.047 96.6492 15.411C95.6061 15.7699 94.711 16.4637 94.1033 17.3844C93.4956 18.305 93.2093 19.4008 93.2892 20.501C93.2892 28.301 93.2892 36.101 93.1992 43.901C93.1992 49.101 91.3692 51.051 86.1992 51.151C81.4492 51.241 76.7092 51.151 71.9692 51.071C70.7641 50.9859 69.5544 50.9859 68.3492 51.071C65.2492 51.481 63.4392 53.911 63.6492 57.191C63.8292 59.791 65.7792 61.361 68.8792 61.371C75.1892 61.371 81.4892 61.511 87.7792 61.371C91.8002 61.2671 95.6231 59.6031 98.4392 56.731C101.278 53.83 102.908 49.9587 102.999 45.901C103.109 41.721 102.999 37.601 102.999 33.481V33.581ZM60.8492 132.591C60.8492 127.271 60.9492 121.881 60.8492 116.591C60.7692 113.261 58.7292 111.281 55.9092 111.371C53.0892 111.461 51.3492 113.511 51.3592 116.891C51.3592 125.401 51.3592 133.891 51.5192 142.411C51.5192 144.691 50.8192 145.561 48.5192 145.461C44.5192 145.291 40.5192 145.311 36.6092 145.341C33.0592 145.341 30.8492 147.341 30.8492 150.341C30.8492 153.341 32.8492 154.911 36.5592 154.911C42.1792 154.911 47.7892 154.911 53.3992 154.821C59.0092 154.731 60.8492 152.731 60.8492 147.111C60.8492 142.231 60.8492 137.411 60.8492 132.591ZM103.689 148.111V123.621C103.708 122.14 103.45 120.668 102.929 119.281C102.59 118.318 101.901 117.519 100.999 117.041C100.107 116.564 99.0673 116.442 98.0892 116.701C97.1411 116.864 96.273 117.335 95.6192 118.041C94.9692 118.763 94.5664 119.674 94.4692 120.641C94.376 121.521 94.3526 122.407 94.3992 123.291V172.481C94.3992 176.601 96.1492 179.091 99.0692 179.181C101.989 179.271 103.639 176.971 103.659 172.571C103.709 164.391 103.679 156.201 103.689 148.111ZM39.3692 94.681H61.6192C65.2492 94.681 67.4092 92.831 67.4492 89.811C67.4604 88.6892 67.1295 87.5907 66.5007 86.6617C65.8718 85.7327 64.9748 85.0174 63.9292 84.611C63.2405 84.3493 62.505 84.2336 61.7692 84.271C47.1892 84.211 32.6126 84.211 18.0392 84.271C17.2955 84.2301 16.5514 84.3449 15.8546 84.6081C15.1578 84.8713 14.5236 85.2771 13.9927 85.7996C13.4618 86.322 13.0458 86.9496 12.7714 87.6421C12.497 88.3345 12.3703 89.0767 12.3992 89.821C12.3992 92.951 14.4692 94.671 18.1492 94.681C25.2192 94.701 32.2992 94.681 39.3692 94.681ZM154.429 49.681C154.529 46.2558 153.316 42.9219 151.039 40.361C148.765 37.8491 145.601 36.3242 142.219 36.111C133.289 35.581 128.029 42.941 127.689 49.321C127.577 51.0959 127.811 52.8757 128.379 54.561C128.955 56.2369 129.856 57.783 131.029 59.111C132.201 60.428 133.626 61.4958 135.219 62.251C136.805 63.001 138.526 63.4195 140.279 63.481C148.159 63.711 154.149 57.931 154.399 49.751L154.429 49.681ZM157.289 121.841C159.8 121.775 162.236 120.968 164.289 119.521C166.343 118.071 167.928 116.051 168.849 113.711C169.768 111.353 169.991 108.781 169.489 106.301C168.987 103.825 167.774 101.549 165.999 99.751C164.24 97.967 161.992 96.7424 159.539 96.231C157.092 95.7272 154.551 95.964 152.239 96.911C149.913 97.8633 147.92 99.4809 146.509 101.561C145.087 103.653 144.302 106.112 144.249 108.641C144.249 116.371 149.689 121.861 157.249 121.871L157.289 121.841ZM60.0092 33.631V33.511C65.3592 33.511 70.7192 33.591 76.0692 33.441C77.42 33.388 78.7176 32.9005 79.7692 32.051C80.4668 31.4126 80.9527 30.5763 81.1618 29.6541C81.3709 28.7319 81.2932 27.7678 80.9392 26.891C80.5925 26.0131 79.9808 25.2651 79.1892 24.751C78.4073 24.2374 77.4839 23.9821 76.5492 24.021C65.8492 23.961 55.1292 23.851 44.4292 23.801C43.7466 23.7661 43.0645 23.8787 42.4292 24.131C41.8355 24.3993 41.299 24.7796 40.8492 25.251C40.3767 25.7397 40.0121 26.3223 39.7792 26.961C39.5412 27.5996 39.4391 28.2807 39.4792 28.961C39.4792 31.871 41.1392 33.561 44.2492 33.601C49.4692 33.681 54.7392 33.631 60.0092 33.631ZM44.1092 67.111C49.4692 67.111 53.6192 62.531 53.5692 56.811C53.5433 54.3004 52.543 51.898 50.7792 50.111C49.0347 48.3424 46.6633 47.3327 44.1792 47.301C41.566 47.4154 39.0933 48.516 37.2592 50.381C35.4258 52.2616 34.3566 54.7564 34.2592 57.381C34.3137 59.9652 35.3727 62.4265 37.2116 64.243C39.0505 66.0594 41.5246 67.0882 44.1092 67.111ZM145.159 154.741C146.421 154.774 147.676 154.551 148.849 154.087C150.023 153.623 151.091 152.927 151.989 152.041C153.819 150.237 154.859 147.781 154.879 145.211C154.84 142.576 153.804 140.053 151.979 138.151C150.174 136.256 147.704 135.134 145.089 135.021C140.039 135.021 135.629 139.641 135.599 145.071C135.529 150.861 139.299 154.651 145.159 154.701V154.741ZM32.0392 131.981C37.5192 131.981 41.2692 128.121 41.2092 122.551C41.2286 120.086 40.2849 117.711 38.5792 115.931C37.7415 115.056 36.7381 114.355 35.6274 113.871C34.5167 113.387 33.3208 113.129 32.1092 113.111C29.6712 113.231 27.366 114.257 25.6455 115.989C23.925 117.72 22.9135 120.032 22.8092 122.471C22.7686 123.715 22.9787 124.955 23.4271 126.116C23.8755 127.278 24.553 128.337 25.4192 129.231C26.2685 130.115 27.2894 130.816 28.4192 131.291C29.5642 131.772 30.7975 132.007 32.0392 131.981ZM165.229 77.431C165.28 75.9623 164.764 74.5304 163.789 73.431C163.321 72.8766 162.742 72.4264 162.089 72.1093C161.436 71.7922 160.724 71.6152 159.999 71.5898C159.274 71.5644 158.551 71.691 157.878 71.9616C157.204 72.2322 156.595 72.6408 156.089 73.161C155.015 74.2049 154.395 75.6304 154.366 77.1281C154.336 78.6259 154.897 80.075 155.929 81.161C156.435 81.6966 157.041 82.1262 157.714 82.4249C158.387 82.7237 159.113 82.8855 159.849 82.901C160.565 82.9121 161.276 82.7795 161.939 82.511C162.605 82.2345 163.207 81.8262 163.711 81.3106C164.215 80.7951 164.609 80.1829 164.869 79.511C165.124 78.8478 165.246 78.1412 165.229 77.431ZM120.119 31.341C120.8 31.3842 121.481 31.2819 122.119 31.041C122.749 30.8041 123.322 30.436 123.799 29.961C124.286 29.4818 124.668 28.9059 124.919 28.2704C125.171 27.6349 125.287 26.9539 125.259 26.271C125.283 24.7867 124.727 23.3516 123.709 22.271C123.215 21.7344 122.62 21.3008 121.957 20.9953C121.295 20.6898 120.578 20.5184 119.849 20.491C119.153 20.5283 118.472 20.7087 117.849 21.021C117.232 21.3303 116.681 21.7585 116.229 22.281C115.777 22.8071 115.437 23.4195 115.229 24.081C115.009 24.7406 114.92 25.4372 114.969 26.131C114.948 26.8248 115.069 27.5156 115.325 28.1606C115.581 28.8057 115.967 29.3912 116.459 29.881C116.946 30.3681 117.528 30.7494 118.169 31.001C118.789 31.2453 119.453 31.3609 120.119 31.341ZM125.769 67.261C125.769 64.331 123.269 61.601 120.689 61.591C119.958 61.6226 119.241 61.7993 118.579 62.111C117.922 62.4339 117.334 62.8823 116.849 63.431C116.362 63.9902 115.988 64.6389 115.749 65.341C115.512 66.0452 115.417 66.7897 115.469 67.531C115.456 68.2032 115.585 68.8705 115.849 69.4889C116.113 70.1073 116.505 70.6627 116.999 71.1183C117.494 71.5739 118.079 71.9194 118.717 72.1319C119.355 72.3444 120.03 72.4191 120.699 72.351C121.373 72.3749 122.045 72.2595 122.672 72.0119C123.299 71.7643 123.869 71.3899 124.345 70.9121C124.821 70.4343 125.193 69.8634 125.438 69.2352C125.683 68.6069 125.796 67.9348 125.769 67.261Z",fill:"#0FAEBC",className:"mini-logo-1"}),e.jsx("path",{d:"M102.999 33.531C102.999 37.651 103.089 41.771 102.999 45.921C102.9 49.9779 101.263 53.8456 98.4192 56.741C95.6005 59.6066 91.7776 61.2634 87.7592 61.361C81.4692 61.511 75.1692 61.361 68.8592 61.361C65.7292 61.361 63.7792 59.781 63.6292 57.171C63.4192 53.901 65.2292 51.471 68.3292 51.061C69.5332 50.9609 70.7425 50.9409 71.9492 51.001C76.6892 51.001 81.4292 51.171 86.1692 51.081C91.3392 50.991 93.1692 49.081 93.1692 43.841C93.1692 36.041 93.1692 28.241 93.2592 20.441C93.1889 19.3412 93.4789 18.2485 94.0851 17.3283C94.6914 16.408 95.581 15.7104 96.6192 15.341C97.5615 14.9803 98.5987 14.952 99.5592 15.261C100.526 15.5717 101.361 16.1987 101.929 17.041C102.618 18.0211 103.001 19.1834 103.029 20.381C103.159 24.751 103.029 29.131 103.029 33.511L102.999 33.531Z",fill:"white",className:"mini-logo-2"}),e.jsx("path",{d:"M60.8493 132.591V147.111C60.8493 152.781 58.8493 154.781 53.4093 154.831C47.9693 154.881 42.1893 154.911 36.5693 154.921C32.8293 154.921 30.8593 153.301 30.8593 150.351C30.8593 147.401 33.0693 145.351 36.6193 145.351C40.6193 145.351 44.6193 145.351 48.5293 145.471C50.8093 145.571 51.5293 144.701 51.5293 142.421C51.3993 133.911 51.3993 125.421 51.3693 116.901C51.3693 113.521 53.1093 111.461 55.9193 111.381C58.7293 111.301 60.7793 113.271 60.8593 116.601C60.9893 121.911 60.8593 127.301 60.8593 132.601L60.8493 132.591Z",fill:"#1E1E1E",className:"mini-logo-3"}),e.jsx("path",{d:"M103.689 148.111V172.571C103.689 176.991 102.029 179.261 99.0892 179.171C96.1492 179.081 94.4292 176.601 94.4292 172.471V123.261C94.3774 122.374 94.4009 121.484 94.4992 120.601C94.5901 119.635 94.9939 118.726 95.6492 118.011C96.2992 117.298 97.1685 116.823 98.1192 116.661C99.0973 116.402 100.137 116.524 101.029 117.001C101.929 117.486 102.617 118.288 102.959 119.251C103.474 120.636 103.728 122.104 103.709 123.581C103.719 131.771 103.689 139.921 103.689 148.111Z",fill:"#1E1E1E",className:"mini-logo-4"}),e.jsx("path",{d:"M39.3692 94.681H18.1492C14.4692 94.681 12.4392 92.921 12.3992 89.831C12.3763 89.0883 12.5073 88.3488 12.7838 87.6591C13.0604 86.9695 13.4765 86.3444 14.0061 85.8232C14.5358 85.302 15.1674 84.896 15.8615 84.6306C16.5555 84.3652 17.297 84.2461 18.0392 84.281C32.6126 84.221 47.1892 84.221 61.7692 84.281C62.505 84.2435 63.2405 84.3593 63.9292 84.621C64.6199 84.8888 65.2491 85.2936 65.7792 85.811C66.3154 86.328 66.7378 86.9513 67.0192 87.641C67.311 88.3303 67.4574 89.0725 67.4492 89.821C67.4492 92.821 65.2492 94.681 61.6192 94.691H39.3692V94.681Z",fill:"white",className:"mini-logo-5"}),e.jsx("path",{d:"M154.399 49.711C154.149 57.891 148.159 63.711 140.219 63.411C138.466 63.3495 136.745 62.931 135.159 62.181C133.564 61.4294 132.138 60.361 130.969 59.041C129.791 57.7122 128.889 56.1623 128.316 54.4816C127.742 52.8008 127.509 51.0228 127.629 49.251C127.969 42.871 133.229 35.521 142.159 36.051C145.56 36.2721 148.738 37.8198 151.009 40.361C153.296 42.9279 154.509 46.275 154.399 49.711ZM141.399 44.331C140.011 44.3323 138.679 44.8781 137.689 45.851C136.688 46.8289 136.097 48.1524 136.039 49.551C135.986 50.951 136.465 52.3192 137.379 53.381C138.291 54.4353 139.58 55.089 140.969 55.201C141.681 55.2344 142.392 55.126 143.062 54.8822C143.731 54.6385 144.346 54.2642 144.869 53.781C145.685 53.0616 146.261 52.1097 146.521 51.0533C146.78 49.9968 146.709 48.8864 146.319 47.871C145.951 46.8541 145.284 45.9721 144.406 45.3405C143.529 44.7089 142.48 44.357 141.399 44.331Z",fill:"#1E1E1E",className:"mini-logo-6"}),e.jsx("path",{d:"M157.259 121.871C149.679 121.871 144.189 116.351 144.189 108.641C144.219 105.301 145.55 102.105 147.899 99.731C149.049 98.5624 150.418 97.6324 151.928 96.994C153.439 96.3556 155.06 96.0216 156.699 96.011C158.366 95.9989 160.02 96.3159 161.564 96.944C163.108 97.572 164.514 98.4987 165.699 99.6709C168.106 102.06 169.493 105.29 169.567 108.68C169.642 112.071 168.399 115.358 166.099 117.851C164.967 119.072 163.605 120.058 162.092 120.753C160.579 121.448 158.943 121.838 157.279 121.901L157.259 121.871ZM161.259 109.051C161.288 108.504 161.21 107.958 161.029 107.441C160.76 106.67 160.257 106.002 159.59 105.53C158.924 105.059 158.126 104.807 157.309 104.811C156.73 104.763 156.147 104.838 155.599 105.031C155.045 105.224 154.538 105.531 154.109 105.931C153.683 106.332 153.343 106.815 153.109 107.351C152.872 107.894 152.746 108.479 152.739 109.071C152.72 109.636 152.809 110.199 152.999 110.731C153.19 111.259 153.484 111.744 153.865 112.156C154.247 112.569 154.707 112.9 155.219 113.131C155.729 113.36 156.28 113.482 156.839 113.491C157.418 113.504 157.993 113.399 158.529 113.181C159.072 112.948 159.562 112.608 159.969 112.181C160.394 111.767 160.733 111.275 160.969 110.731C161.176 110.195 161.281 109.625 161.279 109.051H161.259Z",fill:"#1E1E1E",className:"mini-logo-7"}),e.jsx("path",{d:"M60.0092 33.6311C54.7792 33.6311 49.4692 33.6311 44.1992 33.6311C41.0892 33.6311 39.4492 31.8611 39.4292 28.9811C39.3999 28.2984 39.5107 27.6171 39.755 26.979C39.9992 26.3409 40.3716 25.7596 40.8492 25.2711C41.2988 24.776 41.8473 24.3808 42.4592 24.1111C43.0951 23.8603 43.7762 23.7445 44.4592 23.7711C55.1592 23.8311 65.8792 23.9411 76.5792 24.0011C77.5145 23.9573 78.4393 24.213 79.2192 24.7311C80.0108 25.2451 80.6225 25.9931 80.9692 26.8711C81.3379 27.761 81.4204 28.7436 81.2054 29.6825C80.9903 30.6215 80.4884 31.4702 79.7692 32.1111C78.7152 32.9562 77.419 33.4431 76.0692 33.5011C70.7192 33.6511 65.3592 33.5611 60.0092 33.5611V33.6311Z",fill:"#1E1E1E",className:"mini-logo-8"}),e.jsx("path",{d:"M44.1093 67.111C41.5241 67.0783 39.0521 66.0456 37.2119 64.2296C35.3716 62.4136 34.3063 59.9555 34.2393 57.371C34.3376 54.7466 35.4066 52.2522 37.2393 50.371C39.0701 48.5087 41.54 47.4113 44.1493 47.301C46.6437 47.3249 49.0273 48.3351 50.7793 50.111C52.543 51.898 53.5434 54.3004 53.5693 56.811C53.6193 62.561 49.4693 67.111 44.1093 67.111Z",fill:"white",className:"mini-logo-9"}),e.jsx("path",{d:"M145.159 154.731C139.299 154.681 135.569 150.891 135.569 145.101C135.569 139.671 140.009 135.001 145.069 135.051C147.686 135.16 150.159 136.278 151.969 138.171C153.795 140.077 154.834 142.602 154.879 145.241C154.863 146.513 154.598 147.77 154.099 148.941C153.612 150.109 152.897 151.167 151.995 152.055C151.094 152.943 150.024 153.642 148.849 154.111C147.675 154.568 146.419 154.779 145.159 154.731Z",fill:"white",className:"mini-logo-10"}),e.jsx("path",{d:"M32.0292 131.981C30.8016 132.005 29.5824 131.774 28.4492 131.301C27.3194 130.826 26.2985 130.125 25.4492 129.241C24.5848 128.346 23.9091 127.286 23.4625 126.125C23.0158 124.964 22.8073 123.725 22.8492 122.481C22.9557 120.043 23.968 117.732 25.688 116.001C27.408 114.27 29.712 113.243 32.1492 113.121C33.3607 113.139 34.5566 113.397 35.6674 113.881C36.7781 114.365 37.7815 115.066 38.6192 115.941C40.331 117.721 41.2755 120.102 41.2492 122.571C41.2692 128.111 37.5192 131.981 32.0292 131.981Z",fill:"#1E1E1E",className:"mini-logo-11"}),e.jsx("path",{d:"M165.229 77.431C165.24 78.1532 165.108 78.8704 164.839 79.541C164.579 80.2129 164.185 80.825 163.681 81.3406C163.177 81.8562 162.575 82.2645 161.909 82.541C161.246 82.8095 160.535 82.9421 159.819 82.931C159.088 82.9115 158.368 82.7478 157.701 82.4492C157.033 82.1506 156.431 81.723 155.929 81.191C154.897 80.1049 154.336 78.6558 154.366 77.1581C154.395 75.6604 155.015 74.2349 156.089 73.191C156.595 72.6708 157.205 72.2622 157.878 71.9916C158.551 71.721 159.274 71.5943 159.999 71.6198C160.724 71.6452 161.436 71.8222 162.089 72.1393C162.742 72.4564 163.321 72.9066 163.789 73.461C164.757 74.5527 165.272 75.9726 165.229 77.431Z",fill:"white",className:"mini-logo-12"}),e.jsx("path",{d:"M120.119 32.3409C119.431 32.3735 118.743 32.2612 118.1 32.0114C117.458 31.7617 116.875 31.38 116.389 30.8909C115.885 30.402 115.487 29.8135 115.222 29.1628C114.957 28.512 114.83 27.8133 114.849 27.1109C114.799 26.4164 114.891 25.7188 115.119 25.0609C115.331 24.4009 115.671 23.7892 116.119 23.2609C116.569 22.7373 117.12 22.3091 117.738 22.0017C118.356 21.6942 119.03 21.5138 119.719 21.4709C120.452 21.4915 121.175 21.6566 121.844 21.9569C122.513 22.2572 123.116 22.6868 123.619 23.2209C124.643 24.2982 125.204 25.7347 125.179 27.2209C125.207 27.9038 125.091 28.5849 124.839 29.2204C124.588 29.8558 124.206 30.4317 123.719 30.9109C123.242 31.3859 122.669 31.7541 122.039 31.9909C121.43 32.2379 120.776 32.357 120.119 32.3409Z",fill:"white",className:"mini-logo-13"}),e.jsx("path",{d:"M125.769 67.2611C125.79 67.9351 125.673 68.6063 125.424 69.2333C125.176 69.8602 124.802 70.4297 124.325 70.9065C123.848 71.3834 123.278 71.7576 122.651 72.006C122.024 72.2544 121.353 72.3719 120.679 72.3511C120.012 72.416 119.338 72.339 118.702 72.1253C118.066 71.9115 117.482 71.5657 116.989 71.1106C116.496 70.6554 116.105 70.1013 115.842 69.4844C115.578 68.8675 115.448 68.2018 115.459 67.5311C115.403 66.7904 115.495 66.0459 115.729 65.3411C115.968 64.639 116.342 63.9902 116.829 63.4311C117.317 62.8813 117.908 62.4328 118.569 62.1111C119.231 61.8004 119.949 61.6237 120.679 61.5911C123.269 61.6011 125.719 64.3311 125.769 67.2611Z",fill:"white",fillOpacity:"0.5",className:"mini-logo-14"})]})},us=()=>e.jsx("div",{className:"px-4  py-2 ",children:e.jsx("div",{className:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 ",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})}),e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})}),e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})})]})})}),vs=({id:G,selectedContent:q,setSelectedContent:j,sectionData:N,setSectionData:u,setAddSection:k,sections:y,setSections:E,modalTwoError:g,setModalTwoError:$})=>(console.log("Modal two error",g),e.jsxs("div",{className:`border-2 ${g?"border-red-300":"border-neutral-300"} mt-1 py-1 space-y-0.5  inline-block rounded-xl px-2 w-[90%] 2xl:w-4/6`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:G}),e.jsx("label",{className:"py-2 w-16 inline-block text-sm font-medium text-gray-900 dark:text-white",children:"Name :"}),e.jsx("div",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:q.name})]}),e.jsxs("div",{className:"ml-7",children:[e.jsx("label",{className:"w-16 inline-block  text-sm font-medium text-gray-900 dark:text-white",children:"Tagline:"}),e.jsx("input",{value:q.tagline,onChange:F=>{$(!1),j(P=>({...P,tagline:F.target.value}))},type:"text",className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",placeholder:"Enter the tagline Name....",required:!0})]}),e.jsxs("div",{className:"ml-7 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-16 inline-block  text-sm font-medium text-gray-900 dark:text-white",children:"Section :"}),e.jsx("div",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:N.name})]}),e.jsxs("div",{className:"flex justify-center  items-end ",children:[e.jsx("button",{type:"button",className:"text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{$(!1),k(P=>({...P,addSection:!1,modalTwo:!1}));const F=y.map(P=>P.name===N.name?{...P,contents:[...N.contents,q]}:P);E(F),j({content:"",name:"",tagline:"",sectionName:""}),u({name:"",contents:[]})},children:e.jsx(O,{className:` text-xl ${g&&"drop-shadow-2xl"}`,style:{textShadow:g?"red 1px 0 10px":"none"},icon:na})}),e.jsx("button",{type:"button",className:"end-2.5 text-red-500 mx-0 bg-transparent hover:bg-red-500 hover:text-white rounded-lg text-sm w-8 h-8  inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{$(!1),j({content:"",name:"",tagline:"",sectionName:""}),u({name:"",contents:[]}),k(F=>({...F,addSection:!1,modalTwo:!1}))},children:e.jsx(O,{className:" text-xl",icon:ye})})]})]})]})),_n=({isOpen:G,onClose:q,contentPlaceHolder:j,contentPlaceHolderValues:N,setContentPlaceHolderValues:u,handleContentPlaceHolderReplacement:k})=>{if(!G)return null;s.useEffect(()=>{var g;((g=N==null?void 0:N.placeHolderValues)==null?void 0:g.length)===0&&u({...N,placeHolderValues:[...Array(j.length).fill("")]})},[]);const y=(g,$)=>{const F=[...N.placeHolderValues];F[$]=g.target.value,u({...N,placeHolderValues:F})},E=()=>{k()};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-70",style:{zIndex:999999999999999},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg py-5 w-96 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-300 pb-3 px-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Placeholders"}),e.jsx("button",{className:"text-gray-600 w-8 h-8 hover:text-red-600",onClick:q,children:e.jsx(O,{icon:ye,className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-5 pb-5 pt-1  overflow-y-auto max-h-[300px]",children:e.jsx("ul",{className:"list-disc list-inside space-y-3",children:j==null?void 0:j.map((g,$)=>e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("li",{className:"text-gray-800 text-lg",children:g}),e.jsx("input",{type:"text",className:"p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter placeholder value",required:!0,value:(N==null?void 0:N.placeHolderValues[$])||"",onChange:F=>y(F,$)})]},$))})}),e.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-4 px-4",children:[e.jsx("button",{className:"px-6 py-2 w-24 flex justify-center items-center text-sm btn-secondary text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>{q()},children:"Back"}),e.jsx("button",{className:"px-6 py-2 w-24 flex justify-center items-center text-sm btn-secondary text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>{E()},children:"Add"})]})]})})};function In(){const[G,q]=s.useState(!1),[j,N]=s.useState(!1),[u,k]=s.useState(!1),y=va(),[E,g]=s.useState(!1),[$,F]=s.useState(!1),P=Fe(t=>t.pitches.pitches),S=wa(),{setAddNewPitch:f,viewer_id:c,baseURL:m,driveSelection:I,directContent:v,setContentModalOpen:B,setViewContent:R}=s.useContext(ra),[M,V]=s.useState(""),[T,b]=s.useState([]),[K,p]=s.useState(!1),A=s.useRef(null),ce=s.useRef(null),[ne,w]=s.useState(!1),[X,ue]=s.useState(!1),[pe,oe]=s.useState(0),[Le,De]=s.useState(!1),[me,Xe]=s.useState([]),[D,W]=s.useState(0),[H,se]=s.useState([]),[ee,je]=s.useState(!1),Na=["name","email","job title","country"],[$e,ie]=s.useState([]),[ke,nt]=s.useState(!1),[Ue,Ke]=s.useState({placeHolderValues:[],originalContentId:"",folder:"",sasUrl:""}),[Ge,Be]=s.useState(null),[Qe,rt]=s.useState(null),[lt,we]=s.useState(null),[la,Pt]=s.useState(!1),[ht,Se]=s.useState(""),[Ye,Et]=s.useState(!1),[te,Oe]=s.useState({name:"",opportunity_id:"",opportunity_name:"",client_logo:null,created_by:"",account_id:"",account_name:"",title:"",headline:"",description:"",pitch_layout:"",background_image:null}),[de,ze]=s.useState({crmConnections:[],selectedCrmConnectionId:"",selectedCrmConnectionName:""}),[Ve,xt]=s.useState({opportunites:[],selectedOpportunityId:"",selectedOpportunityName:""}),[Te,Ut]=s.useState({layouts:[],selectedLayoutId:"",selectedLayoutName:""}),[We,gt]=s.useState({crmConnections:!1,opportunityName:!1,pitchLayouts:!1}),[qe,pt]=s.useState({accounts:[],selectedAccountId:"",selectedAccountName:""}),[Z,oa]=s.useState(!1),[et,ot]=s.useState(""),[ft,it]=s.useState([]),[bt,tt]=s.useState(!1),[Ot,ct]=s.useState(!1),[fe,Ae]=s.useState({addSection:!1,modalOne:!1,modalTwo:!1,sectionName:""}),[Ze,Tt]=s.useState({modalOne:!1,modalTwo:!1,sectionName:"",index:-1}),[U,ve]=s.useState([]),[_e,Ne]=s.useState({name:"",contents:[]}),[Ie,ae]=s.useState({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),[Re,Me]=s.useState(!1),he=s.useRef(null),[re,L]=s.useState(""),[le,He]=s.useState([]),[At,yt]=s.useState(!1),[Rt,Ga]=s.useState(null),[Qa,Mt]=s.useState(!0),[ia,Ft]=s.useState(!1),[Dt,Bt]=s.useState(null),[Ht,$t]=s.useState(!1),[Ya,Ca]=s.useState(null),[zt,ka]=s.useState(null),[at,Vt]=s.useState(!1),[Sa,Wt]=s.useState(!1),[ca,qt]=s.useState(!1),[Zt,Jt]=s.useState(null),[_a,jt]=s.useState(new Set),[Q,Pe]=s.useState(!1),[Ia,Xt]=s.useState(!1),st=s.useRef(null),[da,wt]=s.useState(0),[Kt,ua]=s.useState(0),[vt,dt]=s.useState({background:!1,loginBackground:!1,clientLogo:!1});s.useEffect(()=>{let t=null;return(()=>{if(M.length>=3&&de.selectedCrmConnectionId&&!ne){const o=new URL(m).hostname;console.log("Setting up WebSocket for opportunity search"),t=new WebSocket(`wss://${o}/wss`),A.current=t,t.onopen=()=>{console.log("WebSocket connected for opportunity search"),t.send(JSON.stringify({type:"salesforce_search",payload:{crmConnectionId:de.selectedCrmConnectionId,objectName:"Opportunity",searchTerm:M,fieldNames:["Name","Description","Id"]}})),p(!0)},t.onmessage=d=>{var _;const h=JSON.parse(d.data);h.status==="success"&&((_=h.searchResults)!=null&&_.searchRecords)&&(b(h.searchResults.searchRecords),p(!1))},t.onerror=d=>{console.error("WebSocket error:",d),p(!1)},t.onclose=()=>{console.log("WebSocket disconnected"),A.current=null}}})(),()=>{t&&(console.log("Cleanup: Closing WebSocket"),t.close(),t=null,A.current=null)}},[M,de.selectedCrmConnectionId,m]);const La=t=>{ct(!0),pt(r=>({...r,selectedAccountId:t.Id,selectedAccountName:t.Name})),Oe(r=>({...r,account_id:t.Id,account_name:t.Name})),F(!0),g(!0),A.current&&(A.current.close(),A.current=null),it([]),ot(t.Name)},Pa=t=>{w(!0),xt(r=>({...r,selectedOpportunityId:t.Id,selectedOpportunityName:t.Name})),A.current&&(A.current.close(),A.current=null),b([]),V(t.Name),_s(t.Id),as(t.Id)};s.useEffect(()=>{let t=null;const r=()=>{A.current&&(A.current.close(),A.current=null);const d=Z?et:M,h=Z?Ot:ne;if(d.length>=3&&de.selectedCrmConnectionId&&!h){const _=new URL(m).hostname;console.log(`Setting up WebSocket for ${Z?"account":"opportunity"} search`),t=new WebSocket(`wss://${_}/wss`),A.current=t,t.onopen=()=>{console.log(`WebSocket connected for ${Z?"account":"opportunity"} search`),t.send(JSON.stringify({type:"salesforce_search",payload:{crmConnectionId:de.selectedCrmConnectionId,objectName:Z?"Account":"Opportunity",searchTerm:d,fieldNames:["Name","Description","Id"]}})),Z?tt(!0):p(!0)},t.onmessage=z=>{var ta;const Ee=JSON.parse(z.data);Ee.status==="success"&&((ta=Ee.searchResults)!=null&&ta.searchRecords)&&(Z?(it(Ee.searchResults.searchRecords),tt(!1)):(b(Ee.searchResults.searchRecords),p(!1)))},t.onerror=z=>{console.error("WebSocket error:",z),Z?tt(!1):p(!1)},t.onclose=()=>{console.log("WebSocket disconnected"),A.current=null,Z?tt(!1):p(!1)}}},o=setTimeout(()=>{r()},300);return()=>{clearTimeout(o),t&&(console.log("Cleanup: Closing WebSocket"),t.close(),t=null,A.current=null)}},[Z,et,M,de.selectedCrmConnectionId,m,Ot,ne]);const Ea=t=>{Ca(t)},Ua=()=>{yt(!0)},Oa=()=>{yt(!1)},ma=t=>{const r=t.target.files[0];Be(r),dt(o=>({...o,background:!!r}))},Nt=t=>{const r=t.target.files[0];we(r),dt(o=>({...o,loginBackground:!!r}))},Ta=t=>{const r=t.target.files[0];rt(r),dt(o=>({...o,clientLogo:!!r}))},Aa=t=>{const r=URL.createObjectURL(t);He(o=>[...o,{video:t,tagline:re,url:r}]),yt(!1),Mt(!0),L("")},Gt=t=>{L(t),Ft(!0)},Qt=(t,r)=>{He(o=>o.map((d,h)=>h===t?{...d,tagline:r}:d))},Yt=t=>{const r=le.filter((o,d)=>d!==t);He(r)},es=t=>{Yt(t)},Ra=t=>{const r=le[t].url;r&&(Bt(r),ka(t),$t(!0))},Ce=()=>{$t(!1),Bt(null)},Ct=window.location.href,be=t=>{jt(r=>{const o=new Set(r);return o.has(t.id)?o.delete(t.id):(o.add(t.id),Jt(t)),Vt(o.size>0),o})},[Ma,ut]=s.useState(""),Fa=()=>{const t=U.findIndex(r=>r.name===Ie.sectionName);if(t!==-1&&Zt){const r={name:Zt.name,content:Zt.id,tagline:Ie.tagline,arrangement:U[t].contents.length+1};if(U[t].contents.some(d=>d.name===r.name))qt(!0),ge.error("Content already present in section"),jt(new Set),ae(d=>({...d,tagline:""}));else{const d=[...U];d[t].contents.push(r),jt(new Set),ve(d),Jt(null),Vt(!1),ae(h=>({...h,tagline:""}))}}Wt(!1),Vt(!1)};s.useEffect(()=>{U.length>0&&(ut(U[0].name),ae(t=>({...t,sectionName:U[0].name})))},[U,ae]),s.useEffect(()=>{Ae(t=>({...t,sectionName:_e==null?void 0:_e.name}))},[U.length]);const ha=t=>{const r=t.target.value;ut(r),ae(o=>({...o,sectionName:r}))},[ea,Da]=s.useState([]),xa=async()=>{try{if(!J){const t=await S.get("/retrieve-pitch-content-recommendation",{params:{viewer_id:c,opportunityId:Z?qe.selectedAccountId:Ve.selectedOpportunityId,originURL:Ct},withCredentials:!0});Da(t.data),N(!1)}}catch(t){console.error("Error fetching pitch content:",t)}},Ba=["","name","created_by","Mimetype","Description","Folder"];s.useEffect(()=>{const t=st.current;if(!t)return;t.querySelectorAll("th").forEach(o=>{const d=document.createElement("div");d.className="resizer",d.style.height=`${t.offsetHeight}px`,o.appendChild(d);const h=Ee=>{wt(Ee.clientX),ua(o.offsetWidth),document.addEventListener("mousemove",_),document.addEventListener("mouseup",z)},_=Ee=>{const ta=Ee.clientX-da;o.style.width=`${Kt+ta}px`},z=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",z)};return d.addEventListener("mousedown",h),()=>{d.removeEventListener("mousedown",h)}})},[Kt,da]);const[Ha,mt]=s.useState(!1),n=()=>{i(),Je(),f(t=>({...t,addPitchPopUp:!0}))},[a,l]=s.useState(""),i=async()=>{mt(!0),gt({...We,crmConnections:!0});try{const r=(await S.post("/view-crm-connections",{viewer_id:c},{withCredentials:!0})).data.connections.filter(d=>d.is_primary),o=r.map(d=>d.id);ze(d=>({...d,crmConnections:r})),l(o)}catch{ge.error("Failed to fetch CRM connections")}finally{gt({...We,crmConnections:!1}),mt(!1)}},x=async t=>{ue(!0);try{const r=t.target.value,[o,d]=r.split(" (").map(_=>_.replace(")","")),h=de.crmConnections.find(_=>_.crm_username===o&&_.name===d);if(h){const _=h.id;ze(z=>({...z,selectedCrmConnectionId:_,selectedCrmConnectionName:r})),console.log(_),console.log(r)}else console.error("selected connection not found")}catch(r){console.error("Error handling CRM connection change:",r)}finally{ue(!1)}},C=()=>{const r=[{field:"crmConnection",check:()=>J?!0:de.selectedCrmConnectionName!=="",message:"Please select a CRM connection"},{field:"opportunity",check:()=>J?!0:Z?qe.selectedAccountName!=="":Ve.selectedOpportunityName!=="",message:Z?"Please select an Account":"Please select an Opportunity"},{field:"name",check:()=>te.name!=="",message:"Please enter the pitch name"},{field:"layout",check:()=>Te.selectedLayoutName!=="",message:"Please select a pitch layout"},{field:"title",check:()=>te.title!=="",message:"Please enter a title"},{field:"headline",check:()=>te.headline!=="",message:"Please enter a headline"},{field:"description",check:()=>te.description!=="",message:"Please enter a description"},{field:"background",check:()=>vt.background,message:"Please select a background image"},{field:"loginBackground",check:()=>vt.loginBackground,message:"Please select a login background image"},{field:"clientLogo",check:()=>J?!0:vt.clientLogo,message:"Please select a client logo"}].find(o=>!o.check());return r?(ge.error(r.message),{passed:!1,failedField:r.field,message:r.message}):{passed:!0,failedField:null,message:null}},Y=()=>{k(!0),console.log("Form Submission - Images Status:"),console.log("Background Image:",Ge),console.log("Login Background:",lt),console.log("Client Logo:",Qe),console.log("TOF Status:",J),console.log("Step1Data:",te);const t=C();if(!t.passed){const r=document.getElementById(t.failedField);r&&r.focus();return}mt(!0),setTimeout(()=>{xa(),oe(2),mt(!1)},3e3)},Je=async()=>{gt({...We,pitchLayouts:!0});try{const t=await S.get("/all-pitch-layout-names",{params:{viewer_id:c},withCredentials:!0});Ut(r=>({...r,layouts:t.data.pitchLayoutNames}))}catch{ge.error("Failed to fetch Pitch Layouts")}finally{gt({...We,pitchLayouts:!1}),N(!1)}},$a=async t=>{const r=H.map(o=>o.Id);try{const o=await S.post("/updatePitchContacts",{viewerId:c,pitchId:t,contactIds:r},{withCredentials:!0});console.log("Pitch conatcted updated ")}catch(o){console.log("Error from  the edit-pitch-with-sections-and-contents",o)}},Ns=async()=>{if(N(!0),te.name.length>70){ge.error("Name should not exceed 70 characters.");return}if(!Ge||!lt||!Qe&&!J){N(!1),ge.error("Error: All fields must be filled out (Background Image, Background Login Image, Client Logo)");return}const t=[];for(let h=0;h<U.length;h++){const _=[];for(let z=0;z<U[h].contents.length;z++)_.push({...U[h].contents[z],arrangement:z+1});t.push({...U[h],contents:_})}const r=[];for(let h=0;h<U.length;h++)r.push({...U[h],order:h+1});const o={name:te.name,opportunity_id:Z?qe.selectedAccountId:Ve.selectedOpportunityId,created_by:c,title:te.title,headline:te.headline,description:te.description,pitch_layout:Te.selectedLayoutId,sections:r,public_access:D},d=new FormData;try{const _=(await S.post("/create-pitch-with-sections-and-contents",o,{withCredentials:!0})).data.pitch.id;D==0&&$a(_);const z=new FormData;z.append("pitch_id",_),z.append("background_image",Ge),z.append("background_login_image",lt),z.append("client_logo",Qe),d.append("created_by",c),d.append("pitch_id",_);const Ee=le.map(kt=>kt.tagline);if(d.append("tagline",JSON.stringify(Ee)),le.forEach(kt=>{d.append("files",kt.video)}),await S.post("/upload-bg-and-client-logo",z,{withCredentials:!0})&&(y(sa({sortColumn:"name",sortOrder:"ASC",viewer_id:c,baseURL:m})),oe(0)),le.length>0){const kt=await S.post("/highlight-video-upload",d,{withCredentials:!0});kt&&console.log(kt.data)}ge.success("Pitch created successfully!")}catch(h){console.error("Error:",h),ge.error("Failed to create pitch")}finally{Oe({name:"",opportunity_id:"",opportunity_name:"",account_id:"",account_name:"",client_logo:null,created_by:"",title:"",headline:"",description:"",pitch_layout:"",background_image:null}),N(!1),Wa(!1),k(!1),ze(h=>({...h,selectedCrmConnectionName:""})),xt(h=>({...h,selectedOpportunityName:""})),pt(h=>({...h,selectedAccountId:"",selectedAccountName:""})),Ut(h=>({...h,selectedLayoutId:"",selectedLayoutName:""})),Ne({name:"",contents:[]}),ae({content:"",name:"",tagline:"",sectionName:""}),ve([]),se([]),W(0),He([]),g(!1)}},za=t=>{const r=(t==null?void 0:t.id)!=="-1";ae(o=>({...o,content:r?(t==null?void 0:t.id)||t.contentId:"",name:r?(t==null?void 0:t.name)||t.contentName:"",sectionName:r?_e.name:"",arrangement:r?_e.contents.length+1:""})),Ae(o=>({...o,modalOne:!1,modalTwo:r})),r||Ne({name:"",contents:[]})},Cs=(t,r)=>{ae(o=>({...o,content:t,name:r,sectionName:_e.name})),Me(!1)},Va=()=>{oe(0),Oe({name:"",opportunity_id:"",opportunity_name:"",account_id:"",account_name:"",client_logo:null,created_by:"",title:"",headline:"",description:"",pitch_layout:"",background_image:null}),ze(t=>({...t,selectedCrmConnectionId:"",selectedCrmConnectionName:""})),xt(t=>({...t,selectedOpportunityId:"",selectedOpportunityName:""})),pt(t=>({...t,selectedAccountId:"",selectedAccountName:""})),Ut(t=>({...t,selectedLayoutId:"",selectedLayoutName:""})),oa(!1),ct(!1),ot(""),it([]),w(!1),V(""),b([]),k(!1),N(!1),mt(!1),Wa(!1),g(!1),Ne({name:"",contents:[]}),ae({content:"",name:"",tagline:"",sectionName:""}),ve([]),se([]),W(0),He([]),yt(!1),L(""),Ft(!1),Bt(null),$t(!1),dt({background:!1,loginBackground:!1,clientLogo:!1}),Be(null),we(null),rt(null),A.current&&(A.current.close(),A.current=null),De(!1),qt(!1),Pe(!1),ns(""),Se(""),Pt(!1)},ks=(t,r)=>{const o=[];for(let d=0;d<U.length;d++)if(Ze.sectionName===U[d].name){const h=[];for(let _=0;_<U[d].contents.length;_++)_==Ze.index?h.push(Ie):h.push(U[d].contents[_]);o.push({...U[d],contents:h})}else o.push(U[d]);ve(o),ae({content:"",name:"",tagline:"",sectionName:""}),Tt({editSection:!1,modalOne:!1,modalTwo:!1,sectionName:"",index:-1})},Ss=(t,r)=>{const o=[];for(let d=0;d<U.length;d++)if(r===U[d].name){let h=1;const _=[];for(let z=0;z<U[d].contents.length;z++)t.arrangement!=U[d].contents[z].arrangement&&(_.push({...U[d].contents[z],arrangement:h}),h++);o.push({...U[d],contents:_})}else o.push(U[d]);console.log(o),ve(o)},ts=(t,r,o)=>{console.log(t),ve(U.map(d=>{if(d.name===t){const h=[...d.contents];return o==="up"&&r>0?[h[r],h[r-1]]=[h[r-1],h[r]]:o==="down"&&r<h.length-1&&([h[r],h[r+1]]=[h[r+1],h[r]]),{...d,contents:h}}return d}))},ga=(t,r)=>{ve(o=>{const d=o.findIndex(Ee=>Ee.name===r);if(d===-1)return o;const h=t==="up"?d-1:t==="down"?d+1:-1;if(h<0||h>=o.length)return o;const _=[...o],z=_[d];return _[d]=_[h],_[h]=z,_})},as=t=>{if(P.some(o=>o.opportunity_id===t&&o.active)){q(!0),F(!1),g(!1);return}q(!1),F(!0),g(!0)},_s=async t=>{as(t)},[J,Wa]=s.useState(!1),[xe,ss]=s.useState(!1),[En,ns]=s.useState("");s.useEffect(()=>{J?(g(!0),ze(t=>({...t,selectedCrmConnectionName:""})),xt(t=>({...t,selectedOpportunityName:""}))):g(!1)},[J]);const Is=async()=>{ss(!0);try{console.log(ht);const t=await S.post(`${m}/generateAIOpportunityDetails`,{viewerId:c,originURL:Ct,opportunityId:Z?qe.selectedAccountId:Ve.selectedOpportunityId,focus_area:ht},{headers:{"Content-Type":"application/json"},withCredentials:!0});console.log("ai data",t.data.aiContent),ns(t.data.aiContent),Ls(t.data.aiContent)}catch(t){console.error("Error generating AI opportunity details:",t)}finally{ss(!1),Se("")}},pa=t=>{const r=/\*\*[^*]+\:\*\*/g,o=/"[^"]+":/g,d=/[^":]+:/g,h=/^[^\n]+\:/;return t.replace(r,"").replace(o,"").replace(d,"").replace(h,"").trim()},Ls=t=>{const r=t.split(`

`),o=pa(r[0]),d=pa(r[1]),h=pa(r[2]),_=pa(h);Oe(z=>({...z,name:o,title:o,headline:d,description:_}))},qa=Gs([()=>{oe(0),Oe({name:"",opportunity_id:"",opportunity_name:"",client_logo:null,created_by:"",title:"",headline:"",description:"",pitch_layout:"",background_image:null})}]),Ps=async()=>{je(!0);try{if(!J){const t=await S.post("/getContactsForOpportunityAccount",{viewerId:c,opportunityId:Z?qe.selectedAccountId:Ve.selectedOpportunityId,accountId:Z?qe.selectedAccountId:null,originURL:Ct},{withCredentials:!0});Xe(t.data)}}catch(t){console.log("Error fetching contacts",t.message)}finally{je(!1)}},rs=t=>{J||(t.target.id==="public"?W(1):t.target.id==="restricted"&&W(0))},Es=()=>(J||(ze(t=>({...t,selectedCrmConnectionId:"",selectedCrmConnectionName:""})),V(""),ot(""),b([]),it([]),w(!1),ct(!1),rt(null),dt(t=>({...t,clientLogo:!1})),he.current&&(he.current.value=""),W(1)),J),Us=async t=>{ae(t),console.log("Item",t);try{if(Xt(!0),t!=null&&t.mimetype){if(t!=null&&t.mimetype.includes("application/vnd")||t!=null&&t.mimetype.includes("application/msword")||t!=null&&t.mimetype.includes("video/")){const o=(await S.post("/open-content",{contentId:t==null?void 0:t.id,viewerId:c},{withCredentials:!0})).data.sasUrl;R(o)}else if(t.mimetype.includes("application/url"))R(t.content);else{const r=await S.post("/open-content",{contentId:t.id,viewerId:c},{responseType:"blob",withCredentials:!0}),o=new Blob([r.data],{type:`${t.mimetype}`});R(o)}B(!0)}else{if(["png","jpg","jpeg","webp","bmp","gif","svg"].some(r=>t.name.includes(r))){const r=await S.post("/open-content",{contentId:(t==null?void 0:t.content)||(t==null?void 0:t.id)||(t==null?void 0:t.contentId),viewerId:c},{responseType:"blob",withCredentials:!0}),o=new Blob([r.data],{type:`${r.data.type}`}),d=URL.createObjectURL(o);console.log("Url",d),R(d)}else if(t.name.includes(".mp4")){const r=await S.post("/open-content",{contentId:(t==null?void 0:t.content)||(t==null?void 0:t.id)||(t==null?void 0:t.contentId),viewerId:c},{withCredentials:!0});console.log("Res data",r.data),r.data&&r.data.sasUrl?R(r.data.sasUrl):console.error("sasURL not found in response:",r.data)}else{const r=await S.post("/open-content",{contentId:(t==null?void 0:t.content)||(t==null?void 0:t.id)||(t==null?void 0:t.contentId),viewerId:c},{responseType:"blob",withCredentials:!0}),o=new Blob([r.data],{type:"application/pdf"}),d=URL.createObjectURL(o);R(d),console.log("Res data",d)}B(!0)}}catch(r){console.error(r)}finally{Xt(!1)}},Os=()=>{B(!1),qa.current};if(j)return e.jsx("div",{children:e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsx("div",{className:"bg-transparent p-6 rounded-md z-50 w-auto",children:e.jsx(ja,{visible:!0,height:"40",width:"40",color:"#075985",ariaLabel:"grid-loading",radius:"12.5",wrapperStyle:{},wrapperClass:"grid-wrapper"})})]})});if(Ha)return e.jsx("div",{children:e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsx("div",{className:"bg-transparent p-6 rounded-md z-50 w-auto",children:e.jsx(ja,{visible:!0,height:"40",width:"40",color:"#075985",ariaLabel:"grid-loading",radius:"12.5",wrapperStyle:{},wrapperClass:"grid-wrapper"})})]})});const Ts=async()=>{const t={};Ue.placeHolderValues.map((o,d)=>{t[$e[d]]=o}),console.log("Replacements",t);const r={originalContentId:Ue.originalContentId,folder_id:Ue.folder,replacements:t,sasUrl:Ue.sasUrl,created_by:c};console.log("Data is here :",r);try{const o=await S.post("/render-document-with-placeholders",r);if(o.data.result){const d={id:o.data.result.newContentId,name:o.data.result.contentName};za(d),Ke({...Ue,placeHolderValues:[]}),nt(!1)}}catch(o){console.log("Error in content place holder replacement",o)}},As=()=>{switch(pe){case 1:return e.jsx("div",{children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-gray-500 bg-opacity-50",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow w-[95%] md:w-[90%] lg:w-[85%] xl:w-[80%] max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white border-b px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create Pitch"}),e.jsx("button",{type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center",onClick:Va,children:e.jsx(O,{className:"text-red-500 text-2xl",icon:ye})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsx("form",{onSubmit:t=>t.preventDefault(),children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"w-full lg:w-[55%] space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"block text-sm font-medium mt-2 mb-2",children:"Top of Funnel Pitch"}),e.jsxs("label",{className:"flex cursor-pointer items-center ms-2",children:[e.jsx("input",{type:"checkbox",value:"",className:"sr-only peer",checked:J,onClick:()=>Es(),onChange:()=>Wa(t=>!t)}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),e.jsxs("div",{className:"flex items-center mb-2 mt-2 space-x-2",children:[e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900 inline-block w-32 text-left",children:Z?"Account Search":"Opportunity Search"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:Z,onChange:t=>{oa(t.target.checked),V(""),ot(""),b([]),it([]),w(!1),ct(!1),A.current&&(A.current.close(),A.current=null)}}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"w-36 inline-block text-sm font-medium text-gray-900 dark:text-white",children:"CRM Connection :"}),We.crmConnections?e.jsx("select",{className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${J?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,disabled:!0,children:e.jsx("option",{value:"Loading",children:"Loading Connections..."})}):e.jsxs("select",{className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${J?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,required:!0,value:de.selectedCrmConnectionName,onChange:x,disabled:J,title:J?"Disabled in Top of Funnel mode":de.selectedCrmConnectionName||"Select your CRM connection",children:[e.jsx("option",{value:"",disabled:!0,children:J?"Disabled in Top of Funnel mode":"Select Connection"}),!J&&de.crmConnections.length>0?de.crmConnections.map(t=>e.jsx("option",{value:`${t.crm_username} (${t.name})`,title:`${t.crm_username} (${t.name})`,children:`${t.crm_username} (${t.name})`},t.id)):e.jsx("option",{value:"",disabled:!0,children:"No Connections Available"})]}),e.jsx("div",{className:"h-5",children:!J&&u&&de.selectedCrmConnectionName===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select an Crm_connection."})})]}),e.jsx("div",{className:"relative w-full",children:e.jsxs("div",{className:"flex w-full space-x-0 items-center",children:[e.jsx("label",{className:"w-36 inline-block text-sm font-medium text-gray-900 dark:text-white",children:Z?"Account Name :":"Opportunity Name :"}),e.jsx("div",{className:"flex flex-col",children:We.opportunityName?e.jsx("select",{id:"opportunityDropdown",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${J?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,disabled:!0,children:e.jsx("option",{value:"Loading",children:"Loading Opportunities..."})}):e.jsxs("div",{ref:ce,className:"relative w-80",children:[e.jsx("input",{type:"text",value:Z?et:M,onChange:t=>{Z?(ot(t.target.value),ct(!1)):(V(t.target.value),w(!1))},placeholder:Z?"Search accounts...":"Search opportunities...",disabled:!de.selectedCrmConnectionId||J,className:`w-full border text-gray-900 text-sm rounded-lg p-2.5 ${!de.selectedCrmConnectionId||J?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,title:J?"Disabled in Top of Funnel mode":de.selectedCrmConnectionId?"":"Please select a CRM connection first"}),!J&&e.jsxs(e.Fragment,{children:[(Z&&et.length>=3&&ft.length>0||!Z&&M.length>=3&&T.length>0)&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Z?ft.map(t=>e.jsx("div",{onClick:()=>La(t),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",children:t.Name},t.Id)):T.map(t=>e.jsx("div",{onClick:()=>Pa(t),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",children:t.Name},t.Id))}),(Z&&et.length>=3&&!bt&&!Ot&&ft.length===0||!Z&&M.length>=3&&!K&&!ne&&T.length===0)&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:["No"," ",Z?"accounts":"opportunities"," ","found"]})}),(Z&&bt||!Z&&K)&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(jn,{className:"animate-spin text-neutral-600 text-lg"})})]})]})}),e.jsxs("div",{className:"flex items-center w-16 justify-center space-x-2",children:[e.jsx("button",{className:"bg-white focus:outline-none focus:ring-2 focus:ring-white dark:bg-white dark:focus:ring-white hover:border-white transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-white",onClick:()=>{Is()},disabled:xe,children:xe?e.jsx("div",{className:"flex items-center h-5 w-5",children:e.jsx(ws,{})}):e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:xs,alt:"RevSpire Logo",className:"w-5 h-5 transition-opacity -opacity-30"})})}),e.jsx("button",{className:"h-5 w-5 flex text-2xl relative z-[9999999999999]",disabled:xe,onClick:()=>Pt(!0),children:e.jsx(fs,{})})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pitch Name :"}),e.jsx("input",{value:te.name,onChange:t=>{Oe(r=>({...r,name:t.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${xe?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Enter the Pitch Name....",disabled:xe,title:xe?"Loading...":te.name||"Enter the name for your pitch"}),e.jsx("div",{className:"h-5 mt-0.5",children:u&&te.name===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please enter the pitch name."})})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pitch Layout :"}),We.pitchLayouts?e.jsx("select",{className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${xe?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,disabled:xe,children:e.jsx("option",{value:"Loading",children:"Loading Layouts..."})}):e.jsxs("select",{className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:Te.selectedLayoutName,onChange:t=>{const r=t.target.value,o=Te.layouts.find(d=>d.name===r).id;Ut(d=>({...d,selectedLayoutId:o,selectedLayoutName:r}))},title:Te.selectedLayoutName||"Select a pitch layout",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Layout"}),Te.layouts.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),e.jsx("div",{className:"h-5 mt-0.5",children:u&&Te.selectedLayoutName===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch Layout."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title :"}),e.jsx("input",{value:te.title,onChange:t=>{Oe(r=>({...r,title:t.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${xe?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Title...",disabled:xe,title:xe?"Loading...":te.title||"Enter the name for your pitch"}),e.jsx("div",{className:"h-5 mt-0.5",children:u&&te.title===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch Title"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Headline :"}),e.jsx("input",{value:te.headline,onChange:t=>{Oe(r=>({...r,headline:t.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${xe?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Headline...",disabled:xe,title:xe?"Loading...":te.headline||"Enter the name for your pitch"}),e.jsx("div",{className:"h-5 mt-0.5",children:u&&te.headline===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch headline"})})]}),e.jsxs("div",{className:" flex items-center",children:[e.jsx("label",{className:"w-36 inline-block  text-start text-sm font-medium text-gray-900 dark:text-white",children:"Description :"}),e.jsx("textarea",{value:te.description,onChange:t=>{Oe(r=>({...r,description:t.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm h-40 text-start rounded-lg inline-block p-2.5 ${xe?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Description...",disabled:xe})]}),e.jsx("div",{className:"h-5 mt-0.5",children:u&&te.description===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please wrtie description."})})]}),e.jsxs("div",{className:"w-full lg:w-[45%] space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"w-36 inline-block text-sm font-medium text-gray-900",children:"Background:"}),e.jsx("div",{className:"flex-grow",children:e.jsx("input",{id:"backgroundImage",onChange:ma,type:"file",accept:"image/*,.svg",className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5"})})]}),e.jsx("div",{className:"h-5 ml-[150px] mt-1",children:u&&!Ge&&e.jsx("p",{className:"text-red-600 text-xs",children:"Please select a Background Image"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"w-36 inline-block text-sm font-medium text-gray-900 tracking-tighter",children:"Login Background:"}),e.jsx("div",{className:"flex-grow",children:e.jsx("input",{id:"backgroundLoginImage",onChange:Nt,type:"file",accept:"image/*,.svg",className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5"})})]}),e.jsx("div",{className:"h-5 ml-[150px] mt-1",children:u&&!lt&&e.jsx("p",{className:"text-red-600 text-xs",children:"Please select a Login Background Image"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"w-36 inline-block text-sm font-medium text-gray-900 tracking-tighter",children:"Client Logo:"}),e.jsx("div",{className:"flex-grow",children:e.jsx("input",{ref:he,type:"file",onChange:Ta,accept:"image/*,.svg",disabled:J,title:J?"Disabled in Top of Funnel mode":"Select client logo",className:`w-80 border text-sm rounded-lg p-2.5 
    ${J?"bg-gray-200 border-gray-400 text-gray-400 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-gray-900"}`})})]}),e.jsx("div",{className:"h-5 ml-[150px] mt-1",children:u&&!Qe&&!J&&e.jsx("p",{className:"text-red-600 text-xs",children:"Please select a Client Logo"})})]})]})]})})})}),e.jsx("div",{className:"space-x-16 flex justify-center p-2 border-t mb-2",children:e.jsxs("div",{className:" mt-2 flex space-x-[120px] justify-between  ",children:[e.jsx("button",{className:"flex px-4 py-2 w-20 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:Va,children:"Cancel"}),e.jsx("button",{className:"px-6 py-2 w-20 flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",disabled:xe,onClick:()=>{k(!0),Ps(),Y()},children:"Next"})]})})]})})});case 2:return e.jsx("div",{className:"",children:e.jsx("div",{className:" fixed inset-0 flex items-center justify-center z-50  bg-gray-500 bg-opacity-50 ",tabIndex:"-1",children:e.jsxs("div",{ref:qa,className:"relative bg-white rounded-lg shadow  dark:bg-gray-700 lg:w-[83vw] xl:w-[90vw]",children:[Ia?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 ",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsx(St,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{content:Ie,isOpen:B,closeModal:Os,setSelectedContent:ae,ref:qa}),e.jsx(_n,{isOpen:ke,onClose:()=>nt(!1),contentPlaceHolder:$e,contentPlaceHolderValues:Ue,setContentPlaceHolderValues:Ke,handleContentPlaceHolderReplacement:Ts})]}),e.jsxs("div",{className:"flex  items-center justify-between p-4 md:p-3  border-b rounded-t  dark:border-gray-600 pl-1 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white ml-2 pl-2",children:"Create New"}),e.jsx("button",{type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:Va,children:e.jsx(O,{className:"text-red-500 text-2xl",icon:ye})})]}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"w-1/2 px-2",children:e.jsx("div",{className:"flex place-content-evenly flex-col  ",children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:"border-2 rounded-md px-4 py-1 btn-secondary mx-2 mt-2",onClick:Ua,children:"Add Highlight"}),e.jsx("div",{className:`${le.length==0?"overflow-hidden border-2 p-2 m-2 border-gray-300  rounded-md":"overflow-y-auto border-2 p-2 m-2 border-gray-300  rounded-md"} overflow-x-hidden`,style:{height:"20vh"},children:e.jsxs("div",{className:"align-center  ",children:[le.length===0&&e.jsx(us,{}),At&&e.jsx(js,{onCancel:Oa,highlightVideoFiles:Aa,videoTaglines:Gt,onVideoReady:Ea}),e.jsxs("div",{className:"",children:[ia&&e.jsx("div",{className:" space-y-1",children:le.map((t,r)=>e.jsx("div",{children:e.jsxs("div",{className:"flex border bg-neutral-100 border-neutral-300 items-center rounded-md gap-3 px-4 py-0.5 justify-between w-full ",children:[e.jsxs("div",{className:" flex items-center",children:[e.jsx("span",{className:"border-neutral-400 flex border  size-[20px]   justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:r+1}),e.jsx("label",{className:"w-40  ml-10 truncate text-sm font-medium mx-4 text-gray-900 dark:text-white",children:"Highlight video Tagline :"}),Rt===r?e.jsxs("span",{children:[" ",e.jsx("input",{type:"text",className:" relative w-60 ml-2",value:t.tagline,onChange:o=>Qt(r,o.target.value),onBlur:()=>Ga(null)})]}):e.jsx("span",{className:" ",children:t.tagline})]}),e.jsxs("span",{className:"  relative",children:[e.jsx("button",{className:"px-2 text-cyan-600 hover:text-cyan-700",onClick:()=>Ra(r),children:e.jsx(gs,{})}),e.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:()=>{Yt(r),es(r)},children:e.jsx(ya,{})})]})]})},r))}),Ht&&Dt&&e.jsx("div",{className:" border-2 p-2 rounded-md mt-1",children:e.jsx("div",{className:" relative w-[400px] h-[400px] mt-[20px] ",children:e.jsx("div",{className:"fixed inset-0 flex flex-col items-center justify-center z-50 bg-gray-500 bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl flex flex-col items-center justify-center ",children:[e.jsx("div",{className:"absolute top-0 mt-20 m-4",children:e.jsx("button",{className:"text-white bg-red-500 mx-10 rounded-full w-10 h-10",onClick:Ce,children:e.jsx(O,{icon:ye})})}),e.jsx("video",{src:Dt,controls:!0,autoPlay:!0,loop:!0,className:"bg-black",style:{maxWidth:"80%",maxHeight:"80%"}}),zt!==null&&e.jsx("div",{className:"flex mt-2 border bg-neutral-100 border-neutral-300 items-center rounded-md gap-3 px-4 py-0.5 justify-between w-[80%] ",children:e.jsxs("div",{className:" flex items-center",children:[e.jsx("label",{className:"truncate text-sm font-medium mx-4 text-gray-900 dark:text-white",children:"Video Tagline :"}),e.jsx("span",{className:" text-black",children:re})]})})]})})})})]})]})}),e.jsx("div",{className:" h-full",children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:"border-2 rounded-md btn-secondary px-4 py-1  mx-2 ",disabled:fe.modalOne||fe.modalTwo||Ze.modalOne||Ze.modalTwo,onClick:()=>{Et(!0),Ne({name:"",contents:[]})},children:"Add Section"}),e.jsxs("div",{className:`${U.length==0?"overflow-hidden border-2 p-2 m-2 border-gray-300  rounded-md":"overflow-y-auto border-2 m-2 rounded-md  p-2 border-gray-300"} overflow-x-hidden `,style:{height:"42vh"},children:[e.jsx("div",{className:"align-center",children:U.length===0&&!Ye&&e.jsx(us,{})}),e.jsxs("div",{className:`overflow-y-auto h-auto ${U.length>0?" rounded-md space-y-1  ":""}`,children:[U.length>0&&U.map((t,r)=>e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"inline-block rounded-2xl",children:[e.jsx("span",{className:"font-semibold",children:`Section ${r+1} Title : `}),e.jsx("input",{className:`${t.name.length>0?"":"border-red-500"} py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500`,value:t.name,onChange:o=>{const d=o.target.value;ve(h=>h.map((_,z)=>z===r?{..._,name:d}:_))}}),e.jsx("button",{disabled:t.name.length===0||Ze.index!=-1,className:"h-8 w-8 mx-1  text-white bg-cyan-500 rounded-lg hover:bg-cyan-600 transition-colors border border-white",onClick:()=>{fe.modalTwo?Pe(!0):(Ae(o=>({...o,modalOne:!0,modalTwo:!1,sectionName:t.name})),Ne(t))},children:e.jsx(O,{icon:ba,className:""})}),e.jsx("button",{className:"h-8 w-8  text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{Ae(o=>({...o,addSection:!1,modalOne:!1,modalTwo:!1})),Ne({name:"",contents:[]}),ae({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),ve(o=>o.filter(d=>d.name!==t.name))},children:e.jsx(O,{icon:ye})}),U.length>1&&e.jsxs(e.Fragment,{children:[r===0&&e.jsx("button",{className:"mx-2 text-gray-600 hover:text-gray-800",onClick:()=>ga("down",t.name),disabled:U.length<=1,children:e.jsx(O,{icon:_t})}),r===U.length-1&&e.jsx("button",{className:" mx-2 text-gray-600 hover:text-gray-800",onClick:()=>ga("up",t.name),disabled:U.length<=1,children:e.jsx(O,{icon:It})}),r>0&&r<U.length-1&&e.jsxs("div",{className:" inline-block mx-2",children:[e.jsx("button",{className:"  text-gray-600  hover:text-gray-800",onClick:()=>ga("up",t.name),children:e.jsx(O,{icon:It})}),e.jsx("button",{className:" mx-2 text-gray-600 hover:text-gray-800",onClick:()=>ga("down",t.name),children:e.jsx(O,{icon:_t})})]})]})]}),t.contents.map((o,d)=>e.jsxs("div",{className:"flex flex-col mt-1",children:[Ze.index===d&&Ze.sectionName===t.name?e.jsxs("div",{className:"border-2 inline-block rounded-xl py-1 px-2 w-[90%] 2xl:w-3/5",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"mr-2 border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:d+1}),e.jsx("label",{className:"w-20 inline-block text-sm font-medium text-gray-900 dark:text-white",children:"Name :"}),e.jsx("div",{onClick:()=>Me(!0),className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:Ie.name})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"w-20 ml-7 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline :"}),e.jsx("input",{value:Ie.tagline,onChange:h=>{ae(_=>({..._,tagline:h.target.value}))},type:"text",className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",placeholder:"Tagline....",required:!0})]}),e.jsxs("div",{className:"flex  justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-20 ml-7 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Section :"}),e.jsx("h1",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:t.name})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{type:"button",className:"text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>ks(),children:e.jsx(O,{className:"text-xl",icon:na})}),e.jsx("button",{type:"button",className:"end-2.5 text-red-500 mx-0 bg-transparent hover:bg-red-500 hover:text-white rounded-lg text-sm w-8 h-8  inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{ae({content:"",name:"",tagline:"",sectionName:""}),Tt(h=>({...h,modalOne:!1,modalTwo:!1,sectionName:"",index:-1}))},children:e.jsx(O,{className:"text-xl",icon:ye})})]})]})]}):e.jsxs("div",{className:"flex border bg-neutral-100 border-neutral-300 items-center rounded-md gap-3 px-4 py-0.5 justify-between w-full",children:[e.jsx("span",{className:"border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:d+1}),e.jsxs("span",{className:"flex justify-between w-full",children:[e.jsx("span",{className:"truncate w-60 ml-2",onClick:()=>{Us(o)},children:o.name}),e.jsxs("span",{children:[d>0&&e.jsx("button",{className:"text-gray-600 mx-1 hover:text-gray-800",onClick:()=>ts(t.name,d,"up"),children:e.jsx(O,{icon:It})}),d<t.contents.length-1&&e.jsx("button",{className:" mx-1 text-gray-600 hover:text-gray-800",onClick:()=>ts(t.name,d,"down"),children:e.jsx(O,{icon:_t})}),e.jsx("button",{className:"px-2 text-cyan-600 hover:text-cyan-700",disabled:fe.modalOne||fe.modalTwo,onClick:()=>{Tt(h=>({...h,sectionName:t.name,modalOne:!0,modalTwo:!1,index:d})),Ne(t),ae(o)},children:e.jsx(ps,{})}),e.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:()=>Ss(o,t.name),children:e.jsx(ya,{})})]})]})]}),Re&&e.jsx(Lt,{contentPlaceHolder:$e,setContentPlaceHolder:ie,contentPlaceHolderModal:ke,setContentPlaceHolderModal:nt,contentPlaceHolderValues:Ue,setContentPlaceHolderValues:Ke,onClickHandler:Cs}),fe.modalOne&&fe.sectionName===t.name&&t.contents.length-1===d&&e.jsx(Lt,{contentPlaceHolder:$e,setContentPlaceHolder:ie,contentPlaceHolderModal:ke,setContentPlaceHolderModal:nt,contentPlaceHolderValues:Ue,setContentPlaceHolderValues:Ke,onClickHandler:za}),fe.modalTwo&&fe.sectionName===t.name&&t.contents.length-1===d&&e.jsxs("div",{className:"mt-2 border-2 inline-block rounded-xl py-1  px-2 w-[90%] 2xl:w-4/6",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"mr-2 border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:t.contents.length+1}),e.jsx("label",{className:"w-16 inline-block text-sm font-medium text-gray-900 dark:text-white",children:"Name :"}),e.jsx("div",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:Ie.name})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"ml-7 w-16 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline :"}),e.jsx("input",{value:Ie.tagline,onChange:h=>{ae(_=>({..._,tagline:h.target.value}))},type:"text",className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",placeholder:"Tagline....",required:!0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-16 ml-7 inline-block  text-sm font-medium text-gray-900 dark:text-white",children:"Section :"}),e.jsx("h1",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:t.name})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{type:"button",className:`${Q?"bg-red-500":""}text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white`,onClick:()=>{Ae(h=>({...h,modalOne:!1,modalTwo:!1,sectionName:""})),ve(h=>{const _=[];for(let z=0;z<h.length;z++)h[z].name===t.name?_.push({name:h[z].name,contents:[...h[z].contents,Ie]}):_.push(h[z]);return _}),Ne({name:"",contents:[]}),ae({content:"",name:"",tagline:"",sectionName:""})},children:e.jsx(O,{className:"text-xl",icon:na})}),e.jsx("button",{type:"button",className:"end-2.5 text-red-500 mx-0 bg-transparent hover:bg-red-500 hover:text-white rounded-lg text-sm w-8 h-8  inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{ae({content:"",name:"",tagline:"",sectionName:""}),Ne({name:"",contents:[]}),Ae(h=>({...h,modalOne:!1,modalTwo:!1,sectionName:"",addSection:!1}))},children:e.jsx(O,{className:"text-xl",icon:ye})})]})]})]})]},d)),fe.modalOne&&fe.sectionName===t.name&&e.jsx(Lt,{contentPlaceHolder:$e,setContentPlaceHolder:ie,contentPlaceHolderModal:ke,setContentPlaceHolderModal:nt,contentPlaceHolderValues:Ue,setContentPlaceHolderValues:Ke,onClickHandler:za}),!fe.modalOne&&fe.modalTwo&&fe.sectionName===t.name&&t.contents.length==0&&e.jsx(vs,{id:1,selectedContent:Ie,setSelectedContent:ae,sectionData:_e,setSectionData:Ne,setAddSection:Ae,sections:U,setSections:ve,modalTwoError:Q,setModalTwoError:Pe})]},r)),Ye&&e.jsxs("div",{className:`${U.length>0&&"mt-2"}`,children:[e.jsx("span",{className:"inline-block font-semibold",children:`Section ${U.length+1} Title : `}),e.jsx("input",{value:_e.name,onChange:t=>{t.target.value.length>0||De(!1),Ne({name:t.target.value,contents:[]})},className:`${Le&&"border-red-500"} py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500`,type:"text",placeholder:"Enter the section Name"}),e.jsx("button",{onClick:()=>{_e.name.length==0?De(!0):(ve(t=>[...t,_e]),Ae(t=>({...t,modalOne:!0,modalTwo:!1,sectionName:_e.name})),Et(!1))},className:"h-8 w-8 mx-1  text-white bg-cyan-500 rounded-lg hover:bg-cyan-600 transition-colors border border-white",children:e.jsx(O,{icon:ba})}),e.jsx("div",{className:"inline-block",children:e.jsx("button",{className:"h-8 w-8  text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{Ae(t=>({...t,addSection:!1})),Ne({name:"",contents:[]}),ae({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),Et(!1)},children:e.jsx(O,{icon:ye})})})]})]})]})]})})]})})}),e.jsxs("div",{className:"w-1/2 ",children:[!J&&e.jsx("button",{className:`border-2 my-2 rounded-md px-4 py-1  mx-4   transition-colors  duration-300 
                      ${at?"btn-secondary":"bg-gray-300"}`,onClick:()=>Wt(!0),disabled:!at,children:"Add Content to Section"}),e.jsx("div",{className:"container  px-4   ",children:e.jsxs("div",{className:"inline-block align-middle w-full overflow-y-auto overflow-x-hidden",children:[!J&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col ",children:e.jsx("div",{className:" rounded-lg border-2",children:e.jsx("div",{className:"overflow-hidden shadow sm:rounded-lg ",children:e.jsx("div",{className:"overflow-y-auto ",style:{height:"30vh"},children:e.jsxs("table",{ref:st,className:"table min-w-full divide-y divide-gray-200 rounded-lg border-2  ",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0  ",children:e.jsxs("tr",{children:[Ba.map((t,r)=>t!=="id"&&e.jsxs("th",{className:"px-6 py-3 pl-4 text-left text-xs font-medium text-sky-800 uppercase tracking-wide",children:[t,e.jsx("span",{className:"ml-2 cursor-pointer",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&o.stopPropagation()},role:"button",tabIndex:0})]},r)),e.jsx("th",{})]})}),e.jsx("tbody",{className:"bg-white divide-y  divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx(St,{})})})}):Array.isArray(ea)?ea.length===0?e.jsx("tr",{className:at?"btn-secondary":"",children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"h-96 flex justify-center items-center",children:e.jsx("div",{className:"h-3/5 overflow-hidden",children:e.jsx("img",{src:bs,className:"max-w-full max-h-full overflow-hidden",alt:"Empty Folder",width:200,height:200})})})})}):ea.map(t=>t.content.map(r=>e.jsxs("tr",{className:"bg-white divide-y group",children:[e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:_a.has(r.id),onChange:()=>be(r)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 text-sm font-bold cursor-pointer tracking-wider",children:r.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:r.created_by}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:r.mimetype}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:r.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:r.folder})]},r.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx("p",{children:"Content not found"})})})})})]})})})})}),Sa&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsxs("div",{className:"bg-white p-6 rounded-md z-10",children:[e.jsxs("div",{className:"h-24 ml-2 justify-center",children:[e.jsx("label",{className:"w-44 inline-block mb-4 font-semibold text-lg text-gray-900 dark:text-white",children:"Section Selector:"}),e.jsx("br",{}),e.jsx("label",{className:"w-20 mt-2 ml-2 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Section:"}),e.jsx("select",{className:"w-56 mt-1 bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",value:Ma,onChange:ha,children:U.map((t,r)=>e.jsx("option",{value:t.name,children:t.name},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-20 mt-2 ml-4 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline:"}),e.jsx("input",{value:Ie.tagline,onChange:t=>{ae(r=>({...r,tagline:t.target.value}))},type:"text",className:"w-56 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",placeholder:"Enter the tagline Name....",required:!0})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>Wt(!1),className:"text-back mr-6 mt-6 border border-red-900 bg-red-200 hover:bg-red-300 focus:ring-4 font-medium focus:outline-none focus:ring-red-900 font-full rounded-full text-sm w-full sm:w-auto px-8 py-2 text-center dark",children:"Cancel"}),e.jsx("button",{className:"text-black border mt-6 border-black bg-white-300 ml-2 focus:ring-4 focus:ring-black-800 font-medium rounded-full text-sm w-full sm:w-auto px-10 border-black-900 py-2 text-center dark:bg-black-600 dark:hover:bg-black-700",onClick:Fa,disabled:!at,children:"Save"})]})]})]})]}),e.jsxs("div",{className:"text-xl",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Access Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"public",name:"access",value:"public",checked:D==1,onChange:t=>{W(parseInt(t.target.value)),rs(t)},className:"form-radio text-blue-500"}),e.jsx("label",{htmlFor:"public",className:"ml-2 text-gray-700",children:"Public Access"})]}),!J&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"restricted",name:"access",value:"restricted",checked:D==0,onChange:t=>{W(parseInt(t.target.value)),rs(t)},className:"form-radio text-blue-500",disabled:J}),e.jsx("label",{htmlFor:"restricted",className:"ml-2 text-gray-700",children:"Restricted Access"})]})]})]}),D===0&&e.jsx("div",{className:"overflow-x-auto rounded-lg border-2 ",children:e.jsx("div",{className:"inline-block align-middle w-full ",children:e.jsx("div",{className:"overflow-hidden shadow sm:rounded-lg ",children:e.jsx("div",{className:"overflow-y-auto ",style:{height:"28vh"},children:e.jsxs("table",{ref:st,className:"table min-w-full divide-y  divide-gray-200 rounded-lg border-2",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:H===me,onChange:()=>{se(H===me?[]:me)}})}),Na.map((t,r)=>t!=="id"&&e.jsxs("th",{className:"px-6 py-3 pl-4 text-left text-xs font-medium text-sky-800 uppercase tracking-wide ",children:[t,e.jsx("span",{className:"ml-2 cursor-pointer",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&o.stopPropagation()},role:"button",tabIndex:0})]},r)),e.jsx("th",{})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx(Xa,{len:2})})})}):me.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx(Ka,{})})}):(me==null?void 0:me.length)>0&&(me==null?void 0:me.map(t=>e.jsx("tr",{className:"bg-white divide-y group",children:e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:(H==null?void 0:H.some(r=>r.Id===t.Id))||(H==null?void 0:H.some(r=>r.contact_sfdc_id===t.Id)),onChange:()=>{H!=null&&H.some(r=>r.Id===t.Id||r.contact_sfdc_id===t.Id)?se(r=>r.filter(o=>(o==null?void 0:o.Id)!==t.Id&&(o==null?void 0:o.contact_sfdc_id)!==(t==null?void 0:t.Id))):se(r=>[...r,t])}})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 text-sm font-bold cursor-pointer tracking-wider",children:t.Name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:t.Email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:t.Title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:t.MailingCountry})]})},t.id)))})]})})})})})]})]})})]}),e.jsx("div",{className:"line absolute top-0 left-1/2 w-0.5 h-3/4 mt-20 bg-gray-200 transform -translate-x-1/2"})]}),e.jsxs("div",{className:"flex justify-center space-x-20 mb-4",children:[e.jsx("button",{className:"px-6 py-2 w-20 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{oe(1)},children:"Back"}),e.jsx("button",{className:"px-6 py-2 w-20 flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",onClick:()=>{Ns()},children:"Add"})]})]})})})}};return e.jsxs("div",{className:"absolute",children:[e.jsx("div",{children:e.jsx("div",{children:As()})}),e.jsxs(Qs,{className:"bg-[#014d83]  border border-[#014d83] hover:bg-[#015896]  flex items-center gap-1  mt-2  text-white  mr-6 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 ",onClick:()=>{n(),oe(1)},children:[e.jsx(gn,{className:"text-lg"}),"Add"]})]})}function Ln({versionModalOpen:G,viewVersionContent:q,setViewVersionContent:j,setVersionModalOpen:N,selectedVersionContent:u,setSelectedVersionContent:k,UpdateContentVersionHandler:y}){let E;if(q!==null)if(typeof q=="string")E=q;else if(q instanceof Blob)E=window.URL.createObjectURL(q);else return null;return e.jsx(e.Fragment,{children:G&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-40",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsxs("div",{className:"absolute w-2/4 h-2/3 bg-white  rounded-lg z-50 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between mx-2 mt-2",children:[e.jsx("div",{children:u==null?void 0:u.latest_content_name}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{N(!1),j(null),k({})},className:"bg-red-200 px-2 py-1 rounded-lg",children:e.jsx(O,{icon:ln})})})]}),e.jsxs("select",{className:"border-2 mx-2 mb-2 rounded-md",children:[e.jsx("option",{value:u.latest_content_name,children:"Content Information"}),e.jsxs("option",{value:u.latest_content_name,disabled:!0,children:["Content Name : ",u.latest_content_name]}),e.jsxs("option",{value:u.latest_content_description,disabled:!0,children:["Content Description :"," ",u.latest_content_description]}),e.jsxs("option",{value:u.latest_content_source,disabled:!0,children:["Content Source : ",u.latest_content_source]}),e.jsxs("option",{value:u.latest_content_created_by_name,disabled:!0,children:["Content Created By :"," ",u.latest_content_created_by_name]}),e.jsxs("option",{disabled:!0,value:Ja(u.latest_content_created_at),children:["Content Created At :"," ",Ja(u.latest_content_created_at)]})]}),(u==null?void 0:u.latest_content_mimetype)=="application/url"?e.jsx(e.Fragment,{children:u.latest_content_name.includes("pdf")||u.latest_content_name.includes("pdf")?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[75%] 2xl:h-[80%] w-full ",children:e.jsx(cs,{documents:[{uri:E}],pluginRenderers:ds,config:{header:{disableHeader:!1},pdfVerticalScrollByDefault:!0},theme:{primary:"#5296d8",secondary:"#ffffff",tertiary:"#5296d899",text_primary:"#ffffff",text_secondary:"#5296d8",text_tertiary:"#00000099"},style:{width:"100%",height:"100%"}})})}):e.jsx(e.Fragment,{children:u.latest_content_name.includes("pptx")||u.latest_content_name.includes("xls")||u.latest_content_name.includes("xlsx")||u.latest_content_name.includes("ppt")||u.latest_content_name.includes("pptx")||u.latest_content_name.includes("doc")||u.latest_content_name.includes("docx")?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"px-5 mt-5",children:[e.jsx("a",{className:"hover:text-blue-600",href:u.latest_content_content,target:"_blank",rel:"noreferrer",children:u.latest_content_content}),e.jsx("h1",{children:"Sorry, content type is not supported"})]})}):e.jsx(e.Fragment,{children:e.jsx("iframe",{src:u.latest_content_content,className:"px-5 pt-5",style:{height:"100%",width:"100%",border:"none",overflow:"auto"},title:"External Website",sandbox:"allow-scripts allow-same-origin"})})})}):e.jsx(e.Fragment,{children:q!==null&&e.jsx("div",{className:"h-[75%] 2xl:h-[80%]  flex justify-center items-center text-left w-full overflow-y-auto",children:e.jsx(cs,{documents:[{uri:E}],pluginRenderers:ds,config:{header:{disableHeader:!0},pdfVerticalScrollByDefault:!0,pdfZoom:{defaultZoom:1.1,zoomJump:.2}},theme:{primary:"#5296d8",secondary:"#ffffff",tertiary:"#5296d899",text_primary:"#ffffff",text_secondary:"#5296d8",text_tertiary:"#00000099",disableThemeScrollbar:!1},style:{width:"100%",height:"100%"}})})}),e.jsxs("div",{className:"flex justify-center space-x-12 my-1 ",children:[e.jsx("button",{className:" w-16 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{N(!1),j(null),k({})},children:"Cancel"}),e.jsx("button",{className:"w-16 flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",onClick:()=>{y()},children:"Save"})]})]})]})})}function ms({pitchToEdit:G,setPitchToEdit:q}){const{viewer_id:j,baseURL:N,setViewContent:u,setContentModalOpen:k,driveSelection:y,directContent:E}=s.useContext(ra),g=wa(),$=()=>{k(!1)},F=va(),P=Fe(n=>n.pitches.selectedPitches),[S,f]=s.useState(0),[c,m]=s.useState(null),[I,v]=s.useState(null),[B,R]=s.useState(null),[M,V]=s.useState("Loading.."),[T,b]=s.useState("Loading.."),[K,p]=s.useState([]),[A,ce]=s.useState(0),[ne,w]=s.useState([]),[X,ue]=s.useState(!1),[pe,oe]=s.useState(!1),[Le,De]=s.useState(!1),[me,Xe]=s.useState([]),[D,W]=s.useState(null),[H,se]=s.useState({}),[ee,je]=s.useState(!1),[Na,$e]=s.useState(!1),[ie,ke]=s.useState({addSection:!1,modalOne:!1,modalTwo:!1,sectionName:""}),nt=()=>!(M===""||Q.name===""||Be.selectedLayoutId===""||Q.title===""||Q.headline===""||Q.description===""),Ue=()=>{nt()&&(wt(!0),setTimeout(()=>{Vt(),f(2),wt(!1)},3e3))},[Ke,Ge]=s.useState(!1),[Be,Qe]=s.useState({layouts:[],selectedLayoutId:"",selectedLayoutName:""});s.useState({accounts:[],selectedAccountId:"",selectedAccountName:""});const[rt,lt]=s.useState({crmConnections:!1,opportunityName:!1,pitchLayouts:!1}),[we,la]=s.useState({editSection:!1,modalOne:!1,modalTwo:!1,sectionName:"",index:-1});s.useState(!1),s.useState(""),s.useState([]),s.useState(!1),s.useState(!1),s.useState("");const[Pt,ht]=s.useState(""),[Se,Ye]=s.useState([]),[Et,te]=s.useState(!1),[Oe,de]=s.useState(null),[ze,Ve]=s.useState(null),[xt,Te]=s.useState(!1),[Ut,We]=s.useState(null),[gt,qe]=s.useState(null),[pt,Z]=s.useState([]),[oa,et]=s.useState(!1),[ot,ft]=s.useState(!1),[it,bt]=s.useState(!1),tt=n=>{const a=(n==null?void 0:n.id)!=="-1";re(l=>({...l,content:a?(n==null?void 0:n.id)||n.contentId:"",name:a?(n==null?void 0:n.name)||n.contentName:"",sectionName:a?Re.name:"",arrangement:a?Re.contents.length+1:""})),ke(l=>({...l,modalOne:!1,modalTwo:!!a})),a||Me({name:"",contents:[]})};s.useEffect(()=>{Object.keys(E).length&&tt(E)},[E]);const Ot=n=>{We(n)},ct=async()=>{try{const n=await g.post(`/highlight-video-delete
 `,{viewerId:j,video_ids:pt,originURL:st},{withCredentials:!0});console.log("Pitch conatcted updated ")}catch(n){console.log("Error from  the edit-pitch-with-sections-and-contents",n)}},fe=()=>{te(!0)},Ae=()=>{te(!1)},Ze=n=>{const a=URL.createObjectURL(n);Ye(l=>[...l,{video:n,tagline:Pt,url:a}]),te(!1),ht("")},Tt=n=>{ht(n)},U=(n,a)=>{Ye(l=>l.map((i,x)=>x===n?{...i,tagline:a}:i))},ve=(n,a)=>{if(n.id){const l=Se.filter(i=>i.id!==n.id);Ye(l),Z(i=>[...i,n.id])}else{const l=Se.filter((i,x)=>x!==a);Ye(l)}},_e=n=>{const a=Se[n].url;console.log("Selected video url",a),console.log("Selected video index",Se),a&&(Ve(a),qe(n),Te(!0))},Ne=()=>{Te(!1),Ve(null)},[Ie,ae]=s.useState(!1),[Re,Me]=s.useState({name:"",contents:[]}),[he,re]=s.useState({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),[L,le]=s.useState([]),[He,At]=s.useState(!1),[yt,Rt]=s.useState(!1),[Ga,Qa]=s.useState(!1),[Mt,ia]=s.useState(null),[Ft,Dt]=s.useState(""),[Bt,Ht]=s.useState(new Set),$t=n=>{Ht(a=>{const l=new Set(a);return l.has(n.id)?l.delete(n.id):(l.add(n.id),ia(n)),At(l.size>0),l})},Ya=()=>{const n=L.findIndex(a=>a.name===he.sectionName);if(n!==-1&&Mt){const a={name:Mt.name,content:Mt.id,tagline:he.tagline,arrangement:L[n].contents.length+1};if(L[n].contents.some(i=>i.name===a.name))Qa(!0),ge.error("Content already present in section"),Ht(new Set),re(i=>({...i,tagline:""}));else{const i=[...L];i[n].contents.push(a),Ht(new Set),le(i),ia(null),At(!1),re(x=>({...x,tagline:""}))}}Rt(!1),At(!1)};s.useEffect(()=>{L.length>0&&(Dt(L[0].name),re(n=>({...n,sectionName:L[0].name})))},[L,re]);const Ca=n=>{const a=n.target.value;Dt(a),re(l=>({...l,sectionName:a}))},[zt,ka]=s.useState([]);let at="";P.map(n=>{at=n.opportunity_id});const Vt=async()=>{try{if(!be){const n=await g.get("/retrieve-pitch-content-recommendation",{params:{viewer_id:j,opportunity_id:at},withCredentials:!0});ka(n.data),console.log(n.data),Ge(!1)}}catch(n){console.error("Error fetching pitch content:",n)}},Sa=["","name","created_by","Mimetype","Description","Folder"],Wt=["name","email","job title","country"],ca=s.useRef(null),[qt,Zt]=s.useState(0),[Jt,_a]=s.useState(0);s.useEffect(()=>{const n=ca.current;if(!n)return;n.querySelectorAll("th").forEach(l=>{const i=document.createElement("div");i.className="resizer",i.style.height=`${n.offsetHeight}px`,l.appendChild(i);const x=Je=>{Zt(Je.clientX),_a(l.offsetWidth),document.addEventListener("mousemove",C),document.addEventListener("mouseup",Y)},C=Je=>{const $a=Je.clientX-qt;l.style.width=`${Jt+$a}px`},Y=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",Y)};return i.addEventListener("mousedown",x),()=>{i.removeEventListener("mousedown",x)}})},[Jt,qt]);const jt=async()=>{lt({...rt,pitchLayouts:!0,isLoading:!0});try{const n=await g.get("/all-pitch-layout-names",{params:{viewer_id:j},withCredentials:!0});Qe(a=>({...a,layouts:n.data.pitchLayoutNames}))}catch{ge.error("Failed to fetch Pitch Layouts")}finally{lt({...rt,pitchLayouts:!1,isLoading:!1})}},[Q,Pe]=s.useState({name:"",opportunity_id:"",opportunity_name:"",account_id:"",account_name:"",client_logo:null,created_by:"",title:"",headline:"",description:"",pitch_layout:"",background_image:null}),[Ia,Xt]=s.useState(!1),st=window.location.href,[da,wt]=s.useState(!1),[Kt,ua]=s.useState(""),vt=async n=>{wt(!0);try{const a=await g.get(`/retrieve-pitch-sections-and-contents/${n||P[0].id}`,{withCredentials:!0});console.log("Pitch data from response:",a.data.pitch),Xe(a.data.contentVersionUpdate),w(a.data.pitchContacts);const l=a.data.pitch.opportunity_id;if(l){const x=await g.post("/getSalesforceOpportunityName",{viewerId:j,opportunityId:l,originURL:st},{withCredentials:!0});ua(x.data.Type||"Unknown"),b(x.data.Name),x.status===200&&Ma(!1)}else b("No opportunity"),ua("TOF"),Ba();const i=await g.post("/view-pitch-highlight-video",{viewer_id:j,pitch_id:P[0].id},{withCredentials:!0});V(a.data.crm_connection_details[0].connection_name),Ye(i.data.data),le(a.data.pitchSections),Qe(x=>({...x,selectedLayoutId:a.data.pitch.pitch_layout})),Pe({id:a.data.pitch.id,name:a.data.pitch.name,client_logo:a.data.pitch.client_logo,created_by:a.data.pitch.created_by,title:a.data.pitch.title,headline:a.data.pitch.headline,description:a.data.pitch.description,pitch_layout:a.data.pitch.pitch_layout,background_image:a.data.pitch.background_image,pitch_layout_salesforce_id:a.data.pitch.pitch_layout_salesforce_id}),ce(a.data.pitch.public_access)}catch(a){console.log(a.message)}finally{wt(!1)}},dt=async(n,a)=>{try{const l=await g.post("/pitch-preview-content",{content_name:n,viewerId:j},{withCredentials:!0});return Ve(l.data.sasUrl),qe(a),Te(!0),console.log("Video data",l.data.sasUrl),l.data.sasUrl}catch(l){throw console.error("Error fetching data:",l),l}finally{q(null)}},La=async()=>{const n=ne.map(a=>a.Id||a.contact_sfdc_id);console.log(ne);try{const a=await g.post("/updatePitchContacts",{viewerId:j,pitchId:P[0].id,contactIds:n},{withCredentials:!0});console.log("Pitch conatcted updated ")}catch(a){console.log("Error from  the edit-pitch-with-sections-and-contents",a)}},Pa=async()=>{Ge(!0);const n=[];for(let l=0;l<L.length;l++)n.push({...L[l],order:l+1});const a={pitchId:P[0].id,updated_by:j,pitchData:{name:Q.name,title:Q.title,headline:Q.headline,description:Q.description,pitch_layout:Q.pitch_layout,public_access:A},sections:n};console.log(a),A==0&&La();try{const l=await g.post(`/edit-pitch-with-sections-and-contents
      `,a,{withCredentials:!0});if(Se&&Se.length>0){const i=new FormData;i.append("created_by",j),i.append("pitch_id",P[0].id);const x=[];Se.forEach(Y=>{Y.id||(i.append("files",Y.video),x.push(Y.tagline))}),i.append("tagline",JSON.stringify(x));const C=await g.post(`/highlight-video-upload
            `,i,{withCredentials:!0});console.log(C)}if(pe){const i=new FormData;i.append("pitch_id",P[0].id),i.append("background_image",c),i.append("background_login_image",B),i.append("client_logo",I);const x=await g.post("/upload-bg-and-client-logo",i,{withCredentials:!0})}l.data&&(F(sa({sortColumn:"name",sortOrder:"ASC",viewer_id:j,baseURL:N})),ge.success("Pitch Updated Successfully"),F(aa()))}catch(l){console.log("Error from  the edit-pitch-with-sections-and-contents",l)}finally{Ge(!1)}},Ea=(n,a)=>{re(l=>({...l,content:n,name:a,sectionName:Re.name,arrangement:Re.contents.length+1})),Xt(!1)},Ua=(n,a)=>{const l=[];for(let i=0;i<L.length;i++)if(a===L[i].name){let x=1;const C=[];for(let Y=0;Y<L[i].contents.length;Y++)n.arrangement!=L[i].contents[Y].arrangement&&(C.push({...L[i].contents[Y],arrangement:x}),x++);l.push({...L[i],contents:C})}else l.push(L[i]);le(l)},Oa=(n,a)=>{const l=[];for(let i=0;i<L.length;i++)if(we.sectionName===L[i].name){const x=[];for(let C=0;C<L[i].contents.length;C++)C==we.index?x.push(he):x.push(L[i].contents[C]);l.push({...L[i],contents:x})}else l.push(L[i]);le(l),re({content:"",name:"",tagline:"",sectionName:""}),la({editSection:!1,modalOne:!1,modalTwo:!1,sectionName:"",index:-1})},ma=(n,a,l)=>{console.log(n),le(L.map(i=>{if(i.name===n){const x=[...i.contents];return l==="up"&&a>0?[x[a],x[a-1]]=[x[a-1],x[a]]:l==="down"&&a<x.length-1&&([x[a],x[a+1]]=[x[a+1],x[a]]),{...i,contents:x}}return i}))},Nt=(n,a)=>{le(l=>{const i=l.findIndex(Je=>Je.name===a);if(i===-1)return l;const x=n==="up"?i-1:n==="down"?i+1:-1;if(x<0||x>=l.length)return l;const C=[...l],Y=C[i];return C[i]=C[x],C[x]=Y,C})},Ta=async()=>{ue(!0);let n="";P.map(a=>{n=a.opportunity_id});try{if(!be){const a=await g.post("/getContactsForOpportunityAccount",{viewerId:j,opportunityId:n,originURL:st},{withCredentials:!0});console.log("Contacts",a.data),p(a.data)}}catch(a){console.log("Error fetching contacts",a.message)}finally{ue(!1)}};s.useState(!1);const[Aa,Gt]=s.useState(!1),[Qt,Yt]=s.useState(""),[es,Ra]=s.useState(""),[Ce,Ct]=s.useState(!1),[be,Ma]=s.useState(!1);s.useState(!0),s.useState(0);const ut=n=>{const a=/\*\*[^*]+\:\*\*/g,l=/"[^"]+":/g,i=/[^":]+:/g,x=/^[^\n]+\:/;return n.replace(a,"").replace(l,"").replace(i,"").replace(x,"").trim()},Fa=n=>{const a=n.split(`

`),l=ut(a[0]),i=ut(a[1]),x=ut(a[2]),C=ut(x);Pe(Y=>({...Y,name:l,title:l,headline:i,description:C})),console.log("Updated Step1Data:",{name:l,title:l,headline:i,description:x})},ha=async()=>{Ct(!0);try{console.log(Qt);const n=await g.post(`${N}/geenrateAIOpportunityDetails`,{viewerId:j,originURL:st,opportunityId:at,focus_area:Qt},{headers:{"Content-Type":"application/json"},withCredentials:!0});console.log("ai data",n.data.aiContent),Ra(n.data.aiContent),Fa(n.data.aiContent)}catch(n){console.error("Error generating AI opportunity details:",n)}finally{Ct(!1),Yt("")}},ea=async n=>{re(n);try{if(et(!0),n.content_mimetype){if(console.log("if"),console.log("mimetpye",n==null?void 0:n.content_mimetype),n!=null&&n.content_mimetype.includes("application/vnd")||n!=null&&n.content_mimetype.includes("application/msword")||n!=null&&n.content_mimetype.includes("video/mp4")){console.log("aaaa");const l=(await g.post("/open-content",{contentId:n.content,viewerId:j},{withCredentials:!0})).data.sasUrl;u(l)}else if(n!=null&&n.content_mimetype.includes("application/url"))u(n.content);else if((n==null?void 0:n.content_mimetype)=="application/pdf"){const a=await g.post("/open-content",{contentId:(n==null?void 0:n.content)||(n==null?void 0:n.id)||(n==null?void 0:n.contentId),viewerId:j},{withCredentials:!0,responseType:"blob"}),l=new Blob([a.data],{type:"application/pdf"}),i=URL.createObjectURL(l);console.log("Url",i),u(i)}else{const a=await g.post("/open-content",{contentId:(n==null?void 0:n.content)||(n==null?void 0:n.id)||(n==null?void 0:n.contentId),viewerId:j},{responseType:"blob",withCredentials:!0}),l=new Blob([a.data],{type:`${a.data.type}`}),i=URL.createObjectURL(l);u(i)}k(!0)}else{if(["png","jpg","jpeg","webp","bmp","gif","svg"].some(a=>{var l;return(l=n==null?void 0:n.name)==null?void 0:l.includes(a)})){const a=await g.post("/open-content",{contentId:(n==null?void 0:n.content)||(n==null?void 0:n.id)||(n==null?void 0:n.contentId),viewerId:j},{responseType:"blob",withCredentials:!0}),l=new Blob([a.data],{type:`${a.data.type}`}),i=URL.createObjectURL(l);u(i)}else if(n.name.includes(".mp4")){const a=await g.post("/open-content",{contentId:(n==null?void 0:n.content)||(n==null?void 0:n.id)||(n==null?void 0:n.contentId),viewerId:j},{withCredentials:!0});a.data&&a.data.sasUrl?u(a.data.sasUrl):console.error("sasURL not found in response:",a.data)}else{const a=await g.post("/open-content",{contentId:(n==null?void 0:n.content)||(n==null?void 0:n.id)||(n==null?void 0:n.contentId),viewerId:j},{withCredentials:!0,responseType:"blob"});if(console.log("Res",a.data),a.headers["content-type"]==="application/pdf"){const i=new Blob([a.data],{type:"application/pdf"}),x=URL.createObjectURL(i);u(x)}else{const x=new TextDecoder("utf-8").decode(a.data);try{const C=JSON.parse(x);console.error("Received JSON instead of PDF:",C),ge.error("Unable to load PDF. Please try again later.")}catch(C){console.error("Error parsing response as JSON:",C),ge.error("Unexpected response format. Please try again later.")}}}k(!0)}}catch(a){console.error(a)}finally{et(!1)}};s.useEffect(()=>{G&&(jt(),vt(G),f(1))},[G]);const Da=async n=>{try{if(ft(!0),n.latest_content_mimetype){if(n!=null&&n.latest_content_mimetype.includes("application/vnd")||n!=null&&n.latest_content_mimetype.includes("application/msword")||n!=null&&n.latest_content_mimetype.includes("video/")){const l=(await g.post("/open-content",{contentId:n.latest_content_id,viewerId:j},{withCredentials:!0})).data.sasUrl;W(l)}else if(n!=null&&n.latest_content_mimetype.includes("application/url"))W(n.latest_content_content);else{const a=await g.post("/open-content",{contentId:n.latest_content_id,viewerId:j},{responseType:"blob",withCredentials:!0}),l=new Blob([a.data],{type:`${n.latest_content_mimetype}`});W(l)}bt(!0)}}catch(a){console.error(a)}finally{ft(!1)}};if(Ke)return e.jsx("div",{children:e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsx("div",{className:"bg-transparent p-6 rounded-md z-50 w-auto",children:e.jsx(ja,{visible:!0,height:"40",width:"40",color:"#075985",ariaLabel:"grid-loading",radius:"12.5",wrapperStyle:{},wrapperClass:"grid-wrapper"})})]})});const xa=n=>{be||(n.target.id==="public"&&ce(1),n.target.id==="restricted"&&ce(0))},Ba=()=>(console.log("hii"),be||ce(1),be),Ha=()=>{console.log("pitch sections",L);const n=[];for(let a=0;a<L.length;a++){const l=[];for(let i=0;i<L[a].contents.length;i++)H.pitch_content_id===L[a].contents[i].id?(console.log(H),console.log(L[a].contents[i]),l.push({...L[a].contents[i],content:H.latest_content_id,content_created_at:Ft.latest_content_created_at,content_created_by_name:H.latest_content_created_by_name,content_description:H.latest_content_description,content_id:H.latest_content_id,content_link:H.latest_content_content,content_mimetype:H.latest_content_mimetype,content_name:H.latest_content_name,content_updated_at:H.latest_content_updated_at,content_updated_by_name:H.latest_content_updated_by_name})):l.push(L[a].contents[i]);n.push({...L[a],contents:l})}le(n),bt(!1)};if(da)return e.jsx("div",{children:e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsx("div",{className:"bg-transparent p-6 rounded-md z-50 w-auto",children:e.jsx(ja,{visible:!0,height:"40",width:"40",color:"#075985",ariaLabel:"grid-loading",radius:"12.5",wrapperStyle:{},wrapperClass:"grid-wrapper"})})]})});const mt=()=>{var n;switch(console.log("step1data:",{name:Q.name,opportunity_id:Q.opportunity_id,opportunity_name:Q.opportunity_name,client_logo:Q.client_logo,created_by:Q.created_by,title:Q.title,headline:Q.headline,description:Q.description,pitch_layout:Q.pitch_layout,background_image:Q.background_image}),S){case 1:return e.jsx("div",{children:e.jsx("div",{className:"overflow-y-auto overflow-x-hidden fixed inset-0 flex items-center justify-center z-30 bg-gray-500 bg-opacity-50",tabIndex:"-1",children:e.jsx("div",{className:"bg-white rounded-lg shadow dark:bg-gray-700 w-[95%] sm:w-[90%] md:w-[85%] lg:w-[80%] xl:w-[70%] max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-20 flex items-center px-4 py-3 justify-between border-b",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Edit Pitch"}),e.jsx("button",{type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>f(0),children:e.jsx(O,{className:"text-red-500 text-2xl",icon:ye})})]}),e.jsx("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:e.jsx("form",{className:"space-y-4",onSubmit:a=>a.preventDefault(),children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"w-full lg:w-[55%] space-y-4 lg:border-r lg:pr-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"min-w-36 text-sm font-medium",children:"Top of Funnel Pitch:"}),e.jsxs("label",{className:"inline-block cursor-pointer ms-2",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:be}),e.jsx("div",{className:`relative w-11 h-6 rounded-full peer ${be?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("div",{className:`absolute top-0.5 start-[2px] bg-white border-gray-300 border rounded-full h-5 w-5 transition-all ${be?"translate-x-full":""}`})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-2",children:[e.jsx("label",{className:"w-36 inline-block mb-2 mt-2.5 text-sm font-medium text-gray-900 dark:text-white",children:Kt!=="Opportunity"?"Account Name :":"Opportunity Name :"}),e.jsx("div",{className:`w-80 h-10 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${be?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,"aria-disabled":!0,children:Kt!=="Opportunity"?T||"No Account":T||"No Opportunity"}),!be&&T&&e.jsxs("div",{className:" flex space-x-2 ",children:[e.jsx("button",{className:"ml-2 px-1 py-1 bg-white  focus:outline-none focus:ring-2 focus:ring-white dark:bg-white dark:focus:ring-white hover:border-white transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-white",onClick:()=>{ha()},disabled:Ce,children:Ce?e.jsx("div",{className:"flex items-center h-5 w-5",children:e.jsx(ws,{})}):e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:xs,alt:"RevSpire Logo",className:"w-5 h-5 z transition-opacity -opacity-30"})})}),e.jsx("button",{disabled:Ce,className:"h-5 w-5 flex mt-2  text-2xl",onClick:()=>Gt(!0),children:e.jsx(fs,{})})]}),"                                      ",Aa&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white  rounded-lg border-2 shadow-lg max-w-sm w-full flex flex-col max-h-[90vh]",children:[e.jsx("h2",{className:"text-xl font-semi sticky  top-0  p-2 border-b-1 z-10",children:"Write your prompt below"}),e.jsx("textarea",{className:" h-40 mx-1.5 font-thin rounded-md border-2 transition-colors p-1",value:Qt,placeholder:"What should the AI focus on ?",onChange:a=>Yt(a.target.value)}),e.jsxs("div",{className:" flex justify-center space-x-10 my-2 ",children:[e.jsx("button",{onClick:()=>Gt(!1),className:"px-4 py-2 w-20 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",children:"Close"}),e.jsx("button",{onClick:()=>{ha(),Gt(!1)},className:"px-6 py-2 w-20 flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",children:"Save"})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pitch Name :"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{value:Q.name,onChange:a=>{Pe(l=>({...l,name:a.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${Ce?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Enter the Pitch Name....",required:!0,disabled:Ce}),Le&&Q.name===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please enter the pitch name."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pitch Layout :"}),rt.pitchLayouts?e.jsx("select",{className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",disabled:!0,children:e.jsx("option",{value:"Loading",children:"Loading Layouts..."})}):e.jsxs("select",{className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",required:!0,value:((n=Be.layouts.find(a=>a.id===Be.selectedLayoutId))==null?void 0:n.name)||"",onChange:a=>{const l=a.target.value,i=Be.layouts.find(x=>x.name===l).id;Qe(x=>({...x,selectedLayoutName:l,selectedLayoutId:i})),Pe(x=>({...x,pitch_layout:i}))},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Layout"}),Be.layouts&&Be.layouts.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))]}),Le&&Be.selectedLayoutId===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch Layout."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title :"}),e.jsx("input",{value:Q.title,onChange:a=>{Pe(l=>({...l,title:a.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${Ce?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Title...",required:!0,disabled:Ce}),Le&&Q.title===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch Title"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Headline :"}),e.jsx("input",{value:Q.headline,onChange:a=>{Pe(l=>({...l,headline:a.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm rounded-lg inline-block p-2.5 ${Ce?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Headline...",required:!0,disabled:Ce}),Le&&Q.headline===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select Pitch headline"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description :"}),e.jsx("textarea",{value:Q.description,onChange:a=>{Pe(l=>({...l,description:a.target.value}))},type:"text",className:`w-80 border text-gray-900 text-sm h-40 text-start rounded-lg inline-block p-2.5 ${Ce?"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed":"bg-gray-50 border-gray-300 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"Pitch Description...",required:!0,disabled:Ce}),Le&&Q.description===""&&e.jsx("p",{className:"text-red-600 mx-36 text-xs ",children:"Please select an opportunity."})]})]}),e.jsxs("div",{className:"w-full lg:w-[45%] space-y-4 mt-6 lg:mt-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:pe,onChange:()=>{oe(!pe)}}),e.jsx("label",{className:"text-sm font-medium",children:"Edit Background and Client Logo"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Background :"}),e.jsx("input",{id:"backgroundImage",disabled:!pe,onChange:a=>{m(a.target.files[0])},type:"file",accept:"image/*",className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Login Background :"}),e.jsx("input",{id:"backgroundLoginImage",disabled:!pe,onChange:a=>{R(a.target.files[0])},type:"file",accept:"image/*",className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-36 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Client Logo :"}),e.jsx("input",{id:"clientLogo",disabled:!pe,onChange:a=>{v(a.target.files[0])},type:"file",accept:"image/*",className:"w-80 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",required:!0})]})]})]})]})})}),e.jsx("div",{className:"sticky bottom-0 bg-white border-t p-4 mt-4",children:e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{className:"border-2 py-2 rounded-xl px-8 te bg-red-300",onClick:()=>{f(0),Pe({})},children:"Cancel"}),e.jsx("button",{className:"border-2 py-2 rounded-xl px-8 te bg-white",disabled:Ce,onClick:()=>{De(!0),Ue(),Ta()},children:"Next"})]})})]})})})});case 2:return e.jsx("div",{className:" fixed inset-0 flex items-center justify-center z-30 bg-gray-500 bg-opacity-50 ",tabIndex:"-1",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow  dark:bg-gray-700 lg:w-[83vw] xl:w-[90vw]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-3 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Pitch"}),e.jsx("button",{type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{f(0)},children:e.jsx(O,{className:"text-red-500 text-2xl",icon:ye})})]}),e.jsxs("div",{className:" flex mt-2",children:[e.jsxs("div",{className:"w-1/2 px-2 ",children:[e.jsxs("div",{className:" border-gray-300 px-2 rounded-2xl ",children:[e.jsx("button",{className:"border-2 rounded-md btn-secondary px-4 py-1",onClick:fe,children:"Add Highlight"}),e.jsx("div",{className:`${Se.length==0?"overflow-hidden border-2 p-2 my-2  border-gray-300  rounded-md":"overflow-y-auto border-2 p-2 my-2 border-gray-300  rounded-md"} overflow-x-hidden`,style:{height:"20vh"},children:e.jsxs("div",{className:"align-center",children:[Se.length===0?e.jsx("div",{className:"px-4 mt-2 ",children:e.jsx("div",{className:"p-2 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 ",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})}),e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})}),e.jsx("div",{className:"flex items-center justify-center h-28 rounded bg-gray-50 dark:bg-gray-800",children:e.jsx("p",{className:"text-2xl text-gray-400 dark:text-gray-500",children:e.jsx("svg",{className:"w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})})]})})}):null,Et&&e.jsx(js,{onCancel:Ae,highlightVideoFiles:Ze,videoTaglines:Tt,onVideoReady:Ot}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:" space-y-1",children:Se.map((a,l)=>e.jsx("div",{children:e.jsxs("div",{className:"flex border bg-neutral-100 border-neutral-300    items-center rounded-md gap-3 px-4 py-0.5 justify-between w-full ",children:[e.jsxs("div",{className:" flex items-center",children:[e.jsx("span",{className:"border-neutral-400 flex border  size-[20px]   justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:l+1}),e.jsx("label",{className:"w-40  ml-10 truncate text-sm font-medium mx-4 text-gray-900 dark:text-white",children:"Highlight video Tagline :"}),Oe===l?e.jsxs("span",{children:[" ",e.jsx("input",{type:"text",className:" relative w-60 ml-2",value:a.tagline,onChange:i=>U(l,i.target.value),onBlur:()=>de(null)})]}):e.jsx("span",{className:" ",children:a.tagline})]}),e.jsxs("span",{className:"  relative",children:[e.jsx("button",{className:"px-2 text-cyan-600 hover:text-cyan-700",onClick:()=>{ht(a.tagline),a.id?dt(a.id,l):_e(l)},children:e.jsx(gs,{})}),e.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:()=>{ve(a,l)},children:e.jsx(ya,{})})]})]})},l))}),xt&&ze&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-75",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-10/12 max-w-3xl overflow-hidden border border-sky-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-sky-100 border-b border-sky-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-sky-800",children:"Video Preview"}),e.jsx("button",{className:"text-sky-600 hover:text-sky-800 transition-colors",onClick:Ne,children:e.jsx(O,{icon:ye,className:"text-xl"})})]}),e.jsxs("div",{className:"p-4 bg-gray-50",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 mb-3 rounded-lg overflow-hidden shadow-md",children:e.jsx("video",{src:ze,controls:!0,autoPlay:!0,loop:!0,className:"w-full h-full object-contain bg-black"})}),gt!==null&&e.jsxs("div",{className:"bg-white border border-sky-200 rounded-md p-3 shadow-sm",children:[e.jsx("h3",{className:"text-base font-medium text-sky-800 mb-1",children:"Video Details"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Tagline:"}),e.jsx("span",{className:"text-gray-600",children:Pt})]})]})]})]})})]})]})})]}),e.jsxs("div",{className:"h-full ",children:[e.jsx("button",{className:"border-2 rounded-md btn-secondary px-4 py-1  mx-2 ",disabled:ie.modalOne||ie.modalTwo||we.modalOne||we.modalTwo,onClick:()=>{$e(!0),Me({name:"",contents:[]})},children:"Add Section"}),e.jsx("div",{className:`${L.length==0?"overflow-hidden border-2 p-2 m-2 border-gray-300  rounded-md":"overflow-y-auto border-2 rounded-md m-2 p-2 border-gray-300"} overflow-x-hidden `,style:{height:"42vh"},children:e.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden",children:e.jsxs("div",{className:"",children:[L.length>0&&L.map((a,l)=>e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"inline-block  px-2  rounded-2xl",children:[e.jsx("span",{className:"font-semibold",children:`Section ${l+1} Title : `}),e.jsx("input",{value:a.name,onChange:i=>{const x=i.target.value;le(C=>C.map((Y,Je)=>Je===l?{...Y,name:x}:Y))},className:`${a.name.length>0?"":"border-red-500"} py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500`,type:"text",placeholder:"Enter the section Name"}),e.jsx("button",{disabled:a.name.length===0||we.index!=-1,className:"h-8 w-8 mx-1  text-white bg-cyan-500 rounded-lg hover:bg-cyan-600 transition-colors border border-white",onClick:()=>{ie.modalTwo?je(!0):(ke(i=>({...i,modalOne:!0,modalTwo:!1,sectionName:a.name})),Me(a))},children:e.jsx(O,{icon:ba})}),e.jsx("button",{className:"h-8 w-8  text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",disabled:ie.modalOne||ie.modalTwo||we.modalOne||we.modalTwo,onClick:()=>{ke(i=>({...i,addSection:!1,modalTwo:!1})),re({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),le(i=>i.filter(x=>x.name!=a.name))},children:e.jsx(O,{className:" text-lg",icon:ye})}),L.length>1&&e.jsxs("div",{className:" inline-block",children:[l===0&&e.jsx("button",{className:"mx-2 text-gray-600 hover:text-gray-800",onClick:()=>Nt("down",a.name),disabled:L.length<=1,children:e.jsx(O,{icon:_t})}),l===L.length-1&&e.jsx("button",{className:" mx-2 text-gray-600 hover:text-gray-800",onClick:()=>Nt("up",a.name),disabled:L.length<=1,children:e.jsx(O,{icon:It})}),l>0&&l<L.length-1&&e.jsxs("div",{className:" inline-block mx-2",children:[e.jsx("button",{className:"  text-gray-600  hover:text-gray-800",onClick:()=>Nt("up",a.name),children:e.jsx(O,{icon:It})}),e.jsx("button",{className:" mx-2 text-gray-600 hover:text-gray-800",onClick:()=>Nt("down",a.name),children:e.jsx(O,{icon:_t})})]})]})]}),a.contents.map((i,x)=>e.jsxs("div",{className:" flex  flex-col  mt-1",children:[we.index==x&&we.sectionName==a.name?e.jsxs("div",{className:"border-2 inline-block rounded-xl py-1 px-2 w-[90%] 2xl:w-3/5",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"mr-2 border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:x+1}),e.jsx("label",{className:"w-20  inline-block text-sm font-medium text-gray-900 dark:text-white",children:"Name :"}),e.jsx("div",{onClick:()=>{Xt(!0)},className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:he.name||he.content_name})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"w-20 ml-7 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline :"}),e.jsx("input",{value:he.tagline,onChange:C=>{re(Y=>({...Y,tagline:C.target.value}))},type:"text",className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",placeholder:"Tagline....",required:!0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-20 ml-7 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Section :"}),e.jsx("h1",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:a.name})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{type:"button",className:"text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{Oa(),Me({name:"",contents:[]})},children:e.jsx(O,{className:" text-xl",icon:na})})," ",e.jsx("button",{type:"button",className:"end-2.5 text-red-500 mx-0 bg-transparent hover:bg-red-500 hover:text-white rounded-lg text-sm w-8 h-8  inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{re({content:"",name:"",tagline:"",sectionName:""}),la(C=>({...C,modalOne:!1,modalTwo:!1,sectionName:"",index:-1}))},children:e.jsx(O,{className:" text-xl",icon:ye})})]})]})]}):e.jsxs("span",{className:"flex border bg-neutral-100 border-neutral-300 items-center rounded-md gap-3 px-4 py-0.5 justify-between w-full",children:[e.jsx("span",{className:"border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:x+1}),e.jsxs("span",{className:" flex justify-between w-full",children:[e.jsx("span",{className:" w-60 truncate ml-2 pointer",onClick:()=>{ea(i)},children:i.name||i.content_name}),e.jsxs("span",{className:"",children:[(()=>{const C=me.find(Y=>Y.original_content_id===i.content);return C&&C.latest_content_id!==C.original_content_id?e.jsx("span",{onClick:()=>{se(C),Da(C)},children:"update"}):null})(),x>0&&e.jsx("button",{className:"text-gray-600 mx-1 hover:text-gray-800",onClick:()=>ma(a.name,x,"up"),children:e.jsx(O,{icon:It})}),x<a.contents.length-1&&e.jsx("button",{className:"text-gray-600 mx-1 hover:text-gray-800",onClick:()=>ma(a.name,x,"down"),children:e.jsx(O,{icon:_t})}),e.jsx("button",{className:"px-2 text-cyan-600 hover:text-cyan-700",disabled:ie.modalOne||ie.modalTwo||we.modalOne||we.modalTwo,onClick:()=>{la(C=>({...C,sectionName:a.name,modalOne:!1,modalTwo:!0,index:x})),re(i)},children:e.jsx(ps,{})}),e.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:()=>{Ua(i,a.name)},children:e.jsx(ya,{})})]})]})]}),Ia&&e.jsx(Lt,{onClickHandler:Ea}),ie.modalOne&&ie.sectionName===a.name&&a.contents.length-1===x&&e.jsx(Lt,{onClickHandler:tt}),ie.modalTwo&&ie.sectionName===a.name&&a.contents.length-1===x&&e.jsxs("div",{className:"mt-2 border-2 inline-block rounded-xl py-1  px-2 w-[90%] 2xl:w-4/6",children:[e.jsxs("div",{className:"flex ",children:[e.jsx("span",{className:"mr-2 border-neutral-400 border size-[20px] flex justify-center items-center text-xs rounded-full bg-neutral-50  text-neutral-700 font-bold",children:a.contents.length+1}),e.jsx("label",{className:"w-16 inline-block text-sm font-medium text-gray-900 dark:text-white",children:"Name :"}),e.jsx("div",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:he.name})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"ml-7 w-16 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline :"}),e.jsx("input",{value:he.tagline,onChange:C=>{re(Y=>({...Y,tagline:C.target.value}))},type:"text",className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",placeholder:"Tagline....",required:!0})]}),e.jsxs("div",{className:" flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-16 ml-7 inline-block  text-sm font-medium text-gray-900 dark:text-white",children:"Section :"}),e.jsx("h1",{className:"truncate w-56 py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500",children:a.name})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{type:"button",className:"text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{ke(C=>({...C,modalTwo:!1,modalOne:!1,sectionName:""})),le(C=>{const Y=[];for(x=0;x<C.length;x++)C[x].name===a.name?Y.push({...C[x],contents:[...C[x].contents,he]}):Y.push(C[x]);return Y}),re({content:"",name:"",tagline:"",sectionName:""})},children:e.jsx(O,{className:" text-xl",icon:na})})," ",e.jsx("button",{type:"button",className:"end-2.5 text-red-500 mx-0 bg-transparent hover:bg-red-500 hover:text-white rounded-lg text-sm w-8 h-8  inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>{re({content:"",name:"",tagline:"",sectionName:""}),Me({name:"",contents:[]}),ke(C=>({...C,modalTwo:!1,modalOne:!1,addSection:!1}))},children:e.jsx(O,{className:" text-xl",icon:ye})})]})]})]})]},x)),ie.modalOne&&ie.sectionName===a.name&&e.jsx(Lt,{onClickHandler:tt}),!ie.modalOne&&ie.modalTwo&&ie.sectionName===a.name&&a.contents.length==0&&e.jsx(vs,{id:1,selectedContent:he,setSelectedContent:re,sectionData:Re,setSectionData:Me,setAddSection:ke,sections:L,setSections:le,modalTwoError:ee,setModalTwoError:je})]},l)),Na&&e.jsxs("div",{className:`${L.length>0&&"mt-2"}`,children:[e.jsx("span",{className:"inline-block font-semibold",children:`Section ${L.length+1} Title : `}),e.jsx("input",{value:Re.name,onChange:a=>{a.target.value.length>0||ae(!1),Me({name:a.target.value,contents:[]})},className:`${Ie&&"border-red-500"} py-0.5 ml-2 text-normal-500 px-2 outline-none bg-neutral-100 border border-neutral-300 hover:border-blue-400 hover:bg-neutral-100 transition-all rounded-md placeholder:text-neutral-400 text-neutral-800 focus:border-blue-500`,type:"text",placeholder:"Enter the section Name"}),e.jsx("button",{onClick:()=>{Re.name.length==0?ae(!0):(le(a=>[...a,Re]),ke(a=>({...a,modalOne:!0,modalTwo:!1,sectionName:Re.name})),$e(!1))},className:"h-8 w-8 mx-1  text-white bg-cyan-500 rounded-lg hover:bg-cyan-600 transition-colors border border-white",children:e.jsx(O,{icon:ba})}),e.jsx("div",{className:"inline-block",children:e.jsx("button",{className:"h-8 w-8  text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{ke(a=>({...a,addSection:!1})),Me({name:"",contents:[]}),re({sectionName:"",content:"",name:"",tagline:"",arrangement:0}),$e(!1)},children:e.jsx(O,{icon:ye})})})]})]})})})]})]}),e.jsxs("div",{className:"w-1/2",children:[console.log("isToggle value is ,",be),!be&&e.jsx("button",{className:`border-2 mb-2 rounded-md px-4 py-1 mx-4 transition-colors duration-300 ${He?"btn-secondary":"bg-gray-300"}`,onClick:()=>Rt(!0),disabled:!He,children:"Add Content to Section"}),e.jsx("div",{className:"container  px-4",children:e.jsxs("div",{className:"inline-block align-middle w-full overflow-y-auto overflow-x-hidden",children:[!be&&e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"inline-block align-middle w-full overflow-y-auto overflow-x-hidden",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"rounded-lg border-2",children:e.jsx("div",{className:"overflow-hidden shadow sm:rounded-lg",children:e.jsx("div",{className:"overflow-y-auto",style:{height:"30vh"},children:e.jsxs("table",{ref:ca,className:"table min-w-full divide-y divide-gray-200 rounded-lg border-2",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsx("tr",{children:Sa.map((a,l)=>a!=="id"&&e.jsxs("th",{className:"px-6 py-3 pl-4 text-left text-xs font-medium text-sky-800 uppercase tracking-wide",children:[a,e.jsx("span",{className:"ml-2 cursor-pointer",role:"button",tabIndex:0})]},l))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ke?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx(St,{})})})}):Array.isArray(zt)?zt.length===0?e.jsx("tr",{className:He?"btn-secondary":"bg-gray-300",children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"h-96 flex justify-center items-center",children:e.jsx("div",{className:"h-4/5 overflow-hidden",children:e.jsx("img",{src:bs,className:"max-w-full max-h-[80%]",alt:"Empty Folder",width:200,height:200,style:{"mix-blend-mode":"darken"}})})})})}):zt.map(a=>a.content.map(l=>e.jsxs("tr",{className:"bg-white divide-y cursor-pointer",children:[e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:Bt.has(l.id),onChange:()=>$t(l)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 text-sm font-bold tracking-wider",children:l.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:l.created_by}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:l.mimetype}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:l.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:l.folder})]},l.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx("p",{children:"Content not found"})})})})})]})})})})})})}),yt&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800 opacity-50"}),e.jsxs("div",{className:"bg-white p-6 rounded-md z-10",children:[e.jsxs("div",{className:"h-24 ml-2 justify-center",children:[e.jsx("label",{className:"w-44 inline-block mb-4 font-semibold text-lg text-gray-900 dark:text-white",children:"Section Selector:"}),e.jsx("br",{}),e.jsx("label",{className:"w-20 mt-2 ml-2 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Section:"}),e.jsx("select",{className:"w-56 mt-1 bg-gray-50 border border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-1 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",value:Ft,onChange:Ca,children:L.map((a,l)=>e.jsx("option",{value:a.name,children:a.name},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-20 mt-2 ml-4 inline-block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tagline:"}),e.jsx("input",{value:he.tagline,onChange:a=>{re(l=>({...l,tagline:a.target.value}))},type:"text",className:"w-56 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline-block p-2 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",placeholder:"Enter the tagline Name....",required:!0})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>Rt(!1),className:"text-back mr-6 mt-6 border border-red-900 bg-red-200 hover:bg-red-300 focus:ring-4 font-medium focus:outline-none focus:ring-red-900 font-full rounded-full text-sm w-full sm:w-auto px-8 py-2 text-center dark",children:"Cancel"}),e.jsx("button",{className:"text-black border mt-6 border-black bg-white-300 ml-2 focus:ring-4 focus:ring-black-800 font-medium rounded-full text-sm w-full sm:w-auto px-10 border-black-900 py-2 text-center dark:bg-black-600 dark:hover:bg-black-700",onClick:Ya,disabled:!He,children:"Save"})]})]})]}),e.jsxs("div",{className:" ",children:[e.jsxs("div",{className:"p-0 ",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Access Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"public",name:"access",value:"public",checked:A===1,onClick:xa,className:"form-radio text-blue-500"}),e.jsx("label",{htmlFor:"public",className:"ml-2 text-gray-700",children:"Public Access"})]}),!be&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"restricted",name:"access",value:"restricted",checked:A===0,onClick:xa,className:"form-radio text-blue-500"}),e.jsx("label",{htmlFor:"restricted",className:"ml-2 text-gray-700",children:"Restricted Access"})]})]})]}),A===0&&e.jsx("div",{className:"overflow-x-auto rounded-lg border-2 mt-1.5 ",children:e.jsx("div",{className:"inline-block align-middle w-full ",children:e.jsx("div",{className:"overflow-hidden shadow sm:rounded-lg ",children:e.jsx("div",{className:"overflow-y-auto ",style:{height:"30vh"},children:e.jsxs("table",{ref:ca,className:"table min-w-full divide-y  divide-gray-200 rounded-lg border-2",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:ne===K,onChange:()=>{w(ne===K?[]:K)}})}),Wt.map((a,l)=>a!=="id"&&e.jsxs("th",{className:"px-6 py-3 pl-4 text-left text-xs font-medium text-sky-800 uppercase tracking-wide ",children:[a,e.jsx("span",{className:"ml-2 cursor-pointer",onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&i.stopPropagation()},role:"button",tabIndex:0})]},l)),e.jsx("th",{})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("div",{className:"w-full py-4",children:e.jsx(Xa,{len:2})})})}):K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx(Ka,{})})}):(K==null?void 0:K.length)>0&&(K==null?void 0:K.map(a=>e.jsx("tr",{className:"bg-white divide-y group",children:e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:(ne==null?void 0:ne.some(l=>l.Id===a.Id))||(ne==null?void 0:ne.some(l=>l.contact_sfdc_id===a.Id)),onChange:()=>{ne!=null&&ne.some(l=>l.Id===a.Id||l.contact_sfdc_id===a.Id)?w(l=>l.filter(i=>(i==null?void 0:i.Id)!==a.Id&&(i==null?void 0:i.contact_sfdc_id)!==(a==null?void 0:a.Id))):w(l=>[...l,a])}})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 text-sm font-bold cursor-pointer tracking-wider",children:a.Name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:a.Email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:a.Title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-sm font-normal tracking-wider",children:a.MailingCountry})]})},a.id)))})]})})})})})]})]})})]}),e.jsx("div",{className:"line absolute top-4 left-1/2 w-0.5 h-[71%] mt-28 bg-gray-200 transform -translate-x-1/2"})]}),e.jsxs("div",{className:"flex justify-end mr-5 space-x-8 mb-4 ",children:[e.jsx("button",{className:"px-6 py-2 w-20 text-sm text-red-600 bg-red-100 rounded-lg hover:bg-red-200 transition-colors border border-red-200",onClick:()=>{f(1)},children:"Back"}),e.jsx("button",{className:"px-6 py-2 w-20 flex justify-center items-center text-sm btn-secondary text-white rounded-lg transition-colors",onClick:()=>{pt.length>0&&ct(),Pa(),f(0)},children:"Save"})]})]})})}};return e.jsxs(e.Fragment,{children:[oa?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 ",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsx(St,{})]}):e.jsx(hs,{content:he,isOpen:k,closeModal:$,setSelectedContent:re}),y&&e.jsx(wn,{}),ot?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 ",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsx(St,{})]}):e.jsx(Ln,{versionModalOpen:it,viewVersionContent:D,setViewVersionContent:W,content:he,setVersionModalOpen:bt,selectedVersionContent:H,setSelectedVersionContent:se,UpdateContentVersionHandler:Ha}),e.jsxs("button",{className:"text-secondary text-[14px] mt-2 pt-1 pb-1 pl-4 pr-4 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",onClick:()=>{jt(),vt(),f(1)},children:[e.jsx(O,{icon:on,className:" mr-2"}),"Edit"]}),e.jsx("div",{className:"absolute",children:e.jsx("div",{children:e.jsx("div",{children:mt()})})})]})}function Pn({pitchToEdit:G,setPitchToEdit:q}){const{baseURL:j,viewer_id:N,TableNameHandler:u,setShowButtonLoading:k,authURL:y,isMatchingCRMFound:E,isServiceUserConnected:g}=s.useContext(ra),$=wa(),F=Ys(),P=Fe(T=>T.pitches.selectedPitches),S=Fe(T=>T.pitches.selectedPitchesActiveCount),f=Fe(T=>T.pitches.selectedPitchesDeactiveCount),[c,m]=s.useState(!0),[I,v]=s.useState(!1),B=va(),R=async()=>{v(!0);const T=[];for(let b=0;b<P.length;b++)T.push(P[b].id);try{const b=await $.post("/deactivate-pitch",{pitchIds:T,updated_by:N},{withCredentials:!0});B(aa()),B(sa({sortColumn:"name",sortOrder:"ASC",viewer_id:N,baseURL:j})),ge.success("Pitch deactivated Successfully")}catch(b){console.log(b.message),ge.error("not working")}finally{v(!1)}},M=async()=>{v(!0);const T=[];for(let b=0;b<P.length;b++)T.push(P[b].id);try{const b=await $.post("/activate-pitch",{pitchIds:T,updated_by:N},{withCredentials:!0});console.log(b.data),ge.success("Pitch activated Successfully"),B(aa()),B(sa({sortColumn:"name",sortOrder:"ASC",viewer_id:N,baseURL:j}))}catch(b){console.log(b.message)}finally{v(!1)}},V=()=>{m(!!(!y&&E&&g))};return s.useEffect(()=>{V()},[E,g,y]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container flex justify-between mx-auto px-4 pt-4 pb-0",children:[e.jsxs("div",{className:"overflow-x-auto scroll-none",children:[e.jsx("div",{className:"flex justify-between w-full",children:e.jsx("div",{className:"flex space-x-1 transition-all",children:F("Create Pitch")=="1"&&Object.keys(P).length===0&&c&&e.jsx("div",{className:"transition-all",children:e.jsx(In,{})})})}),e.jsxs("div",{className:`flex flex-row transition-all mb-1  ${P.length>0?"bg-white dark:bg-gray-600 rounded-md p-0.5 shadow-md w-[60vw]":""}`,children:[F("Edit Pitch")=="1"&&P.length<=1&&c&&Object.keys(P).length>0&&e.jsx("div",{className:"transition-all",children:e.jsx(ms,{})}),G&&e.jsx("div",{className:"transition-all",children:e.jsx(ms,{pitchToEdit:G,setPitchToEdit:q})}),P.length>0&&e.jsxs(e.Fragment,{children:[F("View Tag; View All Tag")=="1"&&e.jsx("div",{className:"space-x-1 transition-all",children:e.jsxs("button",{className:"text-secondary text-[14px] mt-2 pt-1 pb-1 pl-4 pr-4 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",onClick:async()=>{k(!0),B(aa()),await u("tag","filter","pitch"),k(!1)},children:[e.jsx(O,{icon:cn,className:"mr-2"}),"Show Tag"]})}),F("View Content; View all Content")=="1"&&e.jsx("div",{className:"space-x-1 transition-all",children:e.jsxs("button",{className:"text-secondary text-[14px] mt-2 pt-1 pb-1 pl-2 pr-2 mr-2 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",onClick:async()=>{k(!0),B(aa()),await u("content","filter","pitch"),k(!1)},children:[e.jsx(O,{icon:dn,className:"mr-2"}),"Show Content"]})})]}),F("Activate/Deactivate Pitch")=="1"&&P.length==S&&P.length>=1&&c&&e.jsx("div",{className:"transition-all ",children:e.jsx(ls,{label:"Deactivate",onClickHandle:R,css:"text-secondary text-[14px] mt-2 pt-1 pb-1 pl-3 pr-3 mr-3 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",icon:un,btn:"mr-2",isDiasble:I})}),F("Activate/Deactivate Pitch")=="1"&&P.length==f&&P.length>=1&&c&&e.jsx("div",{className:"transition-all",children:e.jsx(ls,{isDiasble:I,label:"Activate",onClickHandle:M,css:"text-sky-800 text-[14px] mt-2 pt-1 pb-1 pl-3 pr-3 mr-3 mb-2 rounded-md border-solid hover:bg-gray-200  dark:text-gray-200 dark:hover:bg-gray-700 dark:border-gray-500",icon:mn,btn:"mr-2"})})]})]}),e.jsx("div",{className:"flex flex-row flex-nowrap space-x-2",children:e.jsx(en,{queryTable:"pitch"})})]})})}function zn(){const{viewer_id:G,showButtonLoading:q,baseURL:j}=s.useContext(ra),N=Ds(),u=Bs(),[k,y]=s.useState(null),E=Fe(p=>p.pitches.pitches),g=Fe(p=>p.pitches.filterPitches),$=Fe(p=>p.filter),F=Fe(p=>p.filter.filterData),P=Fe(p=>p.pitches.selectedPitches),S=Fe(p=>p.pitches.loading),f=va(),[c]=Hs(["userData","revspireToken"]),m=c==null?void 0:c.userData,I=c==null?void 0:c.revspireToken;s.useEffect(()=>{const p=new URLSearchParams(u.search),A=p.get("pitch");A&&y(A),p.has("pitch")&&(p.delete("pitch"),N(`${u.pathname}`,{replace:!0}))},[u]),s.useEffect(()=>{if(P.length>0){let p=0,A=0;for(let ce=0;ce<P.length;ce++)P[ce].active==1?p++:A=A+1;f($s(p)),f(zs(A))}},[P]),s.useEffect(()=>{f(sa({sortColumn:"name",sortOrder:"ASC",viewer_id:G,baseURL:j})),f(Vs())},[]),s.useEffect(()=>{f(fa([]))},[f]);const v=E.map(p=>({...p,"Created At":p.created_at||"N/A","Created By":p.created_by_name||"N/A","Updated By":p.updated_by_name||"N/A","Updated At":p.updated_at||"N/A"})),B=F.map(p=>({...p,"Created At":p.created_at||"N/A","Created By":p.created_by_name||"N/A","Updated By":p.updated_by_name||"N/A","Updated At":p.updated_at||"N/A"})),R=["name","owner","Created By","Created At","Updated By","Updated At","Active"],M=["name","owner_name","created_by_name","created_at","updated_by_name","updated_at","active"],V=p=>{(p==null?void 0:p.length)==0?f(fa(p)):p==E&&f(fa([]));const A=P.findIndex(ce=>ce.id===p.id);Array.isArray(p)?f(fa(p)):f(A===-1?Ws(p):qs(p))},T=p=>{f(Zs(p))},b=encodeURIComponent(j),K=p=>{m&&I?window.open(`/dsr/${p}?apiURL=${b}`,"_blank"):window.open(`/pitchlogin/${p}?apiURL=${b}`,"_blank")};return q?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute bg-gray-800 opacity-50 inset-0"}),e.jsx(St,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(vn,{}),e.jsx(Pn,{pitchToEdit:k,setPitchToEdit:y}),e.jsx("div",{className:"container mx-auto p-4 ml-auto ",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"rounded-lg",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:$.filterApplied?e.jsx(Za,{data:B,columnsHeading:R,loading:$.loading,rowKeys:M,OnChangeHandler:V,selectedItems:P,SortHandler:T,OnClickHandler:K}):g.filterApplied?e.jsx(Za,{data:B,columnsHeading:R,rowKeys:M,OnChangeHandler:V,selectedItems:P,SortHandler:T,loading:$.loading,OnClickHandler:K}):e.jsx(Za,{data:v,columnsHeading:R,loading:S,rowKeys:M,OnChangeHandler:V,selectedItems:P,OnClickHandler:K})})})})})]})}export{zn as default};
